"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[0],{4e3:(le,I,r)=>{r.r(I),r.d(I,{default:()=>re});var e=r(6568),s=r(9240),g=r(3848),c=r(9512),u=r(2556),f=r(6820),d=r(6312),k=r(6364),p=r(8168),h=r(8608),E=r(4320),G=r(4832),b=r(6764),R=r(6272),_=r(6936),M=r(6488),w=r(5528);let m=(()=>{class n{constructor(t){this._httpClient=t,this._item=new h.g(null),this._items=new h.g(null),this._contacts=new h.g(null),this._unsubscribeAll=new f.E}get items$(){return this._items.asObservable()}get item$(){return this._item.asObservable()}get contacts$(){return this._contacts.asObservable()}getItems(t=null){return this._httpClient.get("api/apps/file-manager",{params:{folderId:t}}).pipe((0,E.y)(o=>{this._items.next(o)}))}getContacts(){return this._httpClient.get("api/apps/file-manager/files").pipe((0,E.y)(t=>{this._contacts.next(t),console.log(" from getContacts ",this._contacts)}))}addFolder(){return this.getContacts(),this.contacts$.pipe((0,G.U)(1),(0,b.G)(t=>this._httpClient.post("api/apps/file-manager/item",{}).pipe((0,R.k)(o=>(console.log(t),this._contacts.next([o]),o)))))}getItemById(t){return this._items.pipe((0,G.U)(1),(0,R.k)(o=>{const i=[...o.folders,...o.files].find(l=>l.id===t)||null;return this._item.next(i),i}),(0,b.G)(o=>o?(0,M.of)(o):(0,_.c)("Could not found the item with id of "+t+"!")))}static#e=this.\u0275fac=function(o){return new(o||n)(e.CoB(w.KK))};static#t=this.\u0275prov=e.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var D=r(3868);const S=["matDrawer"];function T(n,a){if(1&n&&(e.SAx(0),e.OEk(1),e.k70()),2&n){const t=e.GaO();e.yG2(),e.CAO(" ",t.items.folders.length," folders, ",t.items.files.length," files ")}}const x=n=>["/document-management/file-manager/folders/",n];function L(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"a",18),e.OEk(2),e.C$Y(),e.k70()),2&n){const t=e.GaO().$implicit;e.yG2(),e.E7m("routerLink",e.S45(2,x,t.id)),e.yG2(),e.cNF(t.name)}}function A(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div"),e.OEk(2),e.C$Y(),e.k70()),2&n){const t=e.GaO().$implicit;e.yG2(2),e.cNF(t.name)}}function B(n,a){1&n&&(e.SAx(0),e.I0R(1,"div",19),e.OEk(2,"/"),e.C$Y(),e.k70())}function U(n,a){if(1&n&&(e.SAx(0),e.yuY(1,L,3,4,"ng-container",9)(2,A,3,1,"ng-container",9)(3,B,3,0,"ng-container",9),e.k70()),2&n){const t=a.last;e.yG2(),e.E7m("ngIf",!t),e.yG2(),e.E7m("ngIf",t),e.yG2(),e.E7m("ngIf",!t)}}const j=()=>["/document-management/file-manager"];function z(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div",17)(2,"a",18),e.OEk(3,"Home "),e.C$Y(),e.I0R(4,"div",19),e.OEk(5,"/"),e.C$Y(),e.yuY(6,U,4,3,"ng-container",20),e.C$Y(),e.k70()),2&n){const t=e.GaO();e.yG2(2),e.E7m("routerLink",e.q4q(3,j)),e.yG2(4),e.E7m("ngForOf",t.items.path)("ngForTrackBy",t.trackByFn)}}function N(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div",33),e.OEk(2),e.C$Y(),e.k70()),2&n){const t=e.GaO().$implicit;e.yG2(2),e.oRS(" ",t.contents," ")}}const F=n=>["./details/",n];function P(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div",24)(2,"a",25),e.qCj("click",function(o){return o.preventDefault()}),e.wR5(3,"mat-icon",26),e.C$Y(),e.I0R(4,"a",27)(5,"div",28)(6,"div",29),e.wR5(7,"mat-icon",30),e.C$Y()(),e.I0R(8,"div",31)(9,"div",32),e.OEk(10),e.C$Y(),e.yuY(11,N,3,1,"ng-container",9),e.C$Y()()(),e.k70()),2&n){const t=a.$implicit;e.yG2(2),e.E7m("routerLink",e.S45(7,F,t.id)),e.yG2(),e.E7m("svgIcon","heroicons_solid:information-circle"),e.yG2(),e.E7m("routerLink",e.S45(9,x,t.id)),e.yG2(3),e.E7m("svgIcon","heroicons_solid:folder"),e.yG2(2),e.E7m("matTooltip",t.name),e.yG2(),e.oRS(" ",t.name," "),e.yG2(),e.E7m("ngIf",t.contents)}}function J(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div")(2,"div",22),e.OEk(3,"Folders"),e.C$Y(),e.I0R(4,"div",23),e.yuY(5,P,12,11,"ng-container",20),e.C$Y()(),e.k70()),2&n){const t=e.GaO(2);e.yG2(5),e.E7m("ngForOf",t.items.folders)("ngForTrackBy",t.trackByFn)}}function K(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div",33),e.OEk(2),e.C$Y(),e.k70()),2&n){const t=e.GaO().$implicit;e.yG2(2),e.oRS(" ",t.contents," ")}}function H(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"a",34)(2,"div",28)(3,"div",29)(4,"div",35),e.wR5(5,"mat-icon",30),e.I0R(6,"div",36),e.OEk(7),e.C$Y()()()(),e.I0R(8,"div",31)(9,"div",32),e.OEk(10),e.C$Y(),e.yuY(11,K,3,1,"ng-container",9),e.C$Y()(),e.k70()),2&n){const t=a.$implicit;e.yG2(),e.E7m("routerLink",e.S45(16,F,t.id)),e.yG2(4),e.E7m("svgIcon","heroicons_solid:document"),e.yG2(),e.eAK("bg-red-600","PDF"===t.type)("bg-blue-600","DOC"===t.type)("bg-green-600","XLS"===t.type)("bg-gray-600","TXT"===t.type)("bg-amber-600","JPG"===t.type),e.yG2(),e.oRS(" ",t.type.toUpperCase()," "),e.yG2(2),e.E7m("matTooltip",t.name),e.yG2(),e.oRS(" ",t.name," "),e.yG2(),e.E7m("ngIf",t.contents)}}function X(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div")(2,"div",22),e.OEk(3,"Files"),e.C$Y(),e.I0R(4,"div",23),e.yuY(5,H,12,18,"ng-container",20),e.C$Y()(),e.k70()),2&n){const t=e.GaO(2);e.yG2(5),e.E7m("ngForOf",t.items.files)("ngForTrackBy",t.trackByFn)}}function Q(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div",21),e.yuY(2,J,6,2,"ng-container",9)(3,X,6,2,"ng-container",9),e.C$Y(),e.k70()),2&n){const t=e.GaO();e.yG2(2),e.E7m("ngIf",t.items.folders.length>0),e.yG2(),e.E7m("ngIf",t.items.files.length>0)}}function W(n,a){1&n&&(e.I0R(0,"div",37),e.wR5(1,"mat-icon",38),e.I0R(2,"div",39),e.OEk(3," There are no items! "),e.C$Y()()),2&n&&(e.yG2(),e.E7m("svgIcon","heroicons_outline:folder-open"))}let v=(()=>{class n{constructor(t,o,i,l,C){this._activatedRoute=t,this._changeDetectorRef=o,this._router=i,this._fileManagerService=l,this._fuseMediaWatcherService=C,this._unsubscribeAll=new f.E}ngOnInit(){this._fileManagerService.items$.pipe((0,p.a)(this._unsubscribeAll)).subscribe(t=>{this.items=t,this._changeDetectorRef.markForCheck()}),this._fileManagerService.item$.pipe((0,p.a)(this._unsubscribeAll)).subscribe(t=>{this.selectedItem=t,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,p.a)(this._unsubscribeAll)).subscribe(t=>{this.drawerMode=t.matches?"side":"over",this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createFile(){this._fileManagerService.addFolder().subscribe(t=>{this._router.navigate(["./",t.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(t,o){return o.id||t}static#e=this.\u0275fac=function(o){return new(o||n)(e.GI1(s.gV),e.GI1(e.kD9),e.GI1(s.E5),e.GI1(m),e.GI1(D.E))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["file-manager-list"]],viewQuery:function(o,i){if(1&o&&e.CC$(S,7),2&o){let l;e.wto(l=e.Gqi())&&(i.matDrawer=l.first)}},standalone:!0,features:[e.UHJ],decls:26,vars:12,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-100","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","sm:justify-between","p-6","sm:py-12","md:px-8","border-b","bg-card","dark:bg-transparent"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"flex","items-center","mt-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"mt-4","sm:mt-0"],["mat-flat-button","",3,"color"],[3,"svgIcon"],[1,"ml-2","mr-1"],["mat-flat-button","",1,"ml-4",3,"color","click"],[4,"ngIf","ngIfElse"],["noItems",""],[1,"flex","items-center","space-x-2"],[1,"text-primary","cursor-pointer",3,"routerLink"],[1,""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-6","md:p-8","space-y-8"],[1,"font-medium"],[1,"flex","flex-wrap","-m-2","mt-2"],[1,"relative","w-40","h-40","m-2","p-4","shadow","rounded-2xl","bg-card"],["mat-icon-button","",1,"absolute","z-20","top-1.5","right-1.5","w-8","h-8","min-h-8",3,"routerLink","click"],[1,"icon-size-5",3,"svgIcon"],[1,"z-10","absolute","inset-0","flex","flex-col","p-4","cursor-pointer",3,"routerLink"],[1,"aspect-[9/6]"],[1,"flex","items-center","justify-center","h-full"],[1,"icon-size-14","text-hint","opacity-50",3,"svgIcon"],[1,"flex","flex-col","flex-auto","justify-center","text-center","text-sm","font-medium"],[1,"truncate",3,"matTooltip"],[1,"text-secondary","truncate"],[1,"flex","flex-col","w-40","h-40","m-2","p-4","shadow","rounded-2xl","cursor-pointer","bg-card",3,"routerLink"],[1,"relative"],[1,"absolute","left-0","bottom-0","px-1.5","rounded","text-sm","font-semibold","leading-5","text-white"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(o,i){if(1&o&&(e.I0R(0,"div",0)(1,"mat-drawer-container",1),e.qCj("backdropClick",function(){return i.onBackdropClicked()}),e.I0R(2,"mat-drawer",2,3),e.wR5(4,"router-outlet"),e.C$Y(),e.I0R(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),e.OEk(10," Documents Management "),e.C$Y(),e.I0R(11,"div",8),e.yuY(12,T,2,2,"ng-container",9)(13,z,7,4,"ng-container",9),e.C$Y()(),e.I0R(14,"div",10)(15,"button",11),e.wR5(16,"mat-icon",12),e.I0R(17,"span",13),e.OEk(18,"Upload file"),e.C$Y()(),e.I0R(19,"button",14),e.qCj("click",function(C){return C.preventDefault()})("click",function(){return i.createFile()}),e.wR5(20,"mat-icon",12),e.I0R(21,"span",13),e.OEk(22,"Add"),e.C$Y()()()(),e.yuY(23,Q,4,2,"ng-container",15)(24,W,4,1,"ng-template",null,16,e.gJz),e.C$Y()()()()),2&o){const l=e.Gew(25);e.yG2(2),e.E7m("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.yG2(10),e.E7m("ngIf",!i.items.path.length),e.yG2(),e.E7m("ngIf",i.items.path.length),e.yG2(2),e.E7m("color","primary"),e.yG2(),e.E7m("svgIcon","heroicons_outline:plus"),e.yG2(3),e.E7m("color","primary"),e.yG2(),e.E7m("svgIcon","heroicons_outline:plus"),e.yG2(3),e.E7m("ngIf",i.items&&(i.items.folders.length>0||i.items.files.length>0))("ngIfElse",l)}},dependencies:[d.sb,d.Iz,d.G4,d.q0,s.cP,g.u_,s.ER,g.Iw,c.oJ,c.Gw,c.cP,u.oB,u.qL,k.KO,k.a4],encapsulation:2,changeDetection:0})}return n})();var V=r(4332);function Z(n,a){1&n&&(e.SAx(0),e.wR5(1,"mat-icon",23),e.k70()),2&n&&(e.yG2(),e.E7m("svgIcon","heroicons_outline:folder"))}function q(n,a){1&n&&(e.SAx(0),e.wR5(1,"mat-icon",23),e.k70()),2&n&&(e.yG2(),e.E7m("svgIcon","heroicons_outline:document"))}function ee(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div",12)(2,"div",13),e.OEk(3,"Contents"),e.C$Y(),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.k70()),2&n){const t=e.GaO();e.yG2(5),e.cNF(null==t.item?null:t.item.contents)}}function te(n,a){if(1&n&&(e.SAx(0),e.I0R(1,"div"),e.OEk(2),e.C$Y(),e.k70()),2&n){const t=e.GaO();e.yG2(2),e.cNF(null==t.item?null:t.item.description)}}function ne(n,a){1&n&&(e.SAx(0),e.I0R(1,"div",24),e.OEk(2," Click here to add a description "),e.C$Y(),e.k70())}const ie=()=>["../../"];let y=(()=>{class n{constructor(t,o,i,l){this._changeDetectorRef=t,this._fileManagerListComponent=o,this._fileManagerService=i,this._formBuilder=l,this._unsubscribeAll=new f.E}ngOnInit(){this._fileManagerListComponent.matDrawer.open(),this.contactForm=this._formBuilder.group({id:[""],folderId:null,name:["New Contact"],createdBy:[""],createdAt:[""],modifiedAt:null,size:null,type:["PDF"],description:null,contents:null})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._fileManagerListComponent.matDrawer.close()}trackByFn(t,o){return o.id||t}static#e=this.\u0275fac=function(o){return new(o||n)(e.GI1(e.kD9),e.GI1(v),e.GI1(m),e.GI1(V.KE))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["file-manager-details"]],standalone:!0,features:[e.UHJ],decls:50,vars:27,consts:[[1,"flex","flex-col","flex-auto","p-6","md:p-8"],[1,"flex","items-center","justify-end"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"mt-8","aspect-[9/6]"],[1,"flex","items-center","justify-center","h-full","border","rounded-lg","bg-gray-50","dark:bg-card"],[4,"ngIf"],[1,"flex","flex-col","items-start","mt-8"],[1,"text-xl","font-medium"],[1,"mt-1","px-1.5","rounded","text-sm","font-semibold","leading-5","text-white"],[1,"text-lg","font-medium","mt-8"],[1,"flex","flex-col","mt-4","border-t","border-b","divide-y","font-medium"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"flex","items-center","justify-between","mt-8"],[1,"text-lg","font-medium"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","mt-2","border-t"],[1,"py-3"],[1,"grid","grid-cols-2","gap-4","w-full","mt-8"],["mat-flat-button","",1,"flex-auto",3,"color"],["mat-stroked-button","",1,"flex-auto"],[1,"icon-size-24","text-hint",3,"svgIcon"],[1,"italic","text-secondary"]],template:function(o,i){1&o&&(e.I0R(0,"div",0)(1,"div",1)(2,"a",2),e.wR5(3,"mat-icon",3),e.C$Y()(),e.I0R(4,"div",4)(5,"div",5),e.yuY(6,Z,2,1,"ng-container",6)(7,q,2,1,"ng-container",6),e.C$Y()(),e.I0R(8,"div",7)(9,"div",8),e.OEk(10),e.C$Y(),e.wR5(11,"div",9),e.C$Y(),e.I0R(12,"div",10),e.OEk(13,"Information"),e.C$Y(),e.I0R(14,"div",11)(15,"div",12)(16,"div",13),e.OEk(17,"Created By"),e.C$Y(),e.I0R(18,"div"),e.OEk(19),e.C$Y()(),e.I0R(20,"div",12)(21,"div",13),e.OEk(22,"Created At"),e.C$Y(),e.I0R(23,"div"),e.OEk(24),e.C$Y()(),e.I0R(25,"div",12)(26,"div",13),e.OEk(27,"Modified At"),e.C$Y(),e.I0R(28,"div"),e.OEk(29),e.C$Y()(),e.I0R(30,"div",12)(31,"div",13),e.OEk(32,"Size"),e.C$Y(),e.I0R(33,"div"),e.OEk(34),e.C$Y()(),e.yuY(35,ee,6,1,"ng-container",6),e.C$Y(),e.I0R(36,"div",14)(37,"div",15),e.OEk(38,"Description"),e.C$Y(),e.I0R(39,"button",16),e.wR5(40,"mat-icon",17),e.C$Y()(),e.I0R(41,"div",18)(42,"div",19),e.yuY(43,te,3,1,"ng-container",6)(44,ne,3,0,"ng-container",6),e.C$Y()(),e.I0R(45,"div",20)(46,"button",21),e.OEk(47," Download "),e.C$Y(),e.I0R(48,"button",22),e.OEk(49,"Delete"),e.C$Y()()()),2&o&&(e.yG2(2),e.E7m("routerLink",e.q4q(26,ie)),e.yG2(),e.E7m("svgIcon","heroicons_outline:x-mark"),e.yG2(3),e.E7m("ngIf","folder"===(null==i.item?null:i.item.type)),e.yG2(),e.E7m("ngIf","folder"!==(null==i.item?null:i.item.type)),e.yG2(3),e.cNF(null==i.item?null:i.item.name),e.yG2(),e.eAK("bg-indigo-600","folder"===(null==i.item?null:i.item.type))("bg-red-600","PDF"===(null==i.item?null:i.item.type))("bg-blue-600","DOC"===(null==i.item?null:i.item.type))("bg-green-600","XLS"===(null==i.item?null:i.item.type))("bg-gray-600","TXT"===(null==i.item?null:i.item.type))("bg-amber-600","JPG"===(null==i.item?null:i.item.type)),e.yG2(8),e.cNF(null==i.item?null:i.item.createdBy),e.yG2(5),e.cNF(null==i.item?null:i.item.createdAt),e.yG2(5),e.cNF(null==i.item?null:i.item.modifiedAt),e.yG2(5),e.cNF(null==i.item?null:i.item.size),e.yG2(),e.E7m("ngIf",null==i.item?null:i.item.contents),e.yG2(5),e.E7m("svgIcon","heroicons_solid:pencil"),e.yG2(3),e.E7m("ngIf",null==i.item?null:i.item.description),e.yG2(),e.E7m("ngIf",!(null!=i.item&&i.item.description)),e.yG2(2),e.E7m("color","primary"))},dependencies:[c.oJ,c.Gw,c.cP,c.um,s.ER,u.oB,u.qL,g.u_],encapsulation:2,changeDetection:0})}return n})(),oe=(()=>{class n{constructor(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["file-manager"]],standalone:!0,features:[e.UHJ],decls:1,vars:0,template:function(o,i){1&o&&e.wR5(0,"router-outlet")},dependencies:[s.cP],encapsulation:2,changeDetection:0})}return n})();var $=r(7030);const Y=(n,a)=>{const t=(0,e.uUt)(m),o=(0,e.uUt)(s.E5);return t.getItemById(n.paramMap.get("id")).pipe((0,$.a)(i=>{console.error(i);const l=a.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(l),(0,_.c)(i)}))},O=(n,a,t,o)=>{let i=o.root;for(;i.firstChild;)i=i.firstChild;return!(o.url.includes("/file-manager")&&!o.url.includes("/details"))||n.closeDrawer().then(()=>!0)},re=[{path:"",component:oe,children:[{path:"folders/:folderId",component:v,resolve:{item:(n,a)=>{const t=(0,e.uUt)(m),o=(0,e.uUt)(s.E5);return t.getItems(n.paramMap.get("folderId")).pipe((0,$.a)(i=>{console.error(i);const l=a.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(l),(0,_.c)(i)}))}},children:[{path:"details/:id",component:y,resolve:{item:Y},canDeactivate:[O]}]},{path:"",component:v,resolve:{items:()=>(0,e.uUt)(m).getItems()},children:[{path:"details/:id",component:y,resolve:{item:Y},canDeactivate:[O]},{path:":id",component:y,canDeactivate:[(n,a,t,o)=>{let i=o.root;for(;i.firstChild;)i=i.firstChild;return!(o.url.includes("/file-manager")&&!i.paramMap.get("id"))||n.closeDrawer().then(()=>!0)}]}]}]}]}}]);