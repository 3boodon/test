"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[424],{7806:($t,_,a)=>{a.r(_),a.d(_,{default:()=>Et});var t=a(6568),m=a(9240),b=a(3848);let N=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["debt-management"]],standalone:!0,features:[t.UHJ],decls:1,vars:0,template:function(o,i){1&o&&t.wR5(0,"router-outlet")},dependencies:[b.MD,m.cP],encapsulation:2})}return n})();var k=a(8608),y=a(6820),x=a(4320),h=a(8168),I=a(4832),R=a(6764),E=a(6272),T=a(1952),A=a(6936),J=a(6488),j=a(5528);let v=(()=>{class n{constructor(e){this._httpClient=e,this._data=new k.g(null),this._debtTable=new k.g(null),this._debt=new k.g(null),this._debts=new k.g(null),this._unsubscribeAll=new y.E}get debt$(){return this._debt.asObservable()}get debts$(){return this._debts.asObservable()}get data$(){return this._data.asObservable()}get debtTable$(){return this._debtTable.asObservable()}getData(){return this._httpClient.get("api/debt-management").pipe((0,x.y)(e=>{this._data.next(e)}))}getdebts(){return this._httpClient.get("api/debt-management/debts").pipe((0,x.y)(e=>{console.log(e),this._debts.next(e)}))}getdebtsTable(){return this._httpClient.get("api/debt-management/data").pipe((0,x.y)(e=>{console.log(e),this._debtTable.next(e.Detials)}))}createdebt(e){return this.getdebts().pipe((0,h.a)(this._unsubscribeAll)).subscribe(o=>{console.log("data  ",o),this._debts.next(o)}),this.debts$.pipe((0,I.U)(1),(0,R.G)(o=>this._httpClient.post("api/debt-management/debt",{type:e}).pipe((0,E.k)(i=>(console.log("newdebt ",i),this._debts.next([i]),i)))))}updatedebt(e,o){return this.debts$.pipe((0,I.U)(1),(0,R.G)(i=>this._httpClient.patch("api/debt-management/debt",{id:e,debt:o}).pipe((0,E.k)(s=>{const l=i.findIndex(u=>u.id===e);return i[l]=s,this._debts.next(i),s}),(0,R.G)(s=>this.debt$.pipe((0,I.U)(1),(0,T.I)(l=>l&&l.id===e),(0,x.y)(()=>(this._debt.next(s),s)))))))}deletedebt(e){return this.debts$.pipe((0,I.U)(1),(0,R.G)(o=>this._httpClient.delete("api/debt-management/debt",{params:{id:e}}).pipe((0,E.k)(i=>{const s=o.findIndex(l=>l.id===e);return o.splice(s,1),this._debts.next(o),i}))))}getdebtById(e){return this._debts.pipe((0,I.U)(1),(0,E.k)(o=>{const i=o.find(s=>s.id===e)||null;return this._debt.next(i),i}),(0,R.G)(o=>o?(0,J.of)(o):(0,A.c)("Could not found debt with id of "+e+"!")))}static#t=this.\u0275fac=function(o){return new(o||n)(t.CoB(j.KK))};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var G=a(6312),f=a(9512),$=a(6752),g=a(2556),c=a(6524),F=a(6364),w=a(9020);let Q=(()=>{class n{constructor(e,o){this._debtService=e,this._router=o,this._unsubscribeAll=new y.E}ngOnInit(){this._debtService.getData().pipe((0,h.a)(this._unsubscribeAll)).subscribe(e=>{this.data=e,this._prepareChartData()}),window.Apex={chart:{events:{mounted:(e,o)=>{this._fixSvgFill(e.el)},updated:(e,o)=>{this._fixSvgFill(e.el)}}}}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}_fixSvgFill(e){const o=this._router.url;Array.from(e.querySelectorAll("*[fill]")).filter(i=>-1!==i.getAttribute("fill").indexOf("url(")).forEach(i=>{const s=i.getAttribute("fill");i.setAttribute("fill",`url(${o}${s.slice(s.indexOf("#"))}`)})}_prepareChartData(){this.chartTotalDebt={chart:{animations:{enabled:!1},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"area",sparkline:{enabled:!0}},colors:["#38BDF8"],fill:{colors:["#38BDF8"],opacity:.5},series:this.data.TotalDebt.series,stroke:{curve:"smooth"},tooltip:{followCursor:!0,theme:"dark"},xaxis:{type:"category",categories:this.data.TotalDebt.labels},yaxis:{labels:{formatter:e=>e.toString()}}},this.DebtTypeDistribution={series:[{data:[270,340,450]}],chart:{type:"bar",height:180},plotOptions:{bar:{barHeight:"100%",distributed:!0,horizontal:!0,dataLabels:{position:"bottom"}}},colors:["#34D399"],dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(e,o){return o.w.globals.labels[o.dataPointIndex]+":  "+e},offsetX:0,dropShadow:{enabled:!1}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:["mortgage","credit card","student loan"]},yaxis:{labels:{show:!1}},title:{text:"Debt Type Distribution",align:"left",floating:!0},subtitle:{text:"Category Names as DataLabels inside bars",align:"center"},tooltip:{theme:"dark",x:{show:!1},y:{title:{formatter:function(){return""}}}}}}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(v),t.GI1(m.E5))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["debt-chart"]],standalone:!0,features:[t.UHJ],decls:48,vars:23,consts:[[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","w-full","mt-8","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"sm:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","items-start","justify-between","m-6","mb-0"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"ml-2"],["mat-button","",1,"h-6","min-h-6","px-2","rounded-full","bg-hover",3,"matMenuTriggerFor"],[1,"font-medium","text-sm","text-secondary"],["conversionMenu","matMenu"],["mat-menu-item",""],[1,"flex","flex-col","flex-auto","h-auto"],[3,"series","chart","dataLabels","stroke","colors","plotOptions","yaxis","xaxis","tooltip"],[1,"sm:col-span-2","lg:col-span-1","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","flex-col","lg:flex-row","lg:items-center","mx-6","mt-3"],[1,"text-7xl","font-bold","tracking-tighter","leading-tight"],[1,"flex","lg:flex-col","lg:ml-3"],[1,"icon-size-5","text-red-500",3,"svgIcon"],[1,"flex","items-center","ml-1","lg:ml-0","lg:mt-0.5","text-md","leading-none","whitespace-nowrap","text-secondary"],[1,"font-medium","text-red-500"],[1,"ml-1"],[1,"flex-auto","w-full","h-full",3,"chart","colors","series","stroke","tooltip","xaxis","yaxis"]],template:function(o,i){if(1&o&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.OEk(4," Debt Type Distribution "),t.C$Y(),t.I0R(5,"div",4)(6,"button",5)(7,"span",6),t.OEk(8,"30 days"),t.C$Y()(),t.I0R(9,"mat-menu",null,7)(11,"button",8),t.OEk(12,"30 days"),t.C$Y(),t.I0R(13,"button",8),t.OEk(14,"3 months"),t.C$Y(),t.I0R(15,"button",8),t.OEk(16,"9 months"),t.C$Y()()()(),t.I0R(17,"div",9),t.wR5(18,"apx-chart",10),t.C$Y()(),t.I0R(19,"div",11)(20,"div",2)(21,"div",3),t.OEk(22," Total Debt Overview "),t.C$Y(),t.I0R(23,"div",4)(24,"button",5)(25,"span",6),t.OEk(26,"30 days"),t.C$Y()(),t.I0R(27,"mat-menu",null,7)(29,"button",8),t.OEk(30,"30 days"),t.C$Y(),t.I0R(31,"button",8),t.OEk(32,"3 months"),t.C$Y(),t.I0R(33,"button",8),t.OEk(34,"9 months"),t.C$Y()()()(),t.I0R(35,"div",12)(36,"div",13),t.OEk(37),t.wVc(38,"number"),t.C$Y(),t.I0R(39,"div",14),t.wR5(40,"mat-icon",15),t.I0R(41,"div",16)(42,"span",17),t.OEk(43,"2%"),t.C$Y(),t.I0R(44,"span",18),t.OEk(45,"below target"),t.C$Y()()()(),t.I0R(46,"div",9),t.wR5(47,"apx-chart",19),t.C$Y()()()),2&o){const s=t.Gew(10);t.yG2(6),t.E7m("matMenuTriggerFor",s),t.yG2(12),t.E7m("series",i.DebtTypeDistribution.series)("chart",i.DebtTypeDistribution.chart)("dataLabels",i.DebtTypeDistribution.dataLabels)("stroke",i.DebtTypeDistribution.stroke)("colors",i.DebtTypeDistribution.colors)("plotOptions",i.DebtTypeDistribution.plotOptions)("yaxis",i.DebtTypeDistribution.yaxis)("xaxis",i.DebtTypeDistribution.xaxis)("tooltip",i.DebtTypeDistribution.tooltip),t.yG2(6),t.E7m("matMenuTriggerFor",s),t.yG2(13),t.oRS(" ",t.g7$(38,20,i.data.TotalDebt.amount,"1.0-0")," "),t.yG2(3),t.E7m("svgIcon","heroicons_mini:arrow-trending-down"),t.yG2(7),t.E7m("chart",i.chartTotalDebt.chart)("colors",i.chartTotalDebt.colors)("series",i.chartTotalDebt.series)("stroke",i.chartTotalDebt.stroke)("tooltip",i.chartTotalDebt.tooltip)("xaxis",i.chartTotalDebt.xaxis)("yaxis",i.chartTotalDebt.yaxis)}},dependencies:[b.MD,b.hl,f.oJ,f.Gw,g.oB,g.qL,c._A,c.aM,c.OQ,c.yG,$.ue,w.G,w.q,F.KO],encapsulation:2,changeDetection:0})}return n})();var O=a(7804),d=a(324),K=a(8796),Y=a(8240),V=a(3328),H=a(7236);function P(n,r){1&n&&(t.I0R(0,"th",16),t.OEk(1,"description"),t.C$Y())}const W=(n,r,e)=>({"bg-blue-500":n,"bg-red-500":r,"bg-green-500":e});function X(n,r){if(1&n&&(t.I0R(0,"td",17)(1,"span",18),t.wR5(2,"span",19),t.I0R(3,"span",20),t.OEk(4),t.C$Y()()()),2&n){const e=r.$implicit;t.yG2(2),t.E7m("ngClass",t.uAc(2,W,1===e.id,2===e.id,3===e.id)),t.yG2(2),t.cNF(e.description)}}function Z(n,r){1&n&&(t.I0R(0,"th",16),t.OEk(1,"creditor"),t.C$Y())}function q(n,r){if(1&n&&(t.I0R(0,"td",17)(1,"span",21),t.OEk(2),t.C$Y()()),2&n){const e=r.$implicit;t.yG2(2),t.oRS(" ",e.creditor," ")}}function tt(n,r){1&n&&(t.I0R(0,"th",16),t.OEk(1,"Amount"),t.C$Y())}function et(n,r){if(1&n&&(t.I0R(0,"td",17),t.OEk(1),t.C$Y()),2&n){const e=r.$implicit;t.yG2(),t.oRS(" ",e.amount," ")}}function nt(n,r){1&n&&(t.I0R(0,"th",16),t.OEk(1,"debtor"),t.C$Y())}function it(n,r){if(1&n&&(t.I0R(0,"td",17),t.OEk(1),t.C$Y()),2&n){const e=r.$implicit;t.yG2(),t.oRS(" ",e.debtor," ")}}function ot(n,r){1&n&&(t.I0R(0,"th",16),t.OEk(1,"Currency"),t.C$Y())}function at(n,r){if(1&n&&(t.I0R(0,"td",17),t.OEk(1),t.C$Y()),2&n){const e=r.$implicit;t.yG2(),t.oRS(" ",e.currency," ")}}function st(n,r){1&n&&(t.I0R(0,"th",16),t.OEk(1,"Due Date"),t.C$Y())}function rt(n,r){if(1&n&&(t.I0R(0,"td",17)(1,"span",18)(2,"span",20),t.OEk(3),t.C$Y()()()),2&n){const e=r.$implicit;t.yG2(3),t.cNF(e.dueDate)}}function lt(n,r){1&n&&t.wR5(0,"tr",22)}function ct(n,r){if(1&n){const e=t.KQA();t.I0R(0,"tr",23),t.qCj("click",function(){const s=t.usT(e).$implicit,l=t.GaO();return t.CGJ(l.clickedRows(s))}),t.C$Y()}}let mt=(()=>{class n{constructor(e,o,i,s,l){this._debtService=e,this._activatedRoute=o,this._changeDetectorRef=i,this._bequestService=s,this._router=l,this._unsubscribeAll=new y.E}ngOnInit(){this._debtService.getdebtsTable().pipe((0,h.a)(this._unsubscribeAll)).subscribe(e=>{this.data=e,console.log("data ",this.data.debtDetails)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}clickedRows(e){this._router.navigate(["./",e.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(v),t.GI1(m.gV),t.GI1(t.kD9),t.GI1(H.a),t.GI1(m.E5))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["debt-table"]],standalone:!0,features:[t.UHJ],decls:27,vars:3,consts:[[1,"w-full","max-w-screen-xl","mx-auto","p-4","lg:p-6"],[1,"grid","grid-cols-1","gap-8","w-full"],[1,"col-span2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","description","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","creditor"],["matColumnDef","amount"],["matColumnDef","debtor"],["matColumnDef","currency"],["matColumnDef","dueDate"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:cursor-pointer hover:!bg-black","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"ml-3","leading-4"],[1,"font-medium","text-right"],["mat-header-row",""],["mat-row","",1,"hover:cursor-pointer","hover:!bg-black",3,"click"]],template:function(o,i){1&o&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.OEk(4," Bequest Details "),t.C$Y(),t.I0R(5,"div",4)(6,"table",5),t.SAx(7,6),t.yuY(8,P,2,0,"th",7)(9,X,5,6,"td",8),t.k70(),t.SAx(10,9),t.yuY(11,Z,2,0,"th",7)(12,q,3,1,"td",8),t.k70(),t.SAx(13,10),t.yuY(14,tt,2,0,"th",7)(15,et,2,1,"td",8),t.k70(),t.SAx(16,11),t.yuY(17,nt,2,0,"th",7)(18,it,2,1,"td",8),t.k70(),t.SAx(19,12),t.yuY(20,ot,2,0,"th",7)(21,at,2,1,"td",8),t.k70(),t.SAx(22,13),t.yuY(23,st,2,0,"th",7)(24,rt,4,1,"td",8),t.k70(),t.yuY(25,lt,1,0,"tr",14)(26,ct,1,0,"tr",15),t.C$Y()()()()()),2&o&&(t.yG2(6),t.E7m("dataSource",i.data.Details.rows),t.yG2(19),t.E7m("matHeaderRowDef",i.data.Details.columns),t.yG2(),t.E7m("matRowDefColumns",i.data.Details.columns))},dependencies:[Y.kJ,g.oB,f.oJ,O.KE,c._A,V.w5,$.ue,w.G,d.If,d.wL,d.ie,d.aG,d.Af,d.uc,d.gx,d.qC,d.cX,d.yC,d._I,b.QF],encapsulation:2,changeDetection:0})}return n})();var dt=a(3868),ut=a(4944);const bt=["matDrawer"];function ht(n,r){1&n&&(t.SAx(0),t.I0R(1,"div",20),t.OEk(2," Debt Management "),t.C$Y(),t.k70())}let M=(()=>{class n{constructor(e,o,i,s,l,u,D){this._activatedRoute=e,this._changeDetectorRef=o,this._document=i,this._router=s,this._debtService=l,this._fuseMediaWatcherService=u,this._fuseNavigationService=D,this._unsubscribeAll=new y.E}ngOnInit(){this._debtService.debts$.pipe((0,h.a)(this._unsubscribeAll)).subscribe(e=>{this.debts=e})}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}closeDrawer(){return null}createDebt(e){console.log("Debt"),this._debtService.createdebt(e).subscribe(o=>{this._router.navigate(["./",o.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(m.gV),t.GI1(t.kD9),t.GI1(b.Ud),t.GI1(m.E5),t.GI1(v),t.GI1(dt.E),t.GI1(ut.q2))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["list"]],viewQuery:function(o,i){if(1&o&&t.CC$(bt,7),2&o){let s;t.wto(s=t.Gqi())&&(i.matDrawer=s.first)}},standalone:!0,features:[t.UHJ],decls:34,vars:11,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-128","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8","sm:my-12"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],[4,"transloco"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"matMenuTriggerFor","color"],["moreMenu","matMenu"],["mat-menu-item",""],[3,"svgIcon"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"]],template:function(o,i){if(1&o&&(t.I0R(0,"div",0)(1,"mat-drawer-container",1),t.qCj("backdropClick",function(){return i.onBackdropClicked()}),t.I0R(2,"mat-drawer",2,3),t.wR5(4,"router-outlet"),t.C$Y(),t.I0R(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),t.yuY(12,ht,3,0,"ng-container",11),t.C$Y()(),t.I0R(13,"div",12)(14,"button",13),t.qCj("click",function(){return i.createDebt("Debt")}),t.wR5(15,"mat-icon",14),t.I0R(16,"span",15),t.OEk(17,"Add Debt"),t.C$Y()(),t.I0R(18,"button",16),t.wR5(19,"mat-icon",14),t.I0R(20,"span",15),t.OEk(21,"Export"),t.C$Y()(),t.I0R(22,"mat-menu",null,17)(24,"button",18),t.wR5(25,"mat-icon",19),t.I0R(26,"span"),t.OEk(27,"as PDF"),t.C$Y()(),t.I0R(28,"button",18),t.wR5(29,"mat-icon",19),t.I0R(30,"span"),t.OEk(31,"as XLS"),t.C$Y()()()()()()(),t.wR5(32,"debt-chart")(33,"debt-table"),t.C$Y()()()()),2&o){const s=t.Gew(23);t.yG2(2),t.E7m("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.yG2(12),t.E7m("color","primary"),t.yG2(),t.E7m("svgIcon","heroicons_outline:plus"),t.yG2(3),t.E7m("matMenuTriggerFor",s)("color","primary"),t.yG2(),t.E7m("svgIcon","heroicons_solid:arrow-up-tray"),t.yG2(6),t.E7m("svgIcon","heroicons_outline:document-text"),t.yG2(4),t.E7m("svgIcon","heroicons_outline:document-text")}},dependencies:[b.MD,m.cP,Q,mt,Y.kJ,Y.IZ,g.oB,g.qL,O.KE,c._A,c.aM,c.OQ,c.yG,K.WG,$.ue,w.G,d.If,f.oJ,f.Gw,F.KO,G.sb,G.Iz,G.G4,G.q0],encapsulation:2})}return n})();var ft=a(7030),L=a(6924),p=a(4332),pt=a(7280),C=a(568),U=a(3024),S=a(6300),B=a(8083),gt=a(3148),z=a(84),Dt=a(8616),vt=a(4864),Ct=a(4248);const yt=["titleField"];function xt(n,r){if(1&n&&(t.SAx(0),t.OEk(1),t.wVc(2,"date"),t.k70()),2&n){const e=t.GaO();t.yG2(),t.cNF(t.g7$(2,1,e.debt.dueDate,"longDate"))}}function It(n,r){1&n&&(t.SAx(0),t.OEk(1,"Not set"),t.k70())}const Rt=()=>["../"],kt=(n,r,e)=>({"text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700":n,"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":r,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":e}),Et=[{path:"",component:N,children:[{path:"",component:M,resolve:{debts:()=>(0,t.uUt)(v).getdebts()},children:[{path:":id",component:(()=>{class n{constructor(e,o,i,s,l,u,D,Gt,wt,Tt){this._activatedRoute=e,this._changeDetectorRef=o,this._formBuilder=i,this._fuseConfirmationService=s,this._renderer2=l,this._router=u,this._DebtListManagementComponent=D,this._debtService=Gt,this._overlay=wt,this._viewContainerRef=Tt,this._unsubscribeAll=new y.E}ngOnInit(){this._DebtListManagementComponent.matDrawer.open(),this.DebtForm=this._formBuilder.group({id:[""],description:[""],creditor:[""],debtor:[""],currency:[""],repaymentMethod:[""],debtType:[""],amount:0,dueDate:[null],interestRate:0,maturityPercentage:0,Beneficiaries:[0],specialDocuments:[null]}),this._debtService.getdebts().pipe((0,h.a)(this._unsubscribeAll)).subscribe(e=>{this.Debts=e,this._changeDetectorRef.markForCheck()}),this._debtService.debt$.pipe((0,h.a)(this._unsubscribeAll)).subscribe(e=>{this._DebtListManagementComponent.matDrawer.open(),this.debt=e,this.DebtForm.patchValue(e,{emitEvent:!1}),this._changeDetectorRef.markForCheck()}),this.DebtForm.valueChanges.pipe((0,x.y)(e=>{this.debt=(0,gt.c)(this.debt,e)}),(0,Dt.o)(300),(0,h.a)(this._unsubscribeAll)).subscribe(e=>{this._debtService.updatedebt(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()}),this._router.events.pipe((0,h.a)(this._unsubscribeAll),(0,T.I)(e=>e instanceof m.MT)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngAfterViewInit(){this._DebtListManagementComponent.matDrawer.openedChange.pipe((0,h.a)(this._unsubscribeAll),(0,T.I)(e=>e)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._DebtListManagementComponent.matDrawer.close()}isOverdue(){return z.CS.fromISO(this.debt.dueDate.toString()).startOf("day")<z.CS.now().startOf("day")}deleteDebt(){this._fuseConfirmationService.open({title:"Delete Debt",message:"Are you sure you want to delete this Debt? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(o=>{if("confirmed"===o){const i=this.debt.id,s=this.Debts.findIndex(D=>D.id===i),u=1===this.Debts.length&&this.Debts[0].id===i?null:this.Debts[s+(s===this.Debts.length-1?-1:1)].id;this._debtService.deletedebt(i).subscribe(D=>{D&&this._router.navigate(u?["../",u]:["../"],{relativeTo:this._activatedRoute})}),this._changeDetectorRef.markForCheck()}})}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(m.gV),t.GI1(t.kD9),t.GI1(p.KE),t.GI1(vt.q),t.GI1(t.q87),t.GI1(m.E5),t.GI1(M),t.GI1(v),t.GI1(Ct.mc),t.GI1(t.y8U))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["debt-details"]],viewQuery:function(o,i){if(1&o&&t.CC$(yt,5),2&o){let s;t.wto(s=t.Gqi())&&(i._titleField=s.first)}},standalone:!0,features:[t.UHJ],decls:58,vars:31,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],["mat-button","",1,"pr-4","pl-3.5"],[1,"flex","items-center","justify-center"],[1,"ml-2","font-semibold"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","",3,"routerLink"],[1,"mt-6","mb-8"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"formControlName","spellcheck"],["titleField",""],[1,"flex","flex-wrap","items-center","mt-8"],[1,"ml-6"],[1,"font-medium"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer",3,"ngClass","click"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[4,"ngIf"],[1,"fuse-mat-dense","invisible","absolute","inset-0","-mt-2.5","opacity-0","pointer-events-none",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["dueDatePicker",""],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",1,"",3,"color"],[1,"mt-8"]],template:function(o,i){if(1&o){const s=t.KQA();t.I0R(0,"div",0)(1,"form",1)(2,"div",2)(3,"button",3)(4,"div",4)(5,"span",5),t.OEk(6,"Create Debt"),t.C$Y()()(),t.I0R(7,"div",6)(8,"button",7),t.wR5(9,"mat-icon",8),t.C$Y(),t.I0R(10,"mat-menu",null,9)(12,"button",10),t.qCj("click",function(){return i.deleteDebt()}),t.wR5(13,"mat-icon",8),t.I0R(14,"span"),t.OEk(15,"Delete"),t.C$Y()()(),t.I0R(16,"a",11),t.wR5(17,"mat-icon",8),t.C$Y()()(),t.wR5(18,"mat-divider",12),t.I0R(19,"div")(20,"mat-form-field",13)(21,"mat-label"),t.OEk(22,"Creditor"),t.C$Y(),t.wR5(23,"input",14,15),t.C$Y()(),t.I0R(25,"div")(26,"mat-form-field",13)(27,"mat-label"),t.OEk(28,"Debtor"),t.C$Y(),t.wR5(29,"input",14),t.C$Y()(),t.I0R(30,"div")(31,"mat-form-field",13)(32,"mat-label"),t.OEk(33," Repayment Method"),t.C$Y(),t.wR5(34,"input",14),t.C$Y()(),t.I0R(35,"div",16)(36,"div",17)(37,"div",18),t.OEk(38,"Due date"),t.C$Y(),t.I0R(39,"div",19),t.qCj("click",function(){t.usT(s);const u=t.Gew(47);return t.CGJ(u.open())}),t.wR5(40,"mat-icon",20),t.I0R(41,"span",21),t.yuY(42,xt,3,4,"ng-container",22)(43,It,2,0,"ng-container",22),t.C$Y(),t.I0R(44,"mat-form-field",23),t.wR5(45,"input",24),t.I0R(46,"mat-datepicker",null,25)(48,"mat-datepicker-actions")(49,"button",26),t.qCj("click",function(){return i.DebtForm.get("dueDate").setValue(null)}),t.OEk(50," Clear "),t.C$Y(),t.I0R(51,"button",27),t.OEk(52," Select "),t.C$Y()()()()()()(),t.I0R(53,"div",28)(54,"mat-form-field",13)(55,"mat-label"),t.OEk(56,"Description"),t.C$Y(),t.wR5(57,"textarea",14),t.C$Y()()()()}if(2&o){const s=t.Gew(11),l=t.Gew(47);t.yG2(),t.E7m("formGroup",i.DebtForm),t.yG2(7),t.E7m("matMenuTriggerFor",s),t.yG2(),t.E7m("svgIcon","heroicons_outline:ellipsis-vertical"),t.yG2(4),t.E7m("svgIcon","heroicons_outline:trash"),t.yG2(3),t.E7m("routerLink",t.q4q(26,Rt)),t.yG2(),t.E7m("svgIcon","heroicons_outline:x-mark"),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(3),t.E7m("formControlName","creditor")("spellcheck",!1),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(3),t.E7m("formControlName","debtor")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(3),t.E7m("formControlName","repaymentMethod")("spellcheck",!1),t.yG2(5),t.E7m("ngClass",t.uAc(27,kt,!i.debt.dueDate,i.debt.dueDate&&!i.isOverdue(),i.debt.dueDate&&i.isOverdue())),t.yG2(),t.E7m("svgIcon","heroicons_solid:calendar"),t.yG2(2),t.E7m("ngIf",i.debt.dueDate),t.yG2(),t.E7m("ngIf",!i.debt.dueDate),t.yG2(),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("formControlName","dueDate")("matDatepicker",l),t.yG2(6),t.E7m("color","primary"),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(3),t.E7m("formControlName","description")("spellcheck",!1)}},dependencies:[p.y,p.sz,p.ot,p.ue,p.u,p.sl,p.uW,p.Wo,f.oJ,f.Gw,f.cP,f.um,b.u_,g.oB,g.qL,c._A,c.aM,c.OQ,c.yG,m.ER,U.U,U.k,S.wb,S.Up,S.w5,B.cN,B.yi,L.Qn,L.aC,O.KE,pt.Vn,b.QF,C.iU,C.SU,C.Ul,C._C,C.o9,C.Y3,b.y],encapsulation:2,changeDetection:0})}return n})(),resolve:{debt:(n,r)=>{const e=(0,t.uUt)(v),o=(0,t.uUt)(m.E5);return e.getdebtById(n.paramMap.get("id")).pipe((0,ft.a)(i=>{console.error(i);const s=r.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(s),(0,A.c)(i)}))}},canDeactivate:[(n,r,e,o)=>{let i=o.root;for(;i.firstChild;)i=i.firstChild;return!!i.paramMap.get("id")||n.closeDrawer().then(()=>!0)}]}]}]}]}}]);