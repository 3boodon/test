"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[384],{7384:(ut,S,s)=>{s.r(S),s.d(S,{default:()=>st});var e=s(6568),v=s(9240),f=s(3848),k=s(2556),G=s(3328),d=s(324),y=s(9512),h=s(6300),w=s(8083),C=s(2523),T=s(6364),m=s(4332),R=s(6312),D=s(6820),g=s(8168),z=s(9124),$=s(8608),x=s(4320),u=s(4832),_=s(6272),p=s(6764),A=s(6936),U=s(6488),F=s(1952),K=s(5528);let I=(()=>{class i{constructor(t){this._httpClient=t,this._individual=new $.g(null),this._individuals=new $.g(null),this._countries=new $.g(null),this._tags=new $.g(null)}get individual$(){return this._individual.asObservable()}get individuals$(){return this._individuals.asObservable()}get countries$(){return this._countries.asObservable()}get tags$(){return this._tags.asObservable()}getIndividuals(){return this._httpClient.get("api/individuals/all").pipe((0,x.y)(t=>{this._individuals.next(t)}))}searchIndividuals(t){return this._httpClient.get("api/individuals/search",{params:{query:t}}).pipe((0,x.y)(n=>{this._individuals.next(n)}))}getIndividualById(t){return this._individuals.pipe((0,u.U)(1),(0,_.k)(n=>{const a=n.find(o=>o.id===t)||null;return this._individual.next(a),a}),(0,p.G)(n=>n?(0,U.of)(n):(0,A.c)("Could not found individual with id of "+t+"!")))}createIndividual(){return console.log(this.individuals$),this.individuals$.pipe((0,u.U)(1),(0,p.G)(t=>this._httpClient.post("api/individuals/individual",{}).pipe((0,_.k)(n=>(console.log(t),this._individuals.next([n,...t]),n)))))}updateIndividual(t,n){return this.individuals$.pipe((0,u.U)(1),(0,p.G)(a=>this._httpClient.patch("api/individuals/individual",{id:t,individual:n}).pipe((0,_.k)(o=>{const r=a.findIndex(c=>c.id===t);return a[r]=o,this._individuals.next(a),o}),(0,p.G)(o=>this.individual$.pipe((0,u.U)(1),(0,F.I)(r=>r&&r.id===t),(0,x.y)(()=>(this._individual.next(o),o)))))))}deleteIndividual(t){return this.individuals$.pipe((0,u.U)(1),(0,p.G)(n=>this._httpClient.delete("api/individuals/individual",{params:{id:t}}).pipe((0,_.k)(a=>{const o=n.findIndex(r=>r.id===t);return n.splice(o,1),this._individuals.next(n),a}))))}getCountries(){return this._httpClient.get("api/individuals/countries").pipe((0,x.y)(t=>{this._countries.next(t)}))}getTags(){return this._httpClient.get("api/individuals/tags").pipe((0,x.y)(t=>{this._tags.next(t)}))}createTag(t){return this.tags$.pipe((0,u.U)(1),(0,p.G)(n=>this._httpClient.post("api/individuals/tag",{tag:t}).pipe((0,_.k)(a=>(this._tags.next([...n,a]),a)))))}updateTag(t,n){return this.tags$.pipe((0,u.U)(1),(0,p.G)(a=>this._httpClient.patch("api/individuals/tag",{id:t,tag:n}).pipe((0,_.k)(o=>{const r=a.findIndex(c=>c.id===t);return a[r]=o,this._tags.next(a),o}))))}deleteTag(t){return this.tags$.pipe((0,u.U)(1),(0,p.G)(n=>this._httpClient.delete("api/individuals/tag",{params:{id:t}}).pipe((0,_.k)(a=>{const o=n.findIndex(r=>r.id===t);return n.splice(o,1),this._tags.next(n),a}),(0,F.I)(a=>a),(0,p.G)(a=>this.individuals$.pipe((0,u.U)(1),(0,_.k)(o=>(o.forEach(r=>{const c=r.tags.findIndex(b=>b===t);c>-1&&r.tags.splice(c,1)}),a)))))))}uploadAvatar(t,n){return this.individuals$.pipe((0,u.U)(1),(0,p.G)(a=>this._httpClient.post("api/individuals/avatar",{id:t,avatar:n},{headers:{"Content-Type":n.type}}).pipe((0,_.k)(o=>{const r=a.findIndex(c=>c.id===t);return a[r]=o,this._individuals.next(a),o}),(0,p.G)(o=>this.individual$.pipe((0,u.U)(1),(0,F.I)(r=>r&&r.id===t),(0,x.y)(()=>(this._individual.next(o),o)))))))}static#e=this.\u0275fac=function(n){return new(n||i)(e.CoB(K.KK))};static#t=this.\u0275prov=e.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Q=s(988),E=s(7804);function L(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"mat-option",22)(2,"div",23),e.OEk(3),e.C$Y()(),e.k70()),2&i){const t=l.$implicit;e.yG2(),e.E7m("value",t.value),e.yG2(2),e.cNF(t.label)}}function J(i,l){1&i&&(e.I0R(0,"th",24),e.OEk(1,"Full Name"),e.C$Y())}function V(i,l){if(1&i&&(e.I0R(0,"td",25),e.OEk(1),e.C$Y()),2&i){const t=l.$implicit;e.yG2(),e.oRS(" ",t.name," ")}}function H(i,l){1&i&&(e.I0R(0,"th",24),e.OEk(1,"Phone Number"),e.C$Y())}function q(i,l){if(1&i&&(e.I0R(0,"span",27),e.OEk(1),e.C$Y()),2&i){const t=l.$implicit;e.yG2(),e.CAO(" ",t.label,": ",t.phoneNumber," ")}}function X(i,l){if(1&i&&(e.I0R(0,"td",25),e.yuY(1,q,2,2,"span",26),e.C$Y()),2&i){const t=l.$implicit;e.yG2(),e.E7m("ngForOf",t.phoneNumbers)}}function W(i,l){1&i&&(e.I0R(0,"th",24),e.OEk(1,"BirthDate"),e.C$Y())}function Z(i,l){if(1&i&&(e.I0R(0,"td",25)(1,"span",28)(2,"span",29),e.OEk(3),e.wVc(4,"date"),e.C$Y()()()),2&i){const t=l.$implicit;e.yG2(3),e.cNF(e.g7$(4,1,t.birthday,"yyyy/MM/dd"))}}function ee(i,l){1&i&&(e.I0R(0,"th",24),e.OEk(1,"Address"),e.C$Y())}function te(i,l){if(1&i&&(e.I0R(0,"td",25),e.OEk(1),e.C$Y()),2&i){const t=l.$implicit;e.yG2(),e.oRS(" ",t.address," ")}}function ie(i,l){1&i&&(e.I0R(0,"th",24),e.OEk(1,"Title"),e.C$Y())}function ne(i,l){if(1&i&&(e.I0R(0,"td",25),e.OEk(1),e.C$Y()),2&i){const t=l.$implicit;e.yG2(),e.oRS(" ",t.title," ")}}function ae(i,l){1&i&&e.wR5(0,"tr",30)}function oe(i,l){if(1&i){const t=e.KQA();e.I0R(0,"tr",31),e.qCj("click",function(){const o=e.usT(t).$implicit,r=e.GaO();return e.CGJ(r.clickedRows(o))}),e.C$Y()}}const le=()=>[5,10,15,20];let re=(()=>{class i{ngAfterViewInit(){this.data.paginator=this.paginator}constructor(t,n,a,o,r,c){this._matDialog=t,this._individualService=n,this._familyTreeServeice=a,this._router=o,this._activatedRoute=r,this._changeDetectorRef=c,this.displayedColumns=["name","emails","birthday","address","title"],this.gender="before",this._unsubscribeAll=new D.E,this.dataSource=new d._c,this.dataSources=new d._c}ngOnInit(){this._familyTreeServeice.getFamilyMembers().pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.dataSource=new d._c(t),this.dataSource.paginator=this.paginator,this.data=t}),this._individualService.getIndividuals().pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.dataSources=new d._c(t),this.data=t,this.dataSources.paginator=this.paginator}),this.roles=[{label:"Newest",value:"newest"},{label:"Deadline",value:"deadline"}]}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}clickedRows(t){this._router.navigate(["./",t.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(t,n){return n.id||t}static#e=this.\u0275fac=function(n){return new(n||i)(e.GI1(z.qW),e.GI1(I),e.GI1(Q.c),e.GI1(v.E5),e.GI1(v.gV),e.GI1(e.kD9))};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-table"]],viewQuery:function(n,a){if(1&n&&e.CC$(G.Qb,5),2&n){let o;e.wto(o=e.Gqi())&&(a.paginator=o.first)}},standalone:!0,features:[e.UHJ],decls:35,vars:12,consts:[[1,"flex","flex-col","flex-auto","p-4"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","justify-between"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"fuse-mat-dense","w-40","shadow-none","relaionships-border-none-mate-select",3,"subscriptSizing"],["disableOptionCentering","",3,"panelClass","value"],["roleSelect","matSelect"],[1,"text-md"],[1,"ml-1","font-medium"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emails"],["matColumnDef","birthday"],["matColumnDef","address"],["matColumnDef","title"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[1,"h-auto","py-4","leading-none",3,"value"],[1,"font-medium"],["mat-header-cell",""],["mat-cell",""],["class","m-1 block w-max",4,"ngFor","ngForOf"],[1,"m-1","block","w-max"],[1,"flex","items-center"],[1,"ml-3","leading-4"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,a){if(1&n&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.OEk(4," All Members "),e.C$Y(),e.I0R(5,"mat-form-field",4)(6,"mat-select",5,6)(8,"mat-select-trigger",7)(9,"span"),e.OEk(10,"Short by:"),e.C$Y(),e.I0R(11,"span",8),e.OEk(12),e.wVc(13,"titlecase"),e.C$Y()(),e.yuY(14,L,4,2,"ng-container",9),e.C$Y()()(),e.I0R(15,"div",10)(16,"table",11),e.SAx(17,12),e.yuY(18,J,2,0,"th",13)(19,V,2,1,"td",14),e.k70(),e.SAx(20,15),e.yuY(21,H,2,0,"th",13)(22,X,2,1,"td",14),e.k70(),e.SAx(23,16),e.yuY(24,W,2,0,"th",13)(25,Z,5,4,"td",14),e.k70(),e.SAx(26,17),e.yuY(27,ee,2,0,"th",13)(28,te,2,1,"td",14),e.k70(),e.SAx(29,18),e.yuY(30,ie,2,0,"th",13)(31,ne,2,1,"td",14),e.k70(),e.yuY(32,ae,1,0,"tr",19)(33,oe,1,0,"tr",20),e.C$Y(),e.wR5(34,"mat-paginator",21),e.C$Y()()()),2&n){const o=e.Gew(7);e.yG2(5),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("panelClass","w-72 min-w-72 max-w-72 h-auto max-h-none")("value","newest"),e.yG2(6),e.cNF(e.kDX(13,9,o.value)),e.yG2(2),e.E7m("ngForOf",a.roles),e.yG2(2),e.E7m("dataSource",a.dataSources),e.yG2(16),e.E7m("matHeaderRowDef",a.displayedColumns),e.yG2(),e.E7m("matRowDefColumns",a.displayedColumns),e.yG2(),e.E7m("pageSizeOptions",e.q4q(11,le))}},dependencies:[d.If,d.wL,d.ie,d.aG,d.Af,d.uc,d.gx,d.qC,d.cX,d.yC,d._I,f.oL,f.Iw,R.sb,m.y,w.cN,h.Up,T.KO,k.oB,h.wb,y.oJ,C.d5,C.kX,C.gl,E.I5,G.w5,G.Qb,f.y],styles:[".demo-table{width:100%}.mat-mdc-row .mat-mdc-cell{cursor:pointer;border:none}.mat-mdc-row:hover .mat-mdc-cell{background-color:#f5f5f5;border-color:currentColor}.demo-row-is-clicked{font-weight:700!important}\n"],encapsulation:2,changeDetection:0})}return i})();var O=s(6524),se=s(5836);const ce=["matDrawer"];function de(i,l){if(1&i&&(e.SAx(0),e.OEk(1),e.k70()),2&i){const t=e.GaO();e.yG2(),e.oRS(" ",t.individualsCount," ")}}const me=()=>({"=0":"No Individual","=1":"Individual",other:"Individual"});let N=(()=>{class i{ngAfterViewInit(){this.dataSource.paginator=this.paginator}constructor(t,n,a,o,r){this._individualService=t,this._router=n,this._activatedRoute=a,this._changeDetectorRef=o,this._fuseMediaWatcherService=r,this.displayedColumns=["fullName","mother","father","childrenMale","childrenFemale","spouse","grandpa"],this.dataSource=new d._c,this.position="before",this.drawerMode="over",this._unsubscribeAll=new D.E}ngOnInit(){this.individual$=this._individualService.individuals$,this._individualService.individuals$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.individualsCount=t.length,this._changeDetectorRef.markForCheck()}),this._individualService.individual$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.selectedIndividual=t,this._changeDetectorRef.markForCheck()}),this._individualService.countries$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this.matDrawer.openedChange.subscribe(t=>{t||this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.drawerMode=(t.includes("lg"),"over"),this._changeDetectorRef.markForCheck()}),this.roles=[{label:"Newest",value:"newest"},{label:"Deadline",value:"deadline"}]}trackByFn(t,n){return n.id||t}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createFamilyMember(){this._individualService.createIndividual().subscribe(t=>{this._router.navigate(["./",t.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(n){return new(n||i)(e.GI1(I),e.GI1(v.E5),e.GI1(v.gV),e.GI1(e.kD9),e.GI1(se.E))};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-individual"]],viewQuery:function(n,a){if(1&n&&(e.CC$(ce,7),e.CC$(G.Qb,5)),2&n){let o;e.wto(o=e.Gqi())&&(a.matDrawer=o.first),e.wto(o=e.Gqi())&&(a.paginator=o.first)}},standalone:!0,features:[e.UHJ],decls:40,vars:17,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","h-full","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-128","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8","sm:my-12"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"matMenuTriggerFor","color"],["moreMenu","matMenu"],["mat-menu-item",""],[3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6"]],template:function(n,a){if(1&n&&(e.I0R(0,"div",0)(1,"mat-drawer-container",1),e.qCj("backdropClick",function(){return a.onBackdropClicked()}),e.I0R(2,"mat-drawer",2,3),e.wR5(4,"router-outlet"),e.C$Y(),e.I0R(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),e.SAx(12),e.I0R(13,"div",11),e.OEk(14," Principal individuals "),e.C$Y(),e.I0R(15,"div",12),e.yuY(16,de,2,1,"ng-container",13),e.OEk(17),e.wVc(18,"i18nPlural"),e.C$Y(),e.k70(),e.C$Y()(),e.I0R(19,"div",14)(20,"button",15),e.qCj("click",function(){return a.createFamilyMember()}),e.wR5(21,"mat-icon",16),e.I0R(22,"span",17),e.OEk(23,"Add Individual"),e.C$Y()(),e.I0R(24,"button",18),e.wR5(25,"mat-icon",16),e.I0R(26,"span",17),e.OEk(27,"Export"),e.C$Y()(),e.I0R(28,"mat-menu",null,19)(30,"button",20),e.wR5(31,"mat-icon",21),e.I0R(32,"span"),e.OEk(33,"as PDF"),e.C$Y()(),e.I0R(34,"button",20),e.wR5(35,"mat-icon",21),e.I0R(36,"span"),e.OEk(37,"as XLS"),e.C$Y()()()()()()()(),e.I0R(38,"div",22),e.wR5(39,"app-table"),e.C$Y()()()()),2&n){const o=e.Gew(29);e.yG2(2),e.E7m("mode",a.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.yG2(14),e.E7m("ngIf",a.individualsCount>0),e.yG2(),e.oRS(" ",e.g7$(18,13,a.individualsCount,e.q4q(16,me))," "),e.yG2(3),e.E7m("color","primary"),e.yG2(),e.E7m("svgIcon","heroicons_outline:plus"),e.yG2(3),e.E7m("matMenuTriggerFor",o)("color","primary"),e.yG2(),e.E7m("svgIcon","heroicons_solid:arrow-up-tray"),e.yG2(6),e.E7m("svgIcon","heroicons_outline:document-text"),e.yG2(4),e.E7m("svgIcon","heroicons_outline:document-text")}},dependencies:[d.If,re,f.u_,R.sb,R.Iz,R.G4,R.q0,m.y,G.w5,w.cN,T.KO,k.oB,k.qL,v.cP,h.wb,y.oJ,y.Gw,C.d5,f.od,O._A,O.aM,O.OQ,O.yG],encapsulation:2,changeDetection:0})}return i})();var ue=s(9696),B=s(6924),M=s(7280),Y=s(568),pe=s(7740),ge=s(8616),ve=s(4864),fe=s(4248);const _e=["avatarFileInput"],he=["tagsPanel"],ye=["tagsPanelOrigin"];function Ce(i,l){if(1&i&&(e.SAx(0),e.wR5(1,"img",48),e.k70()),2&i){const t=e.GaO(2);e.yG2(),e.E7m("src",t.individual.background,e.K6U)}}function Ie(i,l){if(1&i&&e.wR5(0,"img",49),2&i){const t=e.GaO(2);e.E7m("src",t.individual.avatar,e.K6U)}}function be(i,l){if(1&i&&(e.I0R(0,"div",50),e.OEk(1),e.C$Y()),2&i){const t=e.GaO(2);e.yG2(),e.oRS(" ",t.individual.name.charAt(0)," ")}}function xe(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",52)(2,"span",53),e.OEk(3),e.C$Y()(),e.k70()),2&i){const t=l.$implicit;e.yG2(3),e.cNF(t.title)}}function ke(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",51),e.yuY(2,xe,4,1,"ng-container",29),e.wVc(3,"fuseFindByKey"),e.C$Y(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("ngForOf",e.I7O(3,2,t.individual.tags,"id",t.tags))("ngForTrackBy",t.trackByFn)}}function Ge(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",54),e.wR5(2,"mat-icon",55),e.I0R(3,"div",56),e.OEk(4),e.C$Y()(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:briefcase"),e.yG2(2),e.oRS(" ",t.individual.title," ")}}function Re(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",54),e.wR5(2,"mat-icon",55),e.I0R(3,"div",56),e.OEk(4),e.C$Y()(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:building-office-2"),e.yG2(2),e.oRS(" ",t.individual.company," ")}}function Ee(i,l){if(1&i&&(e.I0R(0,"div",62)(1,"span",63),e.OEk(2,"\u2022"),e.C$Y(),e.I0R(3,"span",64),e.OEk(4),e.C$Y()()),2&i){const t=e.GaO().$implicit;e.yG2(4),e.cNF(t.label)}}function we(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",59)(2,"a",60),e.OEk(3),e.C$Y(),e.yuY(4,Ee,5,1,"div",61),e.C$Y(),e.k70()),2&i){const t=l.$implicit;e.yG2(2),e.E7m("href","mailto:"+t.email,e.K6U),e.yG2(),e.oRS(" ",t.email," "),e.yG2(),e.E7m("ngIf",t.label)}}function Te(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",57),e.wR5(2,"mat-icon",55),e.I0R(3,"div",58),e.yuY(4,we,5,3,"ng-container",29),e.C$Y()(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:envelope"),e.yG2(2),e.E7m("ngForOf",t.individual.emails)("ngForTrackBy",t.trackByFn)}}function $e(i,l){if(1&i&&(e.I0R(0,"div",62)(1,"span",63),e.OEk(2,"\u2022"),e.C$Y(),e.I0R(3,"span",64),e.OEk(4),e.C$Y()()),2&i){const t=e.GaO().$implicit;e.yG2(4),e.cNF(t.label)}}function Oe(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",59),e.wR5(2,"div",65),e.I0R(3,"div",66),e.OEk(4),e.C$Y(),e.I0R(5,"div",67),e.OEk(6),e.C$Y(),e.yuY(7,$e,5,1,"div",61),e.C$Y(),e.k70()),2&i){const t=l.$implicit,n=e.GaO(3);e.yG2(2),e.m4B("background","url('/assets/images/apps/individuals/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",n.getCountryByIso(t.country).flagImagePos),e.E7m("matTooltip",n.getCountryByIso(t.country).name),e.yG2(2),e.oRS(" ",n.getCountryByIso(t.country).code," "),e.yG2(2),e.oRS(" ",t.phoneNumber," "),e.yG2(),e.E7m("ngIf",t.label)}}function Ye(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",57),e.wR5(2,"mat-icon",55),e.I0R(3,"div",58),e.yuY(4,Oe,8,10,"ng-container",29),e.C$Y()(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:phone"),e.yG2(2),e.E7m("ngForOf",t.individual.phoneNumbers)("ngForTrackBy",t.trackByFn)}}function De(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",54),e.wR5(2,"mat-icon",55),e.I0R(3,"div",56),e.OEk(4),e.C$Y()(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:map-pin"),e.yG2(2),e.oRS(" ",t.individual.address," ")}}function Fe(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",54),e.wR5(2,"mat-icon",55),e.I0R(3,"div",56),e.OEk(4),e.wVc(5,"date"),e.C$Y()(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:cake"),e.yG2(2),e.oRS(" ",e.g7$(5,2,t.individual.birthday,"longDate")," ")}}function Se(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",57),e.wR5(2,"mat-icon",55)(3,"div",68),e.C$Y(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("svgIcon","heroicons_outline:bars-3-bottom-left"),e.yG2(),e.E7m("innerHTML",t.individual.notes,e.E3n)}}const P=()=>["../"];function Ae(i,l){if(1&i){const t=e.KQA();e.SAx(0),e.I0R(1,"div",2),e.yuY(2,Ce,2,1,"ng-container",1),e.I0R(3,"div",3)(4,"a",4),e.wR5(5,"mat-icon",5),e.C$Y()()(),e.I0R(6,"div",41)(7,"div",7)(8,"div",9)(9,"div",42),e.yuY(10,Ie,1,1,"img",17)(11,be,2,1,"div",18),e.C$Y(),e.I0R(12,"div",43)(13,"button",44),e.qCj("click",function(){e.usT(t);const a=e.GaO();return e.CGJ(a.toggleEditMode(!0))}),e.wR5(14,"mat-icon",31),e.I0R(15,"span",45),e.OEk(16,"Edit"),e.C$Y()()()(),e.I0R(17,"div",46),e.OEk(18),e.C$Y(),e.yuY(19,ke,4,6,"ng-container",1),e.I0R(20,"div",47),e.yuY(21,Ge,5,2,"ng-container",1)(22,Re,5,2,"ng-container",1)(23,Te,5,3,"ng-container",1)(24,Ye,5,3,"ng-container",1)(25,De,5,2,"ng-container",1)(26,Fe,6,5,"ng-container",1)(27,Se,4,2,"ng-container",1),e.C$Y()()(),e.k70()}if(2&i){const t=e.GaO();e.yG2(2),e.E7m("ngIf",t.individual.background),e.yG2(2),e.E7m("matTooltip","Close")("routerLink",e.q4q(16,P)),e.yG2(),e.E7m("svgIcon","heroicons_outline:x-mark"),e.yG2(5),e.E7m("ngIf",t.individual.avatar),e.yG2(),e.E7m("ngIf",!t.individual.avatar),e.yG2(3),e.E7m("svgIcon","heroicons_solid:pencil-square"),e.yG2(4),e.oRS(" ",t.individual.name," "),e.yG2(),e.E7m("ngIf",t.individual.tags.length),e.yG2(2),e.E7m("ngIf",t.individual.title),e.yG2(),e.E7m("ngIf",t.individual.company),e.yG2(),e.E7m("ngIf",t.individual.emails.length),e.yG2(),e.E7m("ngIf",t.individual.phoneNumbers.length),e.yG2(),e.E7m("ngIf",t.individual.address),e.yG2(),e.E7m("ngIf",t.individual.birthday),e.yG2(),e.E7m("ngIf",t.individual.notes)}}function Ne(i,l){if(1&i&&e.wR5(0,"img",49),2&i){const t=e.GaO();e.E7m("src",t.individual.avatar,e.K6U)}}function Be(i,l){if(1&i&&(e.I0R(0,"div",50),e.OEk(1),e.C$Y()),2&i){const t=e.GaO();e.yG2(),e.oRS(" ",t.individual.name.charAt(0)," ")}}function Me(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",69)(2,"span",70),e.OEk(3),e.C$Y()(),e.k70()),2&i){const t=l.$implicit;e.yG2(3),e.cNF(t.title)}}function Pe(i,l){if(1&i&&(e.SAx(0),e.yuY(1,Me,4,1,"ng-container",29),e.wVc(2,"fuseFindByKey"),e.k70()),2&i){const t=e.GaO();e.yG2(),e.E7m("ngForOf",e.I7O(2,2,t.individual.tags,"id",t.tags))("ngForTrackBy",t.trackByFn)}}function je(i,l){1&i&&(e.SAx(0),e.wR5(1,"mat-icon",31),e.I0R(2,"span",71),e.OEk(3,"Edit"),e.C$Y(),e.k70()),2&i&&(e.yG2(),e.E7m("svgIcon","heroicons_solid:pencil-square"))}function ze(i,l){1&i&&(e.SAx(0),e.wR5(1,"mat-icon",31),e.I0R(2,"span",71),e.OEk(3,"Add"),e.C$Y(),e.k70()),2&i&&(e.yG2(),e.E7m("svgIcon","heroicons_solid:plus-circle"))}function Ue(i,l){1&i&&e.wR5(0,"mat-icon",31),2&i&&e.E7m("svgIcon","heroicons_solid:pencil-square")}function Ke(i,l){1&i&&e.wR5(0,"mat-icon",31),2&i&&e.E7m("svgIcon","heroicons_solid:check")}function Qe(i,l){if(1&i){const t=e.KQA();e.SAx(0),e.I0R(1,"div",81),e.qCj("click",function(){const o=e.usT(t).$implicit,r=e.GaO(3);return e.CGJ(r.toggleIndividualTag(o))}),e.wR5(2,"mat-checkbox",82),e.I0R(3,"div"),e.OEk(4),e.C$Y()(),e.k70()}if(2&i){const t=l.$implicit,n=e.GaO(3);e.yG2(2),e.E7m("checked",n.individual.tags.includes(t.id))("color","primary")("disableRipple",!0),e.yG2(2),e.cNF(t.title)}}function Le(i,l){if(1&i&&(e.SAx(0),e.yuY(1,Qe,5,4,"ng-container",29),e.k70()),2&i){const t=e.GaO(2);e.yG2(),e.E7m("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function Je(i,l){if(1&i){const t=e.KQA();e.SAx(0),e.I0R(1,"div",74)(2,"mat-form-field",84)(3,"input",85),e.qCj("input",function(a){const r=e.usT(t).$implicit,c=e.GaO(3);return e.CGJ(c.updateTagTitle(r,a))}),e.C$Y(),e.I0R(4,"button",86),e.qCj("click",function(){const o=e.usT(t).$implicit,r=e.GaO(3);return e.CGJ(r.deleteTag(o))}),e.wR5(5,"mat-icon",87),e.C$Y()()(),e.k70()}if(2&i){const t=l.$implicit;e.yG2(2),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("value",t.title),e.yG2(2),e.E7m("svgIcon","heroicons_solid:trash")}}function Ve(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",83),e.yuY(2,Je,6,3,"ng-container",29),e.C$Y(),e.k70()),2&i){const t=e.GaO(2);e.yG2(2),e.E7m("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function He(i,l){if(1&i){const t=e.KQA();e.I0R(0,"div",88),e.qCj("click",function(){e.usT(t),e.GaO();const a=e.Gew(6);return e.GaO().createTag(a.value),e.CGJ(a.value="")}),e.wR5(1,"mat-icon",89),e.I0R(2,"div",90),e.OEk(3,' Create "'),e.I0R(4,"b"),e.OEk(5),e.C$Y(),e.OEk(6,'" '),e.C$Y()()}if(2&i){e.GaO();const t=e.Gew(6);e.yG2(),e.E7m("svgIcon","heroicons_solid:plus-circle"),e.yG2(4),e.cNF(t.value)}}function qe(i,l){if(1&i){const t=e.KQA();e.I0R(0,"div",72)(1,"div",73)(2,"div",74),e.wR5(3,"mat-icon",31),e.I0R(4,"div",45)(5,"input",75,76),e.qCj("input",function(a){e.usT(t);const o=e.GaO();return e.CGJ(o.filterTags(a))})("keydown",function(a){e.usT(t);const o=e.GaO();return e.CGJ(o.filterTagsInputKeyDown(a))}),e.C$Y()()(),e.I0R(7,"button",77),e.qCj("click",function(){e.usT(t);const a=e.GaO();return e.CGJ(a.toggleTagsEditMode())}),e.yuY(8,Ue,1,1,"mat-icon",78)(9,Ke,1,1,"mat-icon",78),e.C$Y()(),e.I0R(10,"div",79),e.yuY(11,Le,2,2,"ng-container",1)(12,Ve,3,2,"ng-container",1)(13,He,7,2,"div",80),e.C$Y()()}if(2&i){const t=e.Gew(6),n=e.GaO();e.yG2(3),e.E7m("svgIcon","heroicons_solid:magnifying-glass"),e.yG2(2),e.E7m("maxLength",30),e.yG2(3),e.E7m("ngIf",!n.tagsEditMode),e.yG2(),e.E7m("ngIf",n.tagsEditMode),e.yG2(2),e.E7m("ngIf",!n.tagsEditMode),e.yG2(),e.E7m("ngIf",n.tagsEditMode),e.yG2(),e.E7m("ngIf",n.shouldShowCreateTagButton(t.value))}}function Xe(i,l){1&i&&(e.I0R(0,"mat-label"),e.OEk(1,"Email"),e.C$Y())}function We(i,l){1&i&&(e.I0R(0,"mat-label"),e.OEk(1,"Label"),e.C$Y())}const j=i=>({"mt-6":i});function Ze(i,l){if(1&i){const t=e.KQA();e.SAx(0),e.I0R(1,"div",95)(2,"button",96),e.qCj("click",function(){e.usT(t);const a=e.GaO().index,o=e.GaO();return e.CGJ(o.removeEmailField(a))}),e.wR5(3,"mat-icon",31),e.C$Y()(),e.k70()}if(2&i){const t=e.GaO().first;e.yG2(),e.E7m("ngClass",e.S45(2,j,t)),e.yG2(2),e.E7m("svgIcon","heroicons_solid:trash")}}function et(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",57)(2,"mat-form-field",91),e.yuY(3,Xe,2,0,"mat-label",1),e.wR5(4,"mat-icon",21)(5,"input",92),e.C$Y(),e.I0R(6,"mat-form-field",93),e.yuY(7,We,2,0,"mat-label",1),e.wR5(8,"mat-icon",21)(9,"input",94),e.C$Y(),e.yuY(10,Ze,4,4,"ng-container",1),e.C$Y(),e.k70()),2&i){const t=l.$implicit,n=l.first,a=l.last;e.yG2(2),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("ngIf",n),e.yG2(),e.E7m("svgIcon","heroicons_solid:envelope"),e.yG2(),e.E7m("formControl",t.get("email"))("placeholder","Email address")("spellcheck",!1),e.yG2(),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("ngIf",n),e.yG2(),e.E7m("svgIcon","heroicons_solid:tag"),e.yG2(),e.E7m("formControl",t.get("label"))("placeholder","Label"),e.yG2(),e.E7m("ngIf",!(n&&a))}}function tt(i,l){1&i&&(e.I0R(0,"mat-label"),e.OEk(1,"Phone"),e.C$Y())}function it(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"mat-option",101)(2,"span",74),e.wR5(3,"span",102),e.I0R(4,"span",45),e.OEk(5),e.C$Y(),e.I0R(6,"span",103),e.OEk(7),e.C$Y()()(),e.k70()),2&i){const t=l.$implicit;e.yG2(),e.E7m("value",t.iso),e.yG2(2),e.m4B("background","url('/assets/images/countries/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",t.flagImagePos),e.yG2(2),e.cNF(t.name),e.yG2(2),e.cNF(t.code)}}function nt(i,l){1&i&&(e.I0R(0,"mat-label"),e.OEk(1,"Label"),e.C$Y())}function at(i,l){if(1&i){const t=e.KQA();e.SAx(0),e.I0R(1,"div",95)(2,"button",96),e.qCj("click",function(){e.usT(t);const a=e.GaO().index,o=e.GaO();return e.CGJ(o.removePhoneNumberField(a))}),e.wR5(3,"mat-icon",31),e.C$Y()(),e.k70()}if(2&i){const t=e.GaO().first;e.yG2(),e.E7m("ngClass",e.S45(2,j,t)),e.yG2(2),e.E7m("svgIcon","heroicons_solid:trash")}}function ot(i,l){if(1&i&&(e.SAx(0),e.I0R(1,"div",97)(2,"mat-form-field",91),e.yuY(3,tt,2,0,"mat-label",1),e.wR5(4,"input",94),e.I0R(5,"mat-select",98)(6,"mat-select-trigger")(7,"span",74),e.wR5(8,"span",99),e.I0R(9,"span",100),e.OEk(10),e.C$Y()()(),e.yuY(11,it,8,9,"ng-container",29),e.C$Y()(),e.I0R(12,"mat-form-field",93),e.yuY(13,nt,2,0,"mat-label",1),e.wR5(14,"mat-icon",21)(15,"input",94),e.C$Y(),e.yuY(16,at,4,4,"ng-container",1),e.C$Y(),e.k70()),2&i){const t=l.$implicit,n=l.first,a=l.last,o=e.GaO();e.yG2(2),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("ngIf",n),e.yG2(),e.E7m("formControl",t.get("phoneNumber"))("placeholder","Phone"),e.yG2(),e.E7m("formControl",t.get("country")),e.yG2(3),e.m4B("background","url('/assets/images/countries/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",o.getCountryByIso(t.get("country").value).flagImagePos),e.yG2(2),e.cNF(o.getCountryByIso(t.get("country").value).code),e.yG2(),e.E7m("ngForOf",o.countries)("ngForTrackBy",o.trackByFn),e.yG2(),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("ngIf",n),e.yG2(),e.E7m("svgIcon","heroicons_solid:tag"),e.yG2(),e.E7m("formControl",t.get("label"))("placeholder","Label"),e.yG2(),e.E7m("ngIf",!(n&&a))}}let lt=(()=>{class i{constructor(t,n,a,o,r,c,b,ct,dt,mt){this._activatedRoute=t,this._changeDetectorRef=n,this._individualComponent=a,this._individualService=o,this._formBuilder=r,this._fuseConfirmationService=c,this._renderer2=b,this._router=ct,this._overlay=dt,this._viewContainerRef=mt,this.editMode=!0,this.tagsEditMode=!1,this._unsubscribeAll=new D.E}ngOnInit(){this._individualComponent.matDrawer.open(),this.individualForm=this._formBuilder.group({id:[""],avatar:[null],name:["",[m.AQ.required]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),title:[""],company:[""],birthday:[null],address:[null],notes:[null],tags:[[]]}),this._individualService.individuals$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.individuals=t,this._changeDetectorRef.markForCheck()}),this._individualService.individual$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this._individualComponent.matDrawer.open(),this.individual=t,this.individualForm.get("emails").clear(),this.individualForm.get("phoneNumbers").clear(),this.individualForm.patchValue(t);const n=[];t.emails.length>0?t.emails.forEach(o=>{n.push(this._formBuilder.group({email:[o.email],label:[o.label]}))}):n.push(this._formBuilder.group({email:[""],label:[""]})),n.forEach(o=>{this.individualForm.get("emails").push(o)});const a=[];t.phoneNumbers.length>0?t.phoneNumbers.forEach(o=>{a.push(this._formBuilder.group({country:[o.country],phoneNumber:[o.phoneNumber],label:[o.label]}))}):a.push(this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]})),a.forEach(o=>{this.individualForm.get("phoneNumbers").push(o)}),this._changeDetectorRef.markForCheck()}),this._individualService.countries$.pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this.editMode=!1,this._individualService.getTags().pipe((0,g.a)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}closeDrawer(){return this._individualComponent.matDrawer.close()}toggleEditMode(t=null){this.closeDrawer()}updateIndividual(){const t=this.individualForm.getRawValue();t.emails=t.emails.filter(n=>n.email),t.phoneNumbers=t.phoneNumbers.filter(n=>n.phoneNumber),this._individualService.updateIndividual(t.id,t).subscribe(()=>{this.closeDrawer()})}deleteIndividual(){this._fuseConfirmationService.open({title:"Delete individual",message:"Are you sure you want to delete this individual? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(n=>{if("confirmed"===n){const a=this.individual.id,o=this.individuals.findIndex(b=>b.id===a),c=1===this.individuals.length&&this.individuals[0].id===a?null:this.individuals[o+(o===this.individuals.length-1?-1:1)].id;this._individualService.deleteIndividual(a).subscribe(b=>{b&&(this._router.navigate(c?["../",c]:["../"],{relativeTo:this._activatedRoute}),this.toggleEditMode(!1))}),this._changeDetectorRef.markForCheck()}})}uploadAvatar(t){if(!t.length)return;const a=t[0];["image/jpeg","image/png"].includes(a.type)&&this._individualService.uploadAvatar(this.individual.id,a).subscribe()}removeAvatar(){this.individualForm.get("avatar").setValue(null),this._avatarFileInput.nativeElement.value=null,this.individual.avatar=null}openTagsPanel(){this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(()=>{this._renderer2.addClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});const t=new ue.CC(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(t),this._tagsPanelOverlayRef.backdropClick().subscribe(()=>{this._renderer2.removeClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.hasAttached()&&(this._tagsPanelOverlayRef.detach(),this.filteredTags=this.tags,this.tagsEditMode=!1),t&&t.isAttached&&t.detach()})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const n=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(a=>a.title.toLowerCase().includes(n))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const n=this.filteredTags[0];this.individual.tags.find(o=>o===n.id)?this.removeTagFromIndividual(n):this.addTagToIndividual(n)}createTag(t){this._individualService.createTag({title:t}).subscribe(a=>{this.addTagToIndividual(a)})}updateTagTitle(t,n){t.title=n.target.value,this._individualService.updateTag(t.id,t).pipe((0,ge.o)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._individualService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToIndividual(t){this.individual.tags.unshift(t.id),this.individualForm.get("tags").patchValue(this.individual.tags),this._changeDetectorRef.markForCheck()}removeTagFromIndividual(t){this.individual.tags.splice(this.individual.tags.findIndex(n=>n===t.id),1),this.individualForm.get("tags").patchValue(this.individual.tags),this._changeDetectorRef.markForCheck()}toggleIndividualTag(t){this.individual.tags.includes(t.id)?this.removeTagFromIndividual(t):this.addTagToIndividual(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(n=>n.title.toLowerCase()===t.toLowerCase())>-1)}addEmailField(){const t=this._formBuilder.group({email:[""],label:[""]});this.individualForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.individualForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]});this.individualForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.individualForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}getCountryByIso(t){return this.countries.find(n=>n.iso===t)}trackByFn(t,n){return n.id||t}static#e=this.\u0275fac=function(n){return new(n||i)(e.GI1(v.gV),e.GI1(e.kD9),e.GI1(N),e.GI1(I),e.GI1(m.KE),e.GI1(ve.q),e.GI1(e.q87),e.GI1(v.E5),e.GI1(fe.mc),e.GI1(e.y8U))};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["individual-detail"]],viewQuery:function(n,a){if(1&n&&(e.CC$(_e,5),e.CC$(he,5),e.CC$(ye,5)),2&n){let o;e.wto(o=e.Gqi())&&(a._avatarFileInput=o.first),e.wto(o=e.Gqi())&&(a._tagsPanel=o.first),e.wto(o=e.Gqi())&&(a._tagsPanelOrigin=o.first)}},standalone:!0,features:[e.UHJ],decls:91,vars:56,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[1,"w-full","max-w-3xl"],[3,"formGroup"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"mt-8"],[1,"w-full",3,"subscriptSizing"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"formControlName","placeholder","spellcheck"],[1,"flex","flex-wrap","items-center","-m-1.5","mt-6"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","cursor-pointer","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700",3,"click"],["tagsPanelOrigin",""],["tagsPanel",""],["matInput","",3,"formControlName","placeholder"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4","rounded","cursor-pointer",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["birthdayDatepicker",""],["matInput","","cdkTextareaAutosize","",3,"formControlName","placeholder","rows","spellcheck"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","click"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","flex-wrap","items-center","mt-2"],[1,"flex","items-center","justify-center","py-1","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","sm:items-center"],[3,"svgIcon"],[1,"ml-6","leading-6"],[1,"flex"],[1,"min-w-0","ml-6","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"hover:underline","text-primary-500",3,"href"],["class","text-md truncate text-secondary",4,"ngIf"],[1,"text-md","truncate","text-secondary"],[1,"mx-2"],[1,"font-medium"],[1,"hidden","sm:flex","w-6","h-4","overflow-hidden",3,"matTooltip"],[1,"sm:ml-3","font-mono"],[1,"ml-2.5","font-mono"],[1,"max-w-none","ml-6","prose","prose-sm",3,"innerHTML"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-md","font-medium","whitespace-nowrap"],[1,"ml-1.5","text-md","font-medium","whitespace-nowrap"],[1,"w-60","rounded","border","shadow-md","bg-card"],[1,"flex","items-center","m-3","mr-2"],[1,"flex","items-center"],["type","text","placeholder","Enter tag name",1,"w-full","min-w-0","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"ml-1",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","flex-col","max-h-64","py-2","border-t","overflow-y-auto"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer hover:bg-hover","matRipple","",3,"click",4,"ngIf"],["matRipple","",1,"flex","items-center","h-10","min-h-10","pl-1","pr-4","cursor-pointer","hover:bg-hover",3,"click"],[1,"flex","items-center","h-10","min-h-10","pointer-events-none",3,"checked","color","disableRipple"],[1,"py-2","space-y-2"],[1,"fuse-mat-dense","w-full","mx-4",3,"subscriptSizing"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5","ml-2",3,"svgIcon"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"flex-auto",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder","spellcheck"],[1,"flex-auto","w-full","max-w-24","sm:max-w-40","ml-2","sm:ml-4",3,"subscriptSizing"],["matInput","",3,"formControl","placeholder"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Remove",1,"w-8","h-8","min-h-8",3,"click"],[1,"relative","flex"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"hidden","sm:flex","w-6","h-4","mr-1","overflow-hidden"],[1,"sm:mx-0.5","font-medium","text-default"],[3,"value"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"]],template:function(n,a){if(1&n){const o=e.KQA();e.I0R(0,"div",0),e.yuY(1,Ae,28,17,"ng-container",1),e.I0R(2,"div",2)(3,"div",3)(4,"a",4),e.wR5(5,"mat-icon",5),e.C$Y()()(),e.I0R(6,"div",6)(7,"div",7)(8,"form",8)(9,"div",9)(10,"div",10),e.wR5(11,"div",11),e.I0R(12,"div",12)(13,"div")(14,"input",13,14),e.qCj("change",function(){e.usT(o);const c=e.Gew(15);return e.CGJ(a.uploadAvatar(c.files))}),e.C$Y(),e.I0R(16,"label",15),e.wR5(17,"mat-icon",5),e.C$Y()(),e.I0R(18,"div")(19,"button",16),e.qCj("click",function(){return a.removeAvatar()}),e.wR5(20,"mat-icon",5),e.C$Y()()(),e.yuY(21,Ne,1,1,"img",17)(22,Be,2,1,"div",18),e.C$Y()(),e.I0R(23,"div",19)(24,"mat-form-field",20)(25,"mat-label"),e.OEk(26,"Name"),e.C$Y(),e.wR5(27,"mat-icon",21)(28,"input",22),e.C$Y()(),e.I0R(29,"div",23),e.yuY(30,Pe,3,6,"ng-container",1),e.I0R(31,"div",24,25),e.qCj("click",function(){return a.openTagsPanel()}),e.yuY(33,je,4,1,"ng-container",1)(34,ze,4,1,"ng-container",1)(35,qe,14,7,"ng-template",null,26,e.gJz),e.C$Y()(),e.I0R(37,"div",19)(38,"mat-form-field",20)(39,"mat-label"),e.OEk(40,"Title"),e.C$Y(),e.wR5(41,"mat-icon",21)(42,"input",27),e.C$Y()(),e.I0R(43,"div",19)(44,"mat-form-field",20)(45,"mat-label"),e.OEk(46,"Company"),e.C$Y(),e.wR5(47,"mat-icon",21)(48,"input",27),e.C$Y()(),e.I0R(49,"div",19)(50,"div",28),e.yuY(51,et,11,12,"ng-container",29),e.C$Y(),e.I0R(52,"div",30),e.qCj("click",function(){return a.addEmailField()}),e.wR5(53,"mat-icon",31),e.I0R(54,"span",32),e.OEk(55,"Add an email address"),e.C$Y()()(),e.I0R(56,"div",19)(57,"div",28),e.yuY(58,ot,17,20,"ng-container",29),e.C$Y(),e.I0R(59,"div",30),e.qCj("click",function(){return a.addPhoneNumberField()}),e.wR5(60,"mat-icon",31),e.I0R(61,"span",32),e.OEk(62,"Add a phone number"),e.C$Y()()(),e.I0R(63,"div",19)(64,"mat-form-field",20)(65,"mat-label"),e.OEk(66,"Address"),e.C$Y(),e.wR5(67,"mat-icon",21)(68,"input",27),e.C$Y()(),e.I0R(69,"div",19)(70,"mat-form-field",20)(71,"mat-label"),e.OEk(72,"Birthday"),e.C$Y(),e.wR5(73,"mat-icon",21)(74,"input",33)(75,"mat-datepicker-toggle",34)(76,"mat-datepicker",null,35),e.C$Y()(),e.I0R(78,"div",19)(79,"mat-form-field",20)(80,"mat-label"),e.OEk(81,"Notes"),e.C$Y(),e.wR5(82,"mat-icon",21)(83,"textarea",36),e.C$Y()(),e.I0R(84,"div",37)(85,"button",38),e.qCj("click",function(){return a.deleteIndividual()}),e.OEk(86," Delete "),e.C$Y(),e.I0R(87,"button",39),e.qCj("click",function(){return a.toggleEditMode(!1)}),e.OEk(88," Cancel "),e.C$Y(),e.I0R(89,"button",40),e.qCj("click",function(){return a.updateIndividual()}),e.OEk(90," Save "),e.C$Y()()()()()()}if(2&n){const o=e.Gew(77);e.yG2(),e.E7m("ngIf",a.editMode),e.yG2(3),e.E7m("matTooltip","Close")("routerLink",e.q4q(55,P)),e.yG2(),e.E7m("svgIcon","heroicons_outline:x-mark"),e.yG2(3),e.E7m("formGroup",a.individualForm),e.yG2(6),e.E7m("multiple",!1)("accept","image/jpeg, image/png"),e.yG2(3),e.E7m("svgIcon","heroicons_outline:camera"),e.yG2(3),e.E7m("svgIcon","heroicons_outline:trash"),e.yG2(),e.E7m("ngIf",a.individual.avatar),e.yG2(),e.E7m("ngIf",!a.individual.avatar),e.yG2(2),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("svgIcon","heroicons_solid:user-circle"),e.yG2(),e.E7m("formControlName","name")("placeholder","Name")("spellcheck",!1),e.yG2(2),e.E7m("ngIf",a.individual.tags.length),e.yG2(3),e.E7m("ngIf",a.individual.tags.length),e.yG2(),e.E7m("ngIf",!a.individual.tags.length),e.yG2(4),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("svgIcon","heroicons_solid:briefcase"),e.yG2(),e.E7m("formControlName","title")("placeholder","Job title"),e.yG2(2),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("svgIcon","heroicons_solid:building-office-2"),e.yG2(),e.E7m("formControlName","company")("placeholder","Company"),e.yG2(3),e.E7m("ngForOf",a.individualForm.get("emails").controls)("ngForTrackBy",a.trackByFn),e.yG2(2),e.E7m("svgIcon","heroicons_solid:plus-circle"),e.yG2(5),e.E7m("ngForOf",a.individualForm.get("phoneNumbers").controls)("ngForTrackBy",a.trackByFn),e.yG2(2),e.E7m("svgIcon","heroicons_solid:plus-circle"),e.yG2(4),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("svgIcon","heroicons_solid:map-pin"),e.yG2(),e.E7m("formControlName","address")("placeholder","Address"),e.yG2(2),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("svgIcon","heroicons_solid:cake"),e.yG2(),e.E7m("matDatepicker",o)("formControlName","birthday")("placeholder","Birthday"),e.yG2(),e.E7m("for",o),e.yG2(4),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("svgIcon","heroicons_solid:bars-3-bottom-left"),e.yG2(),e.E7m("formControlName","notes")("placeholder","Notes")("rows",5)("spellcheck",!1),e.yG2(2),e.E7m("color","warn")("matTooltip","Delete"),e.yG2(2),e.E7m("matTooltip","Cancel"),e.yG2(2),e.E7m("color","primary")("disabled",a.individualForm.invalid)("matTooltip","Save")}},dependencies:[f.u_,y.oJ,y.Gw,y.cP,y.um,T.KO,T.a4,v.ER,k.oB,k.qL,f.Iw,m.y,m.sz,m.ot,m.ue,m.u,m.sl,m.ug,m.uW,m.Wo,E.KE,E.UZ,h.wb,h.Up,h.w5,h.is,h.Gm,w.cN,w.yi,B.Qn,M.Vn,M.WK,f.QF,C.d5,C.kX,C.gl,E.I5,E.Ax,Y.iU,Y.SU,Y.Ul,Y.yu,B.aC,pe.w,f.y],encapsulation:2,changeDetection:0})}return i})();var rt=s(7030);const st=[{path:"",component:N,resolve:{individual:()=>(0,e.uUt)(I).getIndividuals(),countries:()=>(0,e.uUt)(I).getCountries()},children:[{path:":id",component:lt,resolve:{individual:(i,l)=>{const t=(0,e.uUt)(I),n=(0,e.uUt)(v.E5);return t.getIndividualById(i.paramMap.get("id")).pipe((0,rt.a)(a=>{console.error(a);const o=l.url.split("/").slice(0,-1).join("/");return n.navigateByUrl(o),(0,A.c)(a)}))},countries:()=>(0,e.uUt)(I).getCountries()},canDeactivate:[(i,l,t,n)=>{let a=n.root;for(;a.firstChild;)a=a.firstChild;return!(n.url.includes("/individual")&&!a.paramMap.get("id"))||i.closeDrawer().then(()=>!0)}]}]}]}}]);