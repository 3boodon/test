"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[140],{4140:(Ye,L,l)=>{l.r(L),l.d(L,{default:()=>Re});var t=l(6568),y=l(9240),Y=l(8608),A=l(6820),I=l(4320),k=l(4832),G=l(6764),w=l(6272),B=l(1952),D=l(6936),et=l(6488),O=l(7030),Q=l(5528),q=l(4088);let T=(()=>{class i{constructor(e,o){this._httpClient=e,this._wealthApi=o,this._building=new Y.g(null),this._countries=new Y.g(null),this._buildings=new Y.g(null),this._buildingId=new Y.g(null),this._buildingedit=new Y.g(null),this._unsubscribeAll=new A.E}get building$(){return this._building.asObservable()}get buildings$(){return this._buildings.asObservable()}get buildingId$(){return this._buildingId.asObservable()}get buildingedit$(){return this._buildingedit.asObservable()}getBuildings(e="mock"){return"mock"==e?this._httpClient.get("api/debt-management/debts").pipe((0,I.y)(o=>{console.log(o),this._buildings.next(o)})):this._wealthApi.getbuildings("base").pipe((0,I.y)(o=>{console.log(o),this._buildings.next(o)}))}createbuilding(e,o="mock"){return this.buildings$.pipe((0,k.U)(1),(0,G.G)("base"==o?n=>this._wealthApi.postBuilding("base",e).pipe((0,w.k)(r=>(console.log("newbuilding ",r),this._buildings.next([r,...n]),r))):n=>this._httpClient.post("api/debt-management/debt",{buildingData:e}).pipe((0,w.k)(r=>(this._buildings.next([r,...n]),r)))))}updatebuilding(e,o,n="mock"){return this.buildings$.pipe((0,k.U)(1),(0,G.G)("base"==n?r=>this._wealthApi.patchBuilding("base",{id:e,building:o}).pipe((0,w.k)(c=>{const f=r.findIndex(v=>v.id.toString()===e);return r[f]=c,this._buildings.next(r),c}),(0,G.G)(c=>this.building$.pipe((0,k.U)(1),(0,B.I)(f=>f&&f.id===e),(0,I.y)(()=>(this._building.next(c),c))))):r=>this._httpClient.patch("api/debt-management/debt",{id:e,building:o}).pipe((0,w.k)(c=>{const f=r.findIndex(v=>v.id.toString()===e);return r[f]=c,this._buildings.next(r),c}),(0,G.G)(c=>this.building$.pipe((0,k.U)(1),(0,B.I)(f=>f&&f.id===e),(0,I.y)(()=>(this._building.next(c),c)))))))}deletebuilding(e){return this.buildings$.pipe((0,k.U)(1),(0,G.G)(o=>this._httpClient.delete("api/debt-management/debt",{params:{id:e}}).pipe((0,w.k)(n=>{const r=o.findIndex(c=>c.id===e);return o.splice(r,1),this._buildings.next(o),n}))))}getbuildingID(e="mock",o){return"mock"==e?this._httpClient.get("api/debt-management/debts").pipe((0,k.U)(1),(0,w.k)(n=>(console.log(n),this._buildings.next(n),n)),(0,G.G)(n=>{if(!n)return(0,D.c)("Could not found building with id of "+o+"!")})):this._wealthApi.getBuildingID("base",o).pipe((0,k.U)(1),(0,w.k)(n=>(console.log(n),this._buildingId.next(n),n)),(0,G.G)(n=>n?(0,et.of)(n):(0,D.c)("Could not found building with id of "+o+"!")))}getCountries(e="mock"){return this._httpClient.get("mock"===e?"api/Country":"https://alwasiah-001-site1.btempurl.com/api/Country").pipe((0,I.y)(n=>{console.log("Countries:",n)}),(0,O.a)(n=>(console.error("Error fetching countries:",n),(0,D.c)("Failed to fetch countries"))))}getCities(e="mock"){return this._httpClient.get("mock"===e?"api/City":"https://alwasiah-001-site1.btempurl.com/api/City").pipe((0,I.y)(n=>{console.log("Cities:",n)}),(0,O.a)(n=>(console.error("Error fetching cities:",n),(0,D.c)("Failed to fetch cities"))))}getDistricts(e="mock"){return this._httpClient.get("mock"===e?"api/District":"https://alwasiah-001-site1.btempurl.com/api/District").pipe((0,I.y)(n=>{console.log("Districts:",n)}),(0,O.a)(n=>(console.error("Error fetching districts:",n),(0,D.c)("Failed to fetch districts"))))}addFormArrayToFormGroup(e,o,n){return o.forEach(r=>{e.get(n).push(r)}),o}static#t=this.\u0275fac=function(o){return new(o||i)(t.CoB(Q.KK),t.CoB(q.u))};static#e=this.\u0275prov=t.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var it=l(6924),C=l(3848),a=l(4332),p=l(9512),J=l(7280),N=l(7804),d=l(568),S=l(3024),m=l(6300),_=l(2556),h=l(8083),R=l(6524),nt=l(3148),j=l(84),F=l(8168),ot=l(8616),g=l(8240),rt=l(4864),at=l(6752),b=l(324),st=l(9020),lt=l(3328),V=l(6312),P=l(4944);const ct=["matDrawer"];function dt(i,s){if(1&i&&(t.SAx(0),t.OEk(1),t.k70()),2&i){const e=t.GaO();t.yG2(),t.oRS(" ",e.buildingCount," ")}}function mt(i,s){if(1&i){const e=t.KQA();t.SAx(0),t.I0R(1,"div",15)(2,"button",16),t.qCj("click",function(){t.usT(e);const n=t.GaO();return t.CGJ(n.addBuilding())}),t.wR5(3,"mat-icon",17),t.I0R(4,"span",18),t.OEk(5),t.wVc(6,"transloco"),t.C$Y()(),t.I0R(7,"button",19),t.wR5(8,"mat-icon",17),t.I0R(9,"span",18),t.OEk(10),t.wVc(11,"transloco"),t.C$Y()(),t.I0R(12,"mat-menu",null,20)(14,"button",21),t.wR5(15,"mat-icon",22),t.I0R(16,"span"),t.OEk(17),t.wVc(18,"transloco"),t.C$Y()(),t.I0R(19,"button",21),t.wR5(20,"mat-icon",22),t.I0R(21,"span"),t.OEk(22),t.wVc(23,"transloco"),t.C$Y()()()(),t.k70()}if(2&i){const e=t.Gew(13);t.yG2(2),t.E7m("color","primary"),t.yG2(),t.E7m("svgIcon","heroicons_outline:plus"),t.yG2(2),t.cNF(t.kDX(6,11,"Add-Building")),t.yG2(2),t.E7m("matMenuTriggerFor",e)("color","primary"),t.yG2(),t.E7m("svgIcon","heroicons_solid:arrow-up-tray"),t.yG2(2),t.cNF(t.kDX(11,13,"Export")),t.yG2(5),t.E7m("svgIcon","heroicons_outline:document-text"),t.yG2(2),t.oRS("",t.kDX(18,15,"as")," PDF"),t.yG2(3),t.E7m("svgIcon","heroicons_outline:document-text"),t.yG2(2),t.oRS("",t.kDX(23,17,"as")," XLS")}}function ut(i,s){if(1&i){const e=t.KQA();t.SAx(0),t.I0R(1,"div",23)(2,"mat-form-field",24),t.wR5(3,"mat-icon",25),t.I0R(4,"input",26,27),t.qCj("input",function(){t.usT(e);const n=t.Gew(5),r=t.GaO();return t.CGJ(r.filterBuildings(n.value))}),t.wVc(6,"transloco"),t.C$Y()()(),t.k70()}2&i&&(t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("svgIcon","heroicons_solid:magnifying-glass"),t.yG2(),t.E7m("autocomplete","off")("placeholder",t.kDX(6,4,"Search")))}function gt(i,s){if(1&i&&(t.I0R(0,"th",45),t.OEk(1),t.C$Y()),2&i){const e=t.GaO().$implicit;t.yG2(),t.cNF(e("Name"))}}const pt=(i,s,e,o)=>({"bg-blue-500":i,"bg-red-500":s,"bg-green-500":e,"bg-blue-600":o});function ft(i,s){if(1&i){const e=t.KQA();t.I0R(0,"td",46),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO(2);return t.CGJ(c.clickedRows(r))}),t.I0R(1,"span",47),t.wR5(2,"span",48),t.I0R(3,"span",49),t.OEk(4),t.C$Y()()()}if(2&i){const e=s.$implicit;t.yG2(2),t.E7m("ngClass",t.WuN(2,pt,e.id<=4,e.id>=6&&e.id<=9,e.id<=10&&e.id>=5,e.id>=11)),t.yG2(2),t.cNF(e.buildingName)}}function ht(i,s){1&i&&(t.I0R(0,"th",45),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.cNF(t.kDX(2,1,"Address")))}function Ct(i,s){if(1&i){const e=t.KQA();t.I0R(0,"td",46),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO(2);return t.CGJ(c.clickedRows(r))}),t.I0R(1,"span",50),t.OEk(2),t.C$Y()()}if(2&i){const e=s.$implicit;t.yG2(2),t.oRS(" ",e.address," ")}}function bt(i,s){1&i&&(t.I0R(0,"th",45),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.cNF(t.kDX(2,1,"Area")))}function yt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"td",46),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO(2);return t.CGJ(c.clickedRows(r))}),t.I0R(1,"span",50),t.OEk(2),t.C$Y()()}if(2&i){const e=s.$implicit;t.yG2(2),t.oRS(" ",e.floorArea," ")}}function _t(i,s){1&i&&(t.I0R(0,"th",45),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.cNF(t.kDX(2,1,"Acquisition-Cost")))}function kt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"td",46),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO(2);return t.CGJ(c.clickedRows(r))}),t.I0R(1,"span",50)(2,"span",51),t.OEk(3,"$"),t.C$Y(),t.OEk(4),t.wVc(5,"currency"),t.C$Y()()}if(2&i){const e=s.$implicit;t.yG2(4),t.oRS("",t.wB1(5,1,e.acquisitionCost," ","symbol","1.2-2")," ")}}function Gt(i,s){1&i&&(t.I0R(0,"th",52),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.cNF(t.kDX(2,1,"Edit")))}function vt(i,s){if(1&i){const e=t.KQA();t.I0R(0,"td",53),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO(2);return t.CGJ(c.aditBuilding(r))}),t.I0R(1,"button",54),t.wR5(2,"mat-icon",55),t.C$Y()()}}function It(i,s){1&i&&t.wR5(0,"tr",56)}function wt(i,s){1&i&&t.wR5(0,"tr",57)}function Rt(i,s){if(1&i&&(t.SAx(0),t.I0R(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31),t.OEk(5),t.wVc(6,"transloco"),t.C$Y(),t.I0R(7,"div",32)(8,"table",33),t.SAx(9,34),t.yuY(10,gt,2,1,"th",35)(11,ft,5,7,"td",36),t.k70(),t.SAx(12,37),t.yuY(13,ht,3,3,"th",35)(14,Ct,3,1,"td",36),t.k70(),t.SAx(15,38),t.yuY(16,bt,3,3,"th",35)(17,yt,3,1,"td",36),t.k70(),t.SAx(18,39),t.yuY(19,_t,3,3,"th",35)(20,kt,6,6,"td",36),t.k70(),t.SAx(21,40),t.yuY(22,Gt,3,3,"th",41)(23,vt,3,0,"td",42),t.k70(),t.yuY(24,It,1,0,"tr",43)(25,wt,1,0,"tr",44),t.C$Y()()()()(),t.k70()),2&i){const e=t.GaO();t.yG2(5),t.oRS(" ",t.kDX(6,4,"Buildings")," "),t.yG2(3),t.E7m("dataSource",e.data),t.yG2(16),t.E7m("matHeaderRowDef",e.displayedColumns),t.yG2(),t.E7m("matRowDefColumns",e.displayedColumns)}}const Et=(i,s,e)=>({"=0":i,"=1":s,other:e});let K=(()=>{class i{constructor(e,o,n,r,c){this._buildingService=e,this._activatedRoute=o,this._changeDetectorRef=n,this._router=r,this._fuseNavigationService=c,this.searchInputControl=new a.yM,this.displayedColumns=["buildingName","address","floorArea","acquisitionCost","details"],this.wealthData=[],this.buildingCount=0,this._unsubscribeAll=new A.E}ngOnInit(){this._buildingService.getBuildings("base").pipe((0,F.a)(this._unsubscribeAll)).subscribe(e=>{this.wealthData=e,this.data=e,this.buildingCount=e.length,this._changeDetectorRef.markForCheck(),console.log("data ",this.data)})}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}clickedRows(e){this._router.navigate(["./",e.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}aditBuilding(e){this._router.navigate(["./","edit-building",e.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}addBuilding(){this._router.navigate(["./","add-building"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}filterBuildings(e){this.data=e?this.wealthData.filter(o=>o.buildingName.toLowerCase().includes(e.toLowerCase())):this.wealthData}trackByFn(e,o){return o.id||e}closeDrawer(){return null}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(o){return new(o||i)(t.GI1(T),t.GI1(y.gV),t.GI1(t.kD9),t.GI1(y.E5),t.GI1(P.q2))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["buildings-table"]],viewQuery:function(o,n){if(1&o&&t.CC$(ct,7),2&o){let r;t.wto(r=t.Gqi())&&(n.matDrawer=r.first)}},standalone:!0,features:[t.UHJ],decls:26,vars:22,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-4","sm:my-8"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[4,"transloco"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"matMenuTriggerFor","color"],["moreMenu","matMenu"],["mat-menu-item",""],[3,"svgIcon"],[1,"flex-auto","mb-8"],[1,"fuse-mat-rounded","fuse-mat-dense","w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder","input"],["searchField",""],[1,"w-full","max-w-screen-xl","mx-auto","p-4","lg:p-6"],[1,"grid","grid-cols-1","gap-8","w-full"],[1,"col-span2","flex","flex-col","flex-auto","pt-6","px-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"min-w-240","overflow-y-visible","mat-mdc-my-table",3,"dataSource"],["matColumnDef","buildingName","sticky",""],["mat-header-cell","","class","bg-header-table",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","floorArea"],["matColumnDef","acquisitionCost"],["matColumnDef","details"],["mat-header-cell","","class","bg-header-table border-none border-b-0",4,"matHeaderCellDef"],["mat-cell","","class","p-0",3,"click",4,"matCellDef"],["mat-header-row","","class","",4,"matHeaderRowDef"],["class","hover:cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"bg-header-table"],["mat-cell","",3,"click"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"ml-3","leading-4"],[1,"font-medium","text-right"],[2,"color","rgb(0, 81, 255)"],["mat-header-cell","",1,"bg-header-table","border-none","border-b-0"],["mat-cell","",1,"p-0",3,"click"],["mat-stroked-button","",1,"border-none","border-b-0","z-1"],["svgIcon","heroicons_mini:pencil-square",1,"border-none","border-b-0"],["mat-header-row","",1,""],["mat-row","",1,"hover:cursor-pointer"]],template:function(o,n){1&o&&(t.I0R(0,"div",0)(1,"mat-drawer-container",1),t.qCj("backdropClick",function(){return n.onBackdropClicked()}),t.I0R(2,"mat-drawer",2,3),t.wR5(4,"router-outlet"),t.C$Y(),t.I0R(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),t.SAx(12),t.I0R(13,"div",11),t.OEk(14),t.wVc(15,"transloco"),t.C$Y(),t.I0R(16,"div",12),t.yuY(17,dt,2,1,"ng-container",13),t.OEk(18),t.wVc(19,"i18nPlural"),t.wVc(20,"transloco"),t.wVc(21,"transloco"),t.wVc(22,"transloco"),t.C$Y(),t.k70(),t.C$Y()(),t.yuY(23,mt,24,19,"ng-container",14),t.C$Y(),t.yuY(24,ut,7,6,"ng-container",14),t.C$Y()(),t.yuY(25,Rt,26,6,"ng-container",14),t.C$Y()()()()),2&o&&(t.yG2(2),t.E7m("mode",n.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.yG2(12),t.oRS(" ",t.kDX(15,7,"Buildings")," "),t.yG2(3),t.E7m("ngIf",n.buildingCount>0),t.yG2(),t.oRS(" ",t.g7$(19,9,n.buildingCount,t.uAc(18,Et,t.kDX(20,12,"No buildings"),t.kDX(21,14,"building"),t.kDX(22,16,"Building")))," "))},dependencies:[g.kJ,g.IZ,g.M7,_.oB,_.qL,p.oJ,p.Gw,h.cN,h.yi,m.Up,m.is,N.KE,R._A,R.aM,R.OQ,R.yG,lt.w5,at.ue,st.G,C.u_,b.If,b.wL,b.ie,b.aG,b.Af,b.uc,b.gx,b.qC,b.cX,b.yC,b._I,C.QF,C.cf,V.sb,V.Iz,V.G4,V.q0,y.cP,a.y,C.od,a.sl],encapsulation:2,changeDetection:0})}return i})();var Dt=l(4248);const Ft=["titleField"];function xt(i,s){if(1&i&&(t.I0R(0,"div")(1,"div",34)(2,"div")(3,"mat-form-field",35)(4,"mat-label"),t.OEk(5),t.wVc(6,"transloco"),t.C$Y(),t.wR5(7,"input",36),t.C$Y()(),t.I0R(8,"div")(9,"mat-form-field",35)(10,"mat-label"),t.OEk(11),t.wVc(12,"transloco"),t.C$Y(),t.wR5(13,"input",36),t.C$Y()(),t.I0R(14,"div",37)(15,"mat-form-field",35)(16,"mat-label"),t.OEk(17),t.wVc(18,"transloco"),t.C$Y(),t.wR5(19,"input",36),t.C$Y()(),t.I0R(20,"div",37)(21,"mat-form-field",35)(22,"mat-label"),t.OEk(23),t.wVc(24,"transloco"),t.C$Y(),t.wR5(25,"input",38)(26,"mat-datepicker-toggle",18),t.I0R(27,"mat-datepicker",39,40)(29,"mat-datepicker-actions")(30,"button",41),t.OEk(31),t.C$Y(),t.I0R(32,"button",42),t.OEk(33),t.wVc(34,"transloco"),t.C$Y()()()()(),t.I0R(35,"div",37)(36,"mat-form-field",35)(37,"mat-label"),t.OEk(38),t.wVc(39,"transloco"),t.C$Y(),t.wR5(40,"input",38)(41,"mat-datepicker-toggle",18),t.I0R(42,"mat-datepicker",39,43)(44,"mat-datepicker-actions")(45,"button",41),t.OEk(46),t.wVc(47,"transloco"),t.C$Y(),t.I0R(48,"button",42),t.OEk(49),t.wVc(50,"transloco"),t.C$Y()()()()()()()),2&i){const e=t.Gew(28),o=t.Gew(43),n=t.GaO().$implicit,r=t.GaO();t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(6,23,"Rental-Name")),t.yG2(2),t.E7m("formControl",n.get("rentalName")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(12,25,"Rental-Terms")),t.yG2(2),t.E7m("formControl",n.get("rentalTerms")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(18,27,"Tenant-Contact-Info")),t.yG2(2),t.E7m("formControl",n.get("tenantContactInfo")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(24,29,"Lease-End-Date")),t.yG2(2),t.E7m("matDatepicker",e)("formControl",n.get("leaseEndDate")),t.yG2(),t.E7m("for",e),t.yG2(5),t.cNF(r.t("Cancel")),t.yG2(2),t.cNF(t.kDX(34,31,"Apply")),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(39,33,"Lease-Start-Date")),t.yG2(2),t.E7m("matDatepicker",o)("formControl",n.get("leaseStartDate")),t.yG2(),t.E7m("for",o),t.yG2(5),t.cNF(t.kDX(47,35,"Cancel")),t.yG2(3),t.cNF(t.kDX(50,37,"Apply"))}}function Yt(i,s){if(1&i){const e=t.KQA();t.SAx(0),t.I0R(1,"div",28)(2,"mat-label",29),t.qCj("click",function(){const r=t.usT(e).index,c=t.GaO();return t.CGJ(c.toggleLease(r))}),t.OEk(3),t.wVc(4,"transloco"),t.C$Y(),t.I0R(5,"div",30)(6,"button",31),t.qCj("click",function(){const r=t.usT(e).index,c=t.GaO();return t.CGJ(c.toggleLease(r))}),t.wR5(7,"mat-icon",32),t.C$Y()(),t.wR5(8,"mat-divider"),t.yuY(9,xt,51,39,"div",33),t.C$Y(),t.k70()}if(2&i){const e=s.index,o=t.GaO();t.yG2(3),t.CAO(" ",t.kDX(4,4,"View-lease-data")," : ",e+1," "),t.yG2(4),t.E7m("svgIcon",o.showLeasesIndex===e?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.yG2(2),t.E7m("ngIf",o.showLeasesIndex===e)}}function St(i,s){1&i&&(t.I0R(0,"mat-label"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.cNF(t.kDX(2,1,"Maintenance-Description")))}function $t(i,s){1&i&&(t.I0R(0,"mat-label"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"MaintenanceCost"),""))}function At(i,s){1&i&&(t.I0R(0,"mat-label"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.cNF(t.kDX(2,1,"Maintenance-Date")))}function Bt(i,s){if(1&i&&(t.I0R(0,"div",34)(1,"div",34)(2,"div",37)(3,"mat-form-field",35),t.yuY(4,St,3,3,"mat-label",33),t.wR5(5,"input",36),t.C$Y()(),t.I0R(6,"div",37)(7,"mat-form-field",35),t.yuY(8,$t,3,3,"mat-label",33),t.wR5(9,"input",36),t.C$Y()(),t.I0R(10,"div",37)(11,"mat-form-field",35),t.yuY(12,At,3,3,"mat-label",33),t.wR5(13,"input",38)(14,"mat-datepicker-toggle",18),t.I0R(15,"mat-datepicker",39,45)(17,"mat-datepicker-actions")(18,"button",41),t.OEk(19),t.wVc(20,"transloco"),t.C$Y(),t.I0R(21,"button",42),t.OEk(22),t.wVc(23,"transloco"),t.C$Y()()()()()()()),2&i){const e=t.Gew(16),o=t.GaO(),n=o.first,r=o.$implicit;t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("ngIf",n),t.yG2(),t.E7m("formControl",r.get("maintenanceDescription")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("ngIf",n),t.yG2(),t.E7m("formControl",r.get("acquisitionCost")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("ngIf",n),t.yG2(),t.E7m("matDatepicker",e)("formControl",r.get("maintenanceDate")),t.yG2(),t.E7m("for",e),t.yG2(5),t.cNF(t.kDX(20,13,"Cancel")),t.yG2(3),t.cNF(t.kDX(23,15,"Apply"))}}function Ot(i,s){if(1&i){const e=t.KQA();t.SAx(0),t.I0R(1,"div",28)(2,"mat-label",29),t.qCj("click",function(){const r=t.usT(e).index,c=t.GaO();return t.CGJ(c.toggleFields(r))}),t.OEk(3),t.wVc(4,"transloco"),t.C$Y(),t.I0R(5,"div",30)(6,"button",31),t.qCj("click",function(){const r=t.usT(e).index,c=t.GaO();return t.CGJ(c.toggleFields(r))}),t.wR5(7,"mat-icon",32),t.C$Y()(),t.wR5(8,"mat-divider"),t.yuY(9,Bt,24,17,"div",44),t.C$Y(),t.k70()}if(2&i){const e=s.index,o=t.GaO();t.yG2(3),t.CAO(" ",t.kDX(4,4,"View-maintenance-data"),": ",e+1," "),t.yG2(4),t.E7m("svgIcon",o.showFieldsIndex===e?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.yG2(2),t.E7m("ngIf",o.showFieldsIndex===e)}}const Tt=()=>["../"];let Nt=(()=>{class i{constructor(e,o,n,r,c,f,v,Ee,De,Fe,xe){this._activatedRoute=e,this._changeDetectorRef=o,this._formBuilder=n,this._fuseConfirmationService=r,this._renderer2=c,this._router=f,this._buildingsTableComponent=v,this._buildingService=Ee,this._overlay=De,this._viewContainerRef=Fe,this._wealthApi=xe,this.showFields=!0,this._unsubscribeAll=new A.E,this.wealthData=[],this.editMode=!1,this.additionalLeases=[],this.showFieldsIndex=-1,this.showLeasesIndex=-1,this.hiddenLeases=!1,this.hiddenMaintenances=!1}ngOnInit(){this._buildingsTableComponent.matDrawer.open(),this.createBuildingForm(),this.getBuildingFrom(),this.updatebuildingWhenValueChange()}createBuildingForm(){this.BuildingForm=this._formBuilder.group({buildingName:[""],address:[""],floorArea:[0],constructionMaterials:[" "],yearOfConstruction:[""],acquisitionDate:[new Date],acquisitionCost:[0],depreciationMethod:[""],bookValue:[""],energyEfficiencyMeasures:[""],safetySecurityFeatures:[""],buildingSystems:[""],assetId:[10],userId:[10],leases:this._formBuilder.array([]),maintenances:this._formBuilder.array([])});const e=this.BuildingForm.controls;Object.keys(e).forEach(o=>{e[o].disable()})}getBuildingFrom(){this._buildingService.buildingId$.pipe((0,F.a)(this._unsubscribeAll)).subscribe(e=>{this.BuildingForm.get("maintenances").clear(),this.BuildingForm.get("leases").clear(),this.BuildingForm.patchValue(e,{emitEvent:!1});const o=[];e.maintenances.length>0?e.maintenances.forEach(r=>{o.push(this._formBuilder.group({buildingId:[r.buildingId],acquisitionCost:[r.acquisitionCost],maintenanceDate:[r.maintenanceDate],maintenanceDescription:[r.maintenanceDescription]}))}):o.push(this._formBuilder.group({buildingId:[3],maintenanceDate:[null],maintenanceDescription:[""],maintenanceCost:[0]})),o.forEach(r=>{this.BuildingForm.get("maintenances").push(r)});const n=[];e.leases.length>0?e.leases.forEach(r=>{n.push(this._formBuilder.group({buildingId:[r.buildingId],leaseStartDate:[r.leaseStartDate],leaseEndDate:[r.leaseEndDate],rentalName:[r.rentalName],rentalTerms:[r.rentalTerms],tenantContactInfo:[r.tenantContactInfo]}))}):n.push(this._formBuilder.group({buildingId:[3],leaseStartDate:[null],leaseEndDate:[null],rentalName:[""],rentalTerms:[""],tenantContactInfo:[""]})),n.forEach(r=>{this.BuildingForm.get("leases").push(r)}),this.toggleEditMode(!1),e.leases.length<=0&&(this.hiddenLeases=!0),e.maintenances.length<=0&&(this.hiddenMaintenances=!0),this._changeDetectorRef.markForCheck(),this.BuildingForm.get("maintenances").disable(),this.BuildingForm.get("leases").disable()})}updatebuildingWhenValueChange(){this.BuildingForm.valueChanges.pipe((0,I.y)(e=>{this.building=(0,nt.c)(this.building,e)}),(0,ot.o)(300),(0,F.a)(this._unsubscribeAll)).subscribe(e=>{this._buildingService.updatebuilding(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()}),this._router.events.pipe((0,F.a)(this._unsubscribeAll),(0,B.I)(e=>e instanceof y.MT)).subscribe(()=>{this._titleField.nativeElement.focus()})}addLease(){this.BuildingForm.get("leases").push(this._formBuilder.group({buildingId:[3],leaseStartDate:[null],leaseEndDate:[null],rentalTerms:[""],rentalName:[""],tenantContactInfo:[""]})),this._changeDetectorRef.markForCheck()}removeLease(e){this.BuildingForm.get("leases").removeAt(e),this._changeDetectorRef.markForCheck()}addMaintenance(){this.BuildingForm.get("maintenances").push(this._formBuilder.group({buildingId:[3],maintenanceDescription:[""],maintenanceDate:[null],acquisitionCost:[0]})),this._changeDetectorRef.markForCheck()}removeMaintenance(e){this.BuildingForm.get("maintenances").removeAt(e),this._changeDetectorRef.markForCheck()}toggleFields(e){this.showFieldsIndex=this.showFieldsIndex===e?-1:e}toggleLease(e){this.showLeasesIndex=this.showLeasesIndex===e?-1:e}get leasesArray(){return this.BuildingForm.get("leases")}get maintenancesArray(){return this.BuildingForm.get("maintenances")}onSubmit(){this.BuildingForm.valid?this._buildingService.createbuilding(this.BuildingForm.value).subscribe(e=>{console.log("Success:",e)},e=>{console.error("Error:",e)}):console.error("Form is invalid")}ngAfterViewInit(){this._buildingsTableComponent.matDrawer.openedChange.pipe((0,F.a)(this._unsubscribeAll),(0,B.I)(e=>e)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._buildingsTableComponent.matDrawer.close()}isOverdue(){return j.CS.fromISO(this.building.acquisitionDate.toString()).startOf("day")<j.CS.now().startOf("day")}updatebuilding(){const e=this.BuildingForm.getRawValue();this._buildingService.updatebuilding(e.id,e,"base").subscribe(()=>{this.toggleEditMode(!1)})}toggleEditMode(e=null){this.editMode=null===e?!this.editMode:e,this._changeDetectorRef.markForCheck()}deleteBuilding(){this._fuseConfirmationService.open({title:"Delete Building",message:"Are you sure you want to delete this Building? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(o=>{if("confirmed"===o){const n=this.building.id,r=this.Buildings.findIndex(v=>v.id===n),f=1===this.Buildings.length&&this.Buildings[0].id===n?null:this.Buildings[r+(r===this.Buildings.length-1?-1:1)].id;this._buildingService.deletebuilding(n).subscribe(v=>{v&&this._router.navigate(f?["../",f]:["../"],{relativeTo:this._activatedRoute})}),this._changeDetectorRef.markForCheck()}})}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||i)(t.GI1(y.gV),t.GI1(t.kD9),t.GI1(a.KE),t.GI1(rt.q),t.GI1(t.q87),t.GI1(y.E5),t.GI1(K),t.GI1(T),t.GI1(Dt.mc),t.GI1(t.y8U),t.GI1(q.u))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["details-buildings"]],viewQuery:function(o,n){if(1&o&&t.CC$(Ft,5),2&o){let r;t.wto(r=t.Gqi())&&(n._titleField=r.first)}},standalone:!0,features:[t.UHJ],decls:114,vars:92,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto","form-details-building",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","",3,"routerLink"],[1,"mt-6","mb-4"],[3,"hidden"],[1,"card","px-4","mb-4"],[1,"w-full","mt-4","opacity-100",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"formControlName","spellcheck"],["titleField",""],[1,"w-full","mt-4",3,"subscriptSizing"],[1,"w-full","mt-4"],["matInput","","placeholder","Choose a date",3,"formControlName"],["matSuffix","",3,"for"],[1,"card","pb-4","px-4","mb-4"],[1,"group","inline-flex","items-center","-ml-4","pb-2","px-4","rounded"],[1,"ml-2","font-medium","text-gray-950"],[1,"card","pb-4","px-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4"],["type","submit","mat-button","",1,"mt-6"],[1,"flex","items-center","justify-center"],[1,"font-semibold",3,"click"],[1,"mt-4"],[1,"text-xl","font-semibold","hover:cursor-pointer","hover:underline",3,"click"],[1,"inline","-m-2",2,"float","right"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[4,"ngIf"],[1,""],[1,"w-full","mt-2",3,"subscriptSizing"],["matInput","",3,"formControl"],[1,"mt-2"],["matInput","","placeholder","Choose a date",3,"matDatepicker","formControl"],["disabled","true"],["leaseEndDate",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],["leaseStartDate",""],["class","",4,"ngIf"],["maintenanceDate",""]],template:function(o,n){if(1&o&&(t.I0R(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),t.SAx(4),t.I0R(5,"button",4),t.wR5(6,"mat-icon",5),t.C$Y(),t.I0R(7,"mat-menu",null,6)(9,"button",7),t.qCj("click",function(){return n.deleteBuilding()}),t.wR5(10,"mat-icon",5),t.I0R(11,"span"),t.OEk(12),t.wVc(13,"transloco"),t.C$Y()()(),t.I0R(14,"a",8),t.wR5(15,"mat-icon",5),t.C$Y(),t.k70(),t.C$Y()(),t.wR5(16,"mat-divider",9),t.SAx(17),t.I0R(18,"div",10)(19,"div",11)(20,"div")(21,"mat-form-field",12)(22,"mat-label"),t.OEk(23),t.wVc(24,"transloco"),t.C$Y(),t.wR5(25,"input",13,14),t.C$Y()(),t.I0R(27,"div")(28,"mat-form-field",15)(29,"mat-label"),t.OEk(30),t.wVc(31,"transloco"),t.C$Y(),t.wR5(32,"input",13),t.C$Y()(),t.I0R(33,"div")(34,"mat-form-field",15)(35,"mat-label"),t.OEk(36),t.wVc(37,"transloco"),t.C$Y(),t.wR5(38,"input",13),t.C$Y()(),t.I0R(39,"div")(40,"mat-form-field",15)(41,"mat-label"),t.OEk(42),t.wVc(43,"transloco"),t.C$Y(),t.wR5(44,"input",13),t.C$Y()(),t.I0R(45,"div")(46,"mat-form-field",15)(47,"mat-label"),t.OEk(48),t.wVc(49,"transloco"),t.C$Y(),t.wR5(50,"input",13),t.C$Y()(),t.I0R(51,"div")(52,"mat-form-field",15)(53,"mat-label"),t.OEk(54),t.wVc(55,"transloco"),t.C$Y(),t.wR5(56,"input",13),t.C$Y()(),t.I0R(57,"div")(58,"mat-form-field",16)(59,"mat-label"),t.OEk(60),t.wVc(61,"transloco"),t.C$Y(),t.wR5(62,"input",17)(63,"mat-datepicker-toggle",18),t.C$Y()()(),t.I0R(64,"div",19)(65,"div")(66,"mat-form-field",15)(67,"mat-label"),t.OEk(68),t.wVc(69,"transloco"),t.C$Y(),t.wR5(70,"input",13),t.C$Y()(),t.I0R(71,"div")(72,"mat-form-field",15)(73,"mat-label"),t.OEk(74),t.wVc(75,"transloco"),t.C$Y(),t.wR5(76,"input",13),t.C$Y()(),t.I0R(77,"div")(78,"mat-form-field",15)(79,"mat-label"),t.OEk(80),t.wVc(81,"transloco"),t.C$Y(),t.wR5(82,"input",13),t.C$Y()(),t.I0R(83,"div")(84,"mat-form-field",15)(85,"mat-label"),t.OEk(86),t.wVc(87,"transloco"),t.C$Y(),t.wR5(88,"input",13),t.C$Y()(),t.I0R(89,"div")(90,"mat-form-field",15)(91,"mat-label"),t.OEk(92),t.wVc(93,"transloco"),t.C$Y(),t.wR5(94,"input",13),t.C$Y()()()(),t.k70(),t.SAx(95),t.I0R(96,"div",10)(97,"div",20)(98,"span",21),t.OEk(99,"Lease "),t.C$Y()(),t.I0R(100,"div",22),t.yuY(101,Yt,10,6,"ng-container",23),t.C$Y()(),t.k70(),t.SAx(102),t.I0R(103,"div",10)(104,"div",24)(105,"span",21),t.OEk(106),t.wVc(107,"transloco"),t.C$Y()(),t.I0R(108,"div",22),t.yuY(109,Ot,10,6,"ng-container",23),t.C$Y()(),t.k70(),t.I0R(110,"button",25)(111,"div",26)(112,"span",27),t.qCj("click",function(){return n.onSubmit()}),t.OEk(113,"Save"),t.C$Y()()()()()),2&o){const r=t.Gew(8);t.yG2(),t.E7m("formGroup",n.BuildingForm),t.yG2(4),t.E7m("matMenuTriggerFor",r),t.yG2(),t.E7m("svgIcon","heroicons_outline:ellipsis-vertical"),t.yG2(4),t.E7m("svgIcon","heroicons_outline:trash"),t.yG2(2),t.cNF(t.kDX(13,63,"Delete")),t.yG2(2),t.E7m("routerLink",t.q4q(91,Tt)),t.yG2(),t.E7m("svgIcon","heroicons_outline:x-mark"),t.yG2(3),t.E7m("hidden",!1),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(24,65,"Name")),t.yG2(2),t.E7m("formControlName","buildingName")("spellcheck",!1),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(31,67,"Address")),t.yG2(2),t.E7m("formControlName","address")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(37,69,"Area")),t.yG2(2),t.E7m("formControlName","floorArea")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(43,71,"YearOfConstruction")),t.yG2(2),t.E7m("formControlName","yearOfConstruction")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(49,73,"Acquisition-Cost")),t.yG2(2),t.E7m("formControlName","acquisitionCost")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(55,75,"Depreciation-Method")),t.yG2(2),t.E7m("formControlName","depreciationMethod")("spellcheck",!1),t.yG2(4),t.cNF(t.kDX(61,77,"Acquisition-Date")),t.yG2(2),t.E7m("formControlName","acquisitionDate")("formControlName","acquisitionDate"),t.yG2(),t.E7m("for","acquisitionDate"),t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(69,79,"Construction-Materials")),t.yG2(2),t.E7m("formControlName","constructionMaterials")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(75,81,"Energy-Efficiency-Measures")),t.yG2(2),t.E7m("formControlName","energyEfficiencyMeasures")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(81,83,"Safety-Security-Features")),t.yG2(2),t.E7m("formControlName","safetySecurityFeatures")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(87,85,"Building-Systems")),t.yG2(2),t.E7m("formControlName","buildingSystems")("spellcheck",!1),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.oRS("",t.kDX(93,87,"Book-Value")," "),t.yG2(2),t.E7m("formControlName","bookValue")("spellcheck",!1),t.yG2(2),t.E7m("hidden",n.hiddenLeases),t.yG2(5),t.E7m("ngForOf",n.leasesArray.controls)("ngForTrackBy",n.trackByFn),t.yG2(2),t.E7m("hidden",n.hiddenMaintenances),t.yG2(3),t.oRS(" ",t.kDX(107,89,"Maintenance")," "),t.yG2(3),t.E7m("ngForOf",n.BuildingForm.get("maintenances").controls)("ngForTrackBy",n.trackByFn)}},dependencies:[a.y,a.sz,a.ot,a.ue,a.u,a.sl,a.ug,a.uW,a.Wo,p.oJ,p.Gw,p.cP,p.um,C.u_,_.oB,_.qL,R._A,R.aM,R.OQ,R.yG,y.ER,S.U,S.k,m.wb,m.Up,m.w5,m.Gm,h.cN,h.yi,it.aC,C.Iw,N.KE,J.Vn,d.iU,d.SU,d.Ul,d.yu,d._C,d.o9,d.Y3,g.kJ,g.M7,y.qQ],encapsulation:2,changeDetection:0})}return i})(),Vt=(()=>{class i{constructor(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["buildings"]],standalone:!0,features:[t.UHJ],decls:1,vars:0,template:function(o,n){1&o&&t.wR5(0,"router-outlet")},dependencies:[C.MD,y.cP],encapsulation:2,changeDetection:0})}return i})();var x=l(1928),X=l(6364),$=l(2523),E=l(2704);function Xt(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"Building-Name is required")," "))}function Mt(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"Area is required")," "))}function zt(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"Year Of Construction is required")," "))}function Ut(i,s){if(1&i&&(t.SAx(0),t.I0R(1,"div",16)(2,"div",17)(3,"mat-form-field",3)(4,"mat-label"),t.OEk(5),t.wVc(6,"transloco"),t.C$Y(),t.wR5(7,"input",4),t.C$Y()(),t.I0R(8,"div",17)(9,"mat-form-field",3)(10,"mat-label"),t.OEk(11),t.wVc(12,"transloco"),t.C$Y(),t.wR5(13,"input",4),t.C$Y()(),t.I0R(14,"div",17)(15,"mat-form-field",3)(16,"mat-label"),t.OEk(17),t.wVc(18,"transloco"),t.C$Y(),t.wR5(19,"input",4),t.C$Y()(),t.I0R(20,"div",18)(21,"mat-form-field",3)(22,"mat-label",19),t.OEk(23),t.wVc(24,"transloco"),t.C$Y(),t.wR5(25,"input",4),t.C$Y()(),t.I0R(26,"div",20)(27,"mat-form-field",3)(28,"mat-label",21),t.OEk(29),t.wVc(30,"transloco"),t.C$Y(),t.wR5(31,"input",4),t.C$Y()()(),t.k70()),2&i){const e=t.GaO();t.yG2(5),t.oRS(" ",t.kDX(6,10,"Construction-Materials"),""),t.yG2(2),t.E7m("formControl",e.buildingForm.controls.constructionMaterials),t.yG2(4),t.oRS(" ",t.kDX(12,12,"Energy-Efficiency-Measures"),""),t.yG2(2),t.E7m("formControl",e.buildingForm.controls.energyEfficiencyMeasures),t.yG2(4),t.oRS(" ",t.kDX(18,14,"Safety-Security-Features")," "),t.yG2(2),t.E7m("formControl",e.buildingForm.controls.safetySecurityFeatures),t.yG2(4),t.oRS(" ",t.kDX(24,16,"Building-Systems")," "),t.yG2(2),t.E7m("formControl",e.buildingForm.controls.buildingSystems),t.yG2(4),t.oRS(" ",t.kDX(30,18,"Book-Value"),""),t.yG2(2),t.E7m("formControl",e.buildingForm.controls.bookValue)}}let Lt=(()=>{class i{constructor(e){this._formBuilder=e}ngOnInit(){this.buildingForm=this._formBuilder.group({buildingName:["",a.AQ.required],floorArea:["",a.AQ.required],yearOfConstruction:["",a.AQ.required],acquisitionCost:["",a.AQ.required],acquisitionDate:["",a.AQ.required],depreciationMethod:["",a.AQ.required],constructionMaterials:["",a.AQ.required],energyEfficiencyMeasures:["",a.AQ.required],safetySecurityFeatures:["",a.AQ.required],buildingSystems:["",a.AQ.required],bookValue:["",a.AQ.required]})}static#t=this.\u0275fac=function(o){return new(o||i)(t.GI1(a.im))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["addition-step-one"]],inputs:{buildingForm:"buildingForm"},standalone:!0,features:[t.UHJ],decls:74,vars:43,consts:[[1,"mb-8"],[1,"p-4","pb-2","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],[1,"grid","xl:grid-cols-3","lg:grid-cols-4","md:grid-cols-4","sm:grid-cols-2","grid-cols-1","gap-4"],[1,"w-full"],["matInput","","placeholder","",3,"formControl"],[4,"ngIf"],["matInput","","placeholder","Choose a date",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["disabled","false"],["yearPicker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],["acquisitionDate",""],[1,"flex","justify-end","mt-4"],[1,"card"],[4,"transloco"],[1,"grid","lg:grid-cols-6","md:grid-cols-2","grid-cols-1","gap-4"],[1,"col-span-2"],[1,"col-span-1","lg:col-span-3","mx-12"],[1,"z"],[1,"col-span-1","lg:col-start-4","lg:col-span-3","mx-12"],[1,""]],template:function(o,n){if(1&o&&(t.I0R(0,"div",0)(1,"form",1),t.SAx(2),t.I0R(3,"div",2)(4,"div")(5,"mat-form-field",3)(6,"mat-label"),t.OEk(7),t.wVc(8,"transloco"),t.C$Y(),t.wR5(9,"input",4),t.yuY(10,Xt,3,3,"mat-error",5),t.C$Y()(),t.I0R(11,"div")(12,"mat-form-field",3)(13,"mat-label"),t.OEk(14),t.wVc(15,"transloco"),t.C$Y(),t.wR5(16,"input",4),t.yuY(17,Mt,3,3,"mat-error",5),t.C$Y()(),t.I0R(18,"div")(19,"mat-form-field",3)(20,"mat-label"),t.OEk(21),t.wVc(22,"transloco"),t.C$Y(),t.wR5(23,"input",6)(24,"mat-datepicker-toggle",7),t.I0R(25,"mat-datepicker",8,9)(27,"mat-datepicker-actions")(28,"button",10),t.OEk(29),t.wVc(30,"transloco"),t.C$Y(),t.I0R(31,"button",11),t.OEk(32),t.wVc(33,"transloco"),t.C$Y()()(),t.yuY(34,zt,3,3,"mat-error",5),t.C$Y()(),t.I0R(35,"div")(36,"mat-form-field",3)(37,"mat-label"),t.OEk(38),t.wVc(39,"transloco"),t.C$Y(),t.wR5(40,"input",4),t.C$Y()(),t.I0R(41,"div")(42,"mat-form-field",3)(43,"mat-label"),t.OEk(44),t.wVc(45,"transloco"),t.C$Y(),t.wR5(46,"input",6)(47,"mat-datepicker-toggle",7),t.I0R(48,"mat-datepicker",8,12)(50,"mat-datepicker-actions")(51,"button",10),t.OEk(52),t.wVc(53,"transloco"),t.C$Y(),t.I0R(54,"button",11),t.OEk(55),t.wVc(56,"transloco"),t.C$Y()()()()(),t.I0R(57,"div")(58,"mat-form-field",3)(59,"mat-label"),t.OEk(60),t.wVc(61,"transloco"),t.C$Y(),t.wR5(62,"input",4),t.C$Y()()(),t.k70(),t.wR5(63,"div",13),t.C$Y(),t.I0R(64,"div")(65,"mat-accordion",14)(66,"mat-expansion-panel")(67,"mat-expansion-panel-header")(68,"mat-panel-title"),t.OEk(69," More Details "),t.C$Y(),t.I0R(70,"mat-panel-description"),t.OEk(71," Add more details "),t.C$Y()(),t.I0R(72,"form",1),t.yuY(73,Ut,32,20,"ng-container",15),t.C$Y()()()()()),2&o){const r=t.Gew(26),c=t.Gew(49);t.yG2(7),t.cNF(t.kDX(8,23,"Building-Name")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.buildingName),t.yG2(),t.E7m("ngIf",n.buildingForm.get("buildingName").invalid&&n.buildingForm.get("buildingName").touched),t.yG2(4),t.oRS(" ",t.kDX(15,25,"Area")," "),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.floorArea),t.yG2(),t.E7m("ngIf",n.buildingForm.get("floorArea").invalid&&n.buildingForm.get("floorArea").touched),t.yG2(4),t.cNF(t.kDX(22,27,"YearOfConstruction")),t.yG2(2),t.E7m("matDatepicker",r)("formControl",n.buildingForm.controls.yearOfConstruction),t.yG2(),t.E7m("for",r),t.yG2(5),t.oRS(" ",t.kDX(30,29,"Cancel")," "),t.yG2(3),t.oRS(" ",t.kDX(33,31,"Apply")," "),t.yG2(2),t.E7m("ngIf",n.buildingForm.get("yearOfConstruction").invalid&&n.buildingForm.get("yearOfConstruction").touched),t.yG2(4),t.cNF(t.kDX(39,33,"Acquisition-Cost")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.acquisitionCost),t.yG2(4),t.oRS(" ",t.kDX(45,35,"Acquisition-Date"),""),t.yG2(2),t.E7m("matDatepicker",c)("formControl",n.buildingForm.controls.acquisitionDate),t.yG2(),t.E7m("for",c),t.yG2(5),t.oRS(" ",t.kDX(53,37,"Cancel")," "),t.yG2(3),t.oRS(" ",t.kDX(56,39,"Apply")," "),t.yG2(5),t.cNF(t.kDX(61,41,"Depreciation-Method")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.depreciationMethod)}},dependencies:[p.oJ,p.Gw,X.KO,a.sl,a.sz,a.ot,a.ue,a.u,a.ug,C.u_,_.oB,a.y,a.SC,h.cN,h.yi,m.Up,m.w5,m.wJ,m.Gm,$.d5,d.iU,d.SU,d.Ul,d.yu,d._C,d.o9,d.Y3,g.kJ,g.IZ,g.M7,S.U,E.CU,E._2,E._s,E.nm,E.CM,E._A],encapsulation:2})}return i})();var H=l(1225),Qt=l(6728),qt=l(2144),M=l(7692),u=l(9520);const Jt=u.z.object({id:u.z.number(),cityId:u.z.number(),code:u.z.string(),name:u.z.string(),description:u.z.string()}).merge(M.M),jt=u.z.object({id:u.z.number(),areaId:u.z.number(),code:u.z.string(),name:u.z.string(),districtsList:u.z.array(Jt).nullable()}).merge(M.M),Pt=u.z.object({id:u.z.number(),countryId:u.z.number(),code:u.z.string(),name:u.z.string(),description:u.z.string(),citiesList:u.z.array(jt).nullable()}).merge(M.M);var Kt=l(9144),Ht=l(7344);let Wt=(()=>{class i{constructor(){this.apiHandler=(0,t.uUt)(Kt.w),this.http=(0,t.uUt)(Q.KK)}getCountryAreas(e){const o=this.apiHandler.parseAPIEndpoint(qt.G.all.addresses.countryAreas);return(0,Ht.S)(this.http.get(o,{params:{CountryId:e}}).pipe((0,w.k)(n=>(n.data=n.data.map(r=>Pt.parse(r)),n))))}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275prov=t.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Zt(i,s){1&i&&(t.I0R(0,"mat-hint"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"Please add address")," "))}function te(i,s){if(1&i){const e=t.KQA();t.I0R(0,"mat-option",10),t.qCj("click",function(){const r=t.usT(e).$implicit,c=t.GaO();return t.CGJ(c.fetchAreas(r.id))}),t.OEk(1),t.C$Y()}if(2&i){const e=s.$implicit;t.E7m("value",e.name),t.yG2(),t.oRS(" ",e.name," ")}}function ee(i,s){if(1&i&&(t.I0R(0,"mat-option",11),t.OEk(1),t.C$Y()),2&i){const e=s.$implicit;t.E7m("value",e.id),t.yG2(),t.oRS(" ",e.name," ")}}function ie(i,s){1&i&&(t.OEk(0),t.wVc(1,"transloco")),2&i&&t.oRS(" ",t.kDX(1,1,"There are no cities to choose from")," ")}function ne(i,s){1&i&&(t.OEk(0),t.wVc(1,"transloco")),2&i&&t.oRS(" ",t.kDX(1,1,"Please select a country first")," ")}function oe(i,s){if(1&i&&(t.I0R(0,"mat-hint"),t.yuY(1,ie,2,3)(2,ne,2,3),t.C$Y()),2&i){const e=t.GaO();t.yG2(),t.C0Y(1,e.buildingForm.controls.country.valid?1:2)}}function re(i,s){if(1&i&&(t.I0R(0,"mat-option",11),t.OEk(1),t.C$Y()),2&i){const e=s.$implicit;t.E7m("value",e.name),t.yG2(),t.oRS(" ",e.name," ")}}function ae(i,s){1&i&&(t.OEk(0),t.wVc(1,"transloco")),2&i&&t.oRS(" ",t.kDX(1,1,"There are no districts to choose from")," ")}function se(i,s){1&i&&(t.OEk(0),t.wVc(1,"transloco")),2&i&&t.oRS(" ",t.kDX(1,1,"Please select a city first")," ")}function le(i,s){if(1&i&&t.yuY(0,ae,2,3)(1,se,2,3),2&i){const e=t.GaO();t.C0Y(0,e.buildingForm.controls.city.valid?0:1)}}function ce(i,s){1&i&&(t.I0R(0,"mat-hint"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"Please add Zip Code")," "))}let de=(()=>{class i{constructor(e){this._formBuilder=e,this.countryApi=(0,t.uUt)(Qt.I),this.areaApi=(0,t.uUt)(Wt),this.formGroupUpdated=new t._w7,this.areas=(0,t.OCB)([]),this.countries=(0,t.OCB)([]),this.cities=(0,t.S6b)(()=>this.areas().map(o=>o.citiesList).flatMap(o=>o)),this.districts=(0,t.S6b)(()=>this.selectedCity().districtsList||[]),this.selectedCity=(0,t.OCB)({}),this.buildingForm=this._formBuilder.group({country:["",a.AQ.required],city:["",a.AQ.required],district:["",a.AQ.required],address:["",a.AQ.required],addressTwo:[""],zipCode:["",a.AQ.required]}),(0,t.o3l)(()=>{this.handleDisabledStates()}),this.buildingForm.valueChanges.subscribe(()=>{this.formGroupUpdated.emit(this.buildingForm)}),this.buildingForm.controls.city.valueChanges.subscribe(o=>{this.selectedCity.set(this.cities().find(n=>n.id===+o)||{})})}handleDisabledStates(){0===this.cities().length?this.buildingForm.controls.city.disable():this.buildingForm.controls.city.enable(),0===this.districts().length?this.buildingForm.controls.district.disable():this.buildingForm.controls.district.enable()}ngOnInit(){this.fetchCountries()}fetchAreas(e){var o=this;return(0,H.c)(function*(){const{data:n}=yield o.areaApi.getCountryAreas(e);o.areas.set(n)})()}fetchCountries(){var e=this;return(0,H.c)(function*(){const{data:o}=yield e.countryApi.getCountries();e.countries.set(o)})()}static#t=this.\u0275fac=function(o){return new(o||i)(t.GI1(a.im))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["address-form"]],outputs:{formGroupUpdated:"formGroupUpdated"},standalone:!0,features:[t.UHJ],decls:53,vars:31,consts:[[1,"mb-8"],[1,"p-4","pb-2","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],[1,"grid","lg:grid-cols-2","md:grid-cols-2","grid-cols-1","gap-4"],[1,"w-full"],["matInput","","placeholder","",3,"formControl"],[4,"ngIf"],[1,"text-gray-400"],["placeholder","Choose country",3,"formControl"],["placeholder","Choose city",3,"formControl"],["placeholder","Choose district",3,"formControl"],[3,"value","click"],[3,"value"]],template:function(o,n){1&o&&(t.I0R(0,"div",0)(1,"form",1)(2,"div",2)(3,"div")(4,"mat-form-field",3)(5,"mat-label"),t.OEk(6),t.wVc(7,"transloco"),t.C$Y(),t.wR5(8,"input",4),t.yuY(9,Zt,3,3,"mat-hint",5),t.C$Y()(),t.I0R(10,"div")(11,"mat-form-field",3)(12,"mat-label"),t.OEk(13),t.wVc(14,"transloco"),t.I0R(15,"span",6),t.OEk(16),t.wVc(17,"transloco"),t.C$Y()(),t.wR5(18,"input",4),t.C$Y()(),t.I0R(19,"div")(20,"mat-form-field",3)(21,"mat-label"),t.OEk(22),t.wVc(23,"transloco"),t.C$Y(),t.I0R(24,"mat-select",7),t.c53(25,te,2,2,"mat-option",11,t.wJt),t.C$Y()()(),t.I0R(27,"div")(28,"mat-form-field",3)(29,"mat-label"),t.OEk(30),t.wVc(31,"transloco"),t.C$Y(),t.I0R(32,"mat-select",8),t.c53(33,ee,2,2,"mat-option",11,t.wJt),t.C$Y(),t.yuY(35,oe,3,1,"mat-hint"),t.C$Y()(),t.I0R(36,"div")(37,"mat-form-field",3)(38,"mat-label"),t.OEk(39),t.wVc(40,"transloco"),t.C$Y(),t.I0R(41,"mat-select",9),t.c53(42,re,2,2,"mat-option",11,t.wJt),t.C$Y(),t.I0R(44,"mat-hint"),t.yuY(45,le,2,1),t.C$Y()()(),t.I0R(46,"div")(47,"mat-form-field",3)(48,"mat-label"),t.OEk(49),t.wVc(50,"transloco"),t.C$Y(),t.wR5(51,"input",4),t.yuY(52,ce,3,3,"mat-hint",5),t.C$Y()()()()()),2&o&&(t.yG2(6),t.cNF(t.kDX(7,17,"Address 1")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.address),t.yG2(),t.E7m("ngIf",n.buildingForm.controls.address.invalid&&n.buildingForm.controls.address.touched),t.yG2(4),t.oRS("",t.kDX(14,19,"Address 2")," "),t.yG2(3),t.cNF(t.kDX(17,21,"(Optional)")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.addressTwo),t.yG2(4),t.cNF(t.kDX(23,23,"Country")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.country),t.yG2(),t.oho(n.countries()),t.yG2(5),t.cNF(t.kDX(31,25,"City")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.city),t.yG2(),t.oho(n.cities()),t.yG2(2),t.C0Y(35,0===n.cities().length?35:-1),t.yG2(4),t.cNF(t.kDX(40,27,"District")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.district),t.yG2(),t.oho(n.districts()),t.yG2(3),t.C0Y(45,0===n.districts().length?45:-1),t.yG2(4),t.cNF(t.kDX(50,29,"Zip Code")),t.yG2(2),t.E7m("formControl",n.buildingForm.controls.zipCode),t.yG2(),t.E7m("ngIf",n.buildingForm.controls.zipCode.invalid&&n.buildingForm.controls.zipCode.touched))},dependencies:[p.oJ,X.KO,a.sl,a.sz,a.ot,a.ue,a.u,a.ug,C.u_,_.oB,a.y,a.SC,h.cN,h.yi,m.Up,m.w5,m.MX,$.d5,$.kX,N.I5,d.iU,g.kJ,g.M7],encapsulation:2})}return i})();var me=l(3820);function ue(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",19),t.qCj("click",function(){t.usT(e);const n=t.GaO(2);return t.CGJ(n.removeForm(n.i))}),t.wR5(1,"mat-icon",20),t.C$Y()}2&i&&(t.yG2(),t.E7m("svgIcon","heroicons_outline:trash"))}function ge(i,s){if(1&i&&(t.I0R(0,"div",5)(1,"div",6)(2,"h1",7),t.OEk(3),t.C$Y()(),t.I0R(4,"div",8)(5,"div",5)(6,"mat-form-field",9)(7,"mat-label"),t.OEk(8),t.wVc(9,"transloco"),t.C$Y(),t.wR5(10,"input",10),t.C$Y()(),t.I0R(11,"div",5)(12,"mat-form-field",9)(13,"mat-label"),t.OEk(14),t.wVc(15,"transloco"),t.C$Y(),t.wR5(16,"input",10),t.C$Y()(),t.I0R(17,"div",5)(18,"mat-form-field",9)(19,"mat-label"),t.OEk(20),t.wVc(21,"transloco"),t.C$Y(),t.wR5(22,"input",11)(23,"mat-datepicker-toggle",12),t.I0R(24,"mat-datepicker",13,14)(26,"mat-datepicker-actions")(27,"button",15),t.OEk(28,"Cancel"),t.C$Y(),t.I0R(29,"button",16),t.OEk(30,"Apply"),t.C$Y()()()()()(),t.I0R(31,"div",17),t.yuY(32,ue,2,1,"button",18),t.C$Y()()),2&i){const e=s.$implicit,o=s.$index,n=t.Gew(25),r=t.GaO();t.yG2(3),t.oRS("Maintenance : ",o+1,""),t.yG2(5),t.cNF(t.kDX(9,10,"Maintenance-Description")),t.yG2(2),t.E7m("formControl",e.get("maintenanceDescription")),t.yG2(4),t.oRS(" ",t.kDX(15,12,"MaintenanceCost")," "),t.yG2(2),t.E7m("formControl",e.get("acquisitionCost")),t.yG2(4),t.oRS(" ",t.kDX(21,14,"Maintenance-Date")," "),t.yG2(2),t.E7m("matDatepicker",n)("formControl",e.get("maintenanceDate")),t.yG2(),t.E7m("for",n),t.yG2(9),t.E7m("ngIf",r.maintenancesArray.length>1)}}let pe=(()=>{class i{constructor(){this._formBuilder=(0,t.uUt)(a.im),this.showNewForm=!1}ngOnInit(){}get maintenancesArray(){return this.maintenanceForm.get("maintenances").controls}addNewForm(){const e=this._formBuilder.group({maintenanceDescription:[""],maintenanceDate:[null],maintenanceCost:[0]});this.maintenanceForm.get("maintenances").push(e),this.showNewForm=!0}removeForm(e){const o=this.maintenanceForm.get("maintenances");o.length>1&&(o.removeAt(e),this.showNewForm=o.length>0)}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["add-maintenances"]],inputs:{maintenanceForm:"maintenanceForm"},standalone:!0,features:[t.UHJ],decls:9,vars:2,consts:[[1,"mb-8",3,"formGroup"],[1,"pt-4","px-4","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],[1,"text-h2","px-4","border-2","border-slate-200","dark:border-slate-500","rounded-lg","mb-4",3,"click"],[1,"mt-6","mb-4","border-gray-400"],[3,"insuranceWealthForm"],[1,""],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold"],[1,"grid","lg:grid-cols-3","md:grid-cols-2","grid-cols-1","gap-4"],[1,"w-full"],["matInput","","placeholder","",3,"formControl"],["matInput","","placeholder","Choose a date",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["id","maintenanceDate"],["maintenanceDate",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],[1,"flex","justify-end"],["class","text-lg  border-2 border-gray-200 dark:border-gray-500 rounded-lg",3,"click",4,"ngIf"],[1,"text-lg","border-2","border-gray-200","dark:border-gray-500","rounded-lg",3,"click"],[1,"text-red-400",3,"svgIcon"],["class",""]],template:function(o,n){1&o&&(t.I0R(0,"div",0)(1,"form",1),t.SAx(2),t.c53(3,ge,33,16,"div",21,t.wJt),t.k70(),t.C$Y(),t.I0R(5,"button",2),t.qCj("click",function(){return n.addNewForm()}),t.OEk(6,"+"),t.C$Y(),t.wR5(7,"mat-divider",3)(8,"insurance-wealth",4),t.C$Y()),2&o&&(t.E7m("formGroup",n.maintenanceForm),t.yG2(3),t.oho(n.maintenancesArray),t.yG2(5),t.E7m("insuranceWealthForm",n.maintenanceForm))},dependencies:[p.oJ,p.Gw,X.KO,a.sl,a.sz,a.ot,a.ue,a.u,a.ug,a.uW,C.u_,_.oB,_.qL,a.y,a.SC,h.cN,h.yi,m.Up,m.w5,m.Gm,$.d5,d.iU,d.SU,d.Ul,d.yu,d._C,d.o9,d.Y3,g.kJ,g.M7,J.Vn,S.U,S.k,E.CU,N.Ko,me.O],styles:["input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.example-right-align[_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return i})();var z=l(4336),W=l(4756);function fe(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1,"Invalid start date"),t.C$Y())}function he(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1,"Invalid end date"),t.C$Y())}function Ce(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1," You must first enter the contract start date. "),t.C$Y())}function be(i,s){1&i&&(t.I0R(0,"mat-error"),t.OEk(1," Start Date must be before End Date. "),t.C$Y())}function ye(i,s){if(1&i){const e=t.KQA();t.I0R(0,"button",20),t.qCj("click",function(){t.usT(e);const n=t.GaO(2);return t.CGJ(n.removeForm(n.i))}),t.wR5(1,"mat-icon",21),t.C$Y()}2&i&&(t.yG2(),t.E7m("svgIcon","heroicons_outline:trash"))}function _e(i,s){if(1&i&&(t.I0R(0,"div"),t.SAx(1),t.I0R(2,"div",3)(3,"h1",4),t.OEk(4),t.wVc(5,"transloco"),t.C$Y()(),t.I0R(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t.OEk(9),t.wVc(10,"transloco"),t.C$Y(),t.wR5(11,"input",7),t.C$Y(),t.I0R(12,"mat-form-field",8)(13,"mat-label"),t.OEk(14),t.wVc(15,"transloco"),t.C$Y(),t.I0R(16,"mat-date-range-input",9),t.wR5(17,"input",10)(18,"input",11),t.C$Y(),t.wR5(19,"mat-datepicker-toggle",12),t.I0R(20,"mat-date-range-picker",null,13)(22,"mat-datepicker-actions")(23,"button",14),t.OEk(24),t.wVc(25,"transloco"),t.C$Y(),t.I0R(26,"button",15),t.OEk(27),t.wVc(28,"transloco"),t.C$Y()()(),t.yuY(29,fe,2,0,"mat-error")(30,he,2,0,"mat-error")(31,Ce,2,0,"mat-error")(32,be,2,0,"mat-error"),t.C$Y(),t.I0R(33,"div",16)(34,"mat-form-field",17)(35,"mat-label"),t.OEk(36),t.wVc(37,"transloco"),t.C$Y(),t.wR5(38,"textarea",7),t.C$Y()(),t.I0R(39,"div",16)(40,"mat-form-field",17)(41,"mat-label"),t.OEk(42),t.wVc(43,"transloco"),t.C$Y(),t.wR5(44,"textarea",7),t.C$Y()()(),t.I0R(45,"div",18),t.yuY(46,ye,2,1,"button",19),t.C$Y(),t.k70(),t.C$Y()),2&i){const e=s.$implicit,o=s.$index,n=t.Gew(21),r=t.GaO();t.yG2(4),t.CAO(" ",t.kDX(5,20,"Lease"),": ",o+1," "),t.yG2(5),t.cNF(t.kDX(10,22,"Rental-Name")),t.yG2(2),t.E7m("formControl",e.get("rentalName")),t.yG2(3),t.oRS(" ",t.kDX(15,24,"Lease-Start-Date"),""),t.yG2(2),t.E7m("rangePicker",n),t.yG2(),t.E7m("formControl",e.get("leaseStartDate")),t.yG2(),t.E7m("formControl",e.get("leaseStartDate")),t.yG2(),t.E7m("for",n),t.yG2(5),t.oRS(" ",t.kDX(25,26,"Cancel")," "),t.yG2(3),t.oRS(" ",t.kDX(28,28,"Apply")," "),t.yG2(2),t.C0Y(29,e.controls.leaseStartDate.hasError("matStartDateInvalid")?29:-1),t.yG2(),t.C0Y(30,e.controls.leaseEndDate.hasError("matEndDateInvalid")?30:-1),t.yG2(),t.C0Y(31,e.controls.leaseEndDate.hasError("required")?31:-1),t.yG2(),t.C0Y(32,r.validationService.hasError(e,"startEndDate")?32:-1),t.yG2(4),t.cNF(t.kDX(37,30,"Tenant-Contact-Info")),t.yG2(2),t.E7m("formControl",e.get("tenantContactInfo")),t.yG2(4),t.cNF(t.kDX(43,32,"Rental-Terms")),t.yG2(2),t.E7m("formControl",e.get("rentalTerms")),t.yG2(2),t.E7m("ngIf",r.leasesArray.length>1)}}let ke=(()=>{class i{constructor(){this.validationService=(0,t.uUt)(W.N),this._formBuilder=(0,t.uUt)(a.im),this.showNewForm=!1,this.leasesForm=this._formBuilder.group({leases:this._formBuilder.array([this.createLeaseFormGroup()])})}get leasesArray(){return this.leasesForm.controls.leases}createLeaseFormGroup(){return this._formBuilder.group({buildingId:[3],leaseStartDate:["",a.AQ.required],leaseEndDate:[{value:"",disabled:!0},a.AQ.required],rentalName:["",a.AQ.required],rentalTerms:["",a.AQ.required],tenantContactInfo:["",a.AQ.required]},{validators:[W.w.startEndDate("leaseStartDate","leaseEndDate")]})}addNewForm(){this.leasesArray.push(this.createLeaseFormGroup()),this.showNewForm=!0}removeForm(e){this.leasesArray.length>1&&(this.leasesArray.removeAt(e),this.showNewForm=this.leasesArray.length>0)}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["contract-form"]],standalone:!0,features:[t.UHJ],decls:6,vars:1,consts:[[1,"mb-8",3,"formGroup"],["formArrayName","leases",1,"p-4","pb-2","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],[1,"text-h2","px-4","border-2","border-slate-200","dark:border-slate-500","rounded-lg","mb-4",3,"click"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold"],[1,"grid","lg:grid-cols-6","md:grid-cols-2","grid-cols-1","gap-4"],[1,"col-span-2"],["matInput","","placeholder","",3,"formControl"],[1,"col-span-4"],[3,"rangePicker"],["matInput","","matStartDate","","placeholder","Start date",3,"formControl"],["matInput","","matEndDate","","placeholder","End date",3,"formControl"],["matIconSuffix","",3,"for"],["picker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],[1,"col-span-2","lg:col-span-3","lg:mx-12","sm:mx-0","md:mx-0"],[1,"w-full"],[1,"flex","justify-end"],["class","text-lg border-2 border-gray-200 dark:border-gray-500 rounded-lg",3,"click",4,"ngIf"],[1,"text-lg","border-2","border-gray-200","dark:border-gray-500","rounded-lg",3,"click"],[1,"text-red-400",3,"svgIcon"]],template:function(o,n){1&o&&(t.I0R(0,"div",0)(1,"form",1),t.c53(2,_e,47,34,"div",null,t.wJt),t.C$Y(),t.I0R(4,"button",2),t.qCj("click",function(){return n.addNewForm()}),t.OEk(5," + "),t.C$Y()()),2&o&&(t.E7m("formGroup",n.leasesForm),t.yG2(2),t.oho(n.leasesArray.controls))},dependencies:[p.oJ,p.Gw,X.KO,a.sl,a.sz,a.ot,a.ue,a.u,a.ug,a.uW,a.uE,C.u_,_.oB,_.qL,a.y,a.SC,h.cN,h.yi,m.Up,m.w5,m.wJ,m.Gm,$.d5,d.iU,d.yu,d._m,d.Gw,d.ee,d.o6,d._C,d.o9,d.Y3,g.kJ,g.M7],encapsulation:2})}return i})();const Ge=["signUpNgForm"],ve=["stepper"];function Ie(i,s){1&i&&(t.OEk(0),t.wVc(1,"transloco")),2&i&&t.oRS("",t.kDX(1,1,"Step-One")," ")}let U=(()=>{class i{constructor(e,o,n,r,c){this._formBuilder=e,this._buildingService=o,this.snackBar=n,this._fuseNavigationService=r,this._changeDetectorRef=c,this.isLinear=!1,this.showAlert=!1,this.horizontalPosition="center",this.verticalPosition="top",this._unsubscribeAll=new A.E,this.editMode=!0,this.countries=[],this.cities=[],this.districts=[]}ngOnInit(){this.createBuildingForm(),this.getBuildingFrom()}createBuildingForm(){this.BuildingForm=this._formBuilder.group({buildingName:["test building 1"],address:["test address"],floorArea:[3],constructionMaterials:["test"],yearOfConstruction:[new Date],acquisitionDate:[new Date],acquisitionCost:[3e3],depreciationMethod:["test"],bookValue:["test"],energyEfficiencyMeasures:["test"],safetySecurityFeatures:["test"],buildingSystems:["test"],assetId:[3],userId:[1080],leases:this._formBuilder.array([]),maintenances:this._formBuilder.array([]),address_s:this._formBuilder.group({country:[""],district:[""],city:[0],address:[""],street:[""],zipCode:[""]}),insurances:this._formBuilder.array([])}),this.addLease(),this.addMaintenance(),this.addInsurance()}getAddresses(e){console.log(e.value),this.BuildingForm.patchValue({country:e.country,city:e.city,district:e.district,address:e.address,zipCode:e.zipCode})}get f(){return this.BuildingForm.controls}getBuildingFrom(){this._buildingService.buildingId$.pipe((0,F.a)(this._unsubscribeAll)).subscribe(e=>{this.BuildingForm.get("maintenances").clear(),this.BuildingForm.get("leases").clear(),this.BuildingForm.get("insurances").clear(),this.BuildingForm.patchValue(e,{emitEvent:!1});const o=[];o.push(this._formBuilder.group({buildingId:[3],leaseStartDate:[a.AQ.required],leaseEndDate:[a.AQ.required],rentalName:["test",a.AQ.required],rentalTerms:["test",a.AQ.required],tenantContactInfo:["test",a.AQ.required]})),this._buildingService.addFormArrayToFormGroup(this.BuildingForm,o,"leases"),this.leasesArray.valueChanges.subscribe(c=>{console.log("data ",c)});const n=[];n.push(this._formBuilder.group({buildingId:[3],maintenanceDate:[new Date],maintenanceDescription:["test2"],acquisitionCost:[500]})),this._buildingService.addFormArrayToFormGroup(this.BuildingForm,n,"maintenances");const r=[];r.push(this._formBuilder.group({insureById:[1],itemId:[],assetCode:["building"],insuranceName:["test"],insuranceCompanyId:[0],policyNumber:["test"],name:["test"],file:[""],startDate:[new Date],expiredDate:[new Date],typeOfCoverage:["test"],limitationLiability:[""],deductibles:[""],insuredItemList:this._formBuilder.group({assetId:[3],userId:[1080]})})),this._buildingService.addFormArrayToFormGroup(this.BuildingForm,r,"insurances"),this._changeDetectorRef.markForCheck()})}toggleEditMode(e=null){this.editMode=null===e?!this.editMode:e,this._changeDetectorRef.markForCheck()}get leasesArray(){return this.BuildingForm.get("leases")}get maintenancesArray(){return this.BuildingForm.get("maintenances")}get insurancesArray(){return this.BuildingForm.get("insurances")}addLease(){this.BuildingForm.get("leases").push(this._formBuilder.group({buildingId:[3],leaseStartDate:[new Date],leaseEndDate:[new Date],rentalTerms:["test add lease"],rentalName:["test",a.AQ.required],tenantContactInfo:["test"]})),this._changeDetectorRef.markForCheck()}creareLease(){return this._formBuilder.group({buildingId:[3],leaseStartDate:[null],leaseEndDate:[null],rentalTerms:["test"],rentalName:["test"],tenantContactInfo:["test"]})}addMaintenance(){this.BuildingForm.get("maintenances").push(this._formBuilder.group({buildingId:[3],maintenanceDescription:["test add maintenance"],maintenanceDate:[new Date],acquisitionCost:[0]})),this._changeDetectorRef.markForCheck()}addInsurance(){this.BuildingForm.get("insurances").push(this._formBuilder.group({insureById:[0],itemId:[0],assetCode:[""],insuranceName:[""],insuranceCompanyId:[0],policyNumber:[""],name:[""],file:[""],startDate:[""],expiredDate:[""],typeOfCoverage:[""],limitationLiability:[""],deductibles:[""],insuredItemList:this._formBuilder.group({assetId:[3],userId:[1080]})})),this._changeDetectorRef.markForCheck()}openSnackBar(e,o){const n=new z.QT;n.panelClass=["custom-snack-bar"],n.verticalPosition="top",n.horizontalPosition="center",n.duration=3e3,this.snackBar.open(e,o,n).onAction().subscribe(()=>{const c=document.querySelector(".custom-snack-bar");c&&c.classList.add("custom-snack-bar-content")})}onSubmit(){this.BuildingForm.valid?this._buildingService.createbuilding(this.BuildingForm.value,"base").subscribe(e=>{const o=e;console.log("Success:",e),this.snackBar.open(o.message,"success",{duration:3e3}),this.BuildingForm.reset(),this.getBuildingFrom(),this.createBuildingForm(),this.stepper.selectedIndex=0,this.showAlert=!0},e=>{console.error("Error:",e),console.log(this.BuildingForm),console.log(this.BuildingForm)}):(console.error("Form is invalid"),console.log(this.BuildingForm))}ngOnDestroy(){this._fuseNavigationService.getComponent("mainNavigation")}static#t=this.\u0275fac=function(o){return new(o||i)(t.GI1(a.im),t.GI1(T),t.GI1(z.yS),t.GI1(P.q2),t.GI1(t.kD9))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["create-building"]],viewQuery:function(o,n){if(1&o&&(t.CC$(Ge,5),t.CC$(ve,5)),2&o){let r;t.wto(r=t.Gqi())&&(n.signUpNgForm=r.first),t.wto(r=t.Gqi())&&(n.stepper=r.first)}},standalone:!0,features:[t.UHJ],decls:42,vars:35,consts:[[1,"bg-card","w-full"],[1,"flex","flex-auto","min-w-0","flex-col","max-w-screen-xl","mx-auto","h-full"],[3,"formGroup"],["labelPosition","bottom",3,"linear","completed"],["stepper",""],["matStepLabel",""],[3,"buildingForm"],[1,"flex","justify-end"],["mat-button","","matStepperNext","",1,""],[3,"label"],[3,"formGroupUpdated"],[1,"flex","justify-between"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext",""],[3,"label","stepControl"],[3,"maintenanceForm"],["mat-button","",3,"click"]],template:function(o,n){1&o&&(t.I0R(0,"div",0)(1,"div",1)(2,"form",2)(3,"mat-stepper",3,4),t.qCj("completed",function(){return n.onSubmit()}),t.I0R(5,"mat-step"),t.yuY(6,Ie,2,3,"ng-template",5),t.wR5(7,"addition-step-one",6),t.I0R(8,"div",7)(9,"button",8),t.OEk(10),t.wVc(11,"transloco"),t.C$Y()()(),t.I0R(12,"mat-step",9),t.wVc(13,"transloco"),t.I0R(14,"address-form",10),t.qCj("formGroupUpdated",function(c){return n.getAddresses(c)}),t.C$Y(),t.I0R(15,"div",11)(16,"button",12),t.OEk(17),t.wVc(18,"transloco"),t.C$Y(),t.I0R(19,"button",13),t.OEk(20),t.wVc(21,"transloco"),t.C$Y()()(),t.I0R(22,"mat-step",9),t.wVc(23,"transloco"),t.wR5(24,"contract-form"),t.I0R(25,"div",11)(26,"button",12),t.OEk(27),t.wVc(28,"transloco"),t.C$Y(),t.I0R(29,"button",13),t.OEk(30),t.wVc(31,"transloco"),t.C$Y()()(),t.I0R(32,"mat-step",14),t.wVc(33,"transloco"),t.wR5(34,"add-maintenances",15),t.I0R(35,"div",11)(36,"button",12),t.OEk(37),t.wVc(38,"transloco"),t.C$Y(),t.I0R(39,"button",16),t.qCj("click",function(){return n.onSubmit()}),t.OEk(40),t.wVc(41,"transloco"),t.C$Y()()()()()()()),2&o&&(t.yG2(2),t.E7m("formGroup",n.BuildingForm),t.yG2(),t.E7m("linear",n.isLinear),t.yG2(4),t.E7m("buildingForm",n.BuildingForm),t.yG2(3),t.oRS(" ",t.kDX(11,15,"Next")," "),t.yG2(2),t._6D("label",t.kDX(13,17,"Step-Two")),t.yG2(5),t.oRS(" ",t.kDX(18,19,"Previous")," "),t.yG2(3),t.oRS(" ",t.kDX(21,21,"Next")," "),t.yG2(2),t._6D("label",t.kDX(23,23,"Leases")),t.yG2(5),t.oRS(" ",t.kDX(28,25,"Previous")," "),t.yG2(3),t.oRS(" ",t.kDX(31,27,"Next")," "),t.yG2(2),t._6D("label",t.kDX(33,29,"Maintenances")),t.E7m("stepControl",n.maintenancesArray[3]),t.yG2(2),t.E7m("maintenanceForm",n.BuildingForm),t.yG2(3),t.oRS(" ",t.kDX(38,31,"Previous")," "),t.yG2(3),t.oRS(" ",t.kDX(41,33,"Save")," "))},dependencies:[a.y,a.sz,a.u,a.sl,a.uW,m.wb,h.cN,x.MJ,x.Un,x.E9,x.uI,x.yi,x.o1,p.oJ,p.Gw,Lt,de,ke,pe,z.uE,g.kJ,g.M7],styles:[".custom-snack-bar{background-color:your-desired-background-color;color:red!important}.custom-snack-bar-content,.custom-snack-bar{color:red!important}.back{padding:5 rem!important;background-color:#0ff!important}.verification-form{max-width:500px;margin:0 auto;padding:2rem;border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 4px #0000001a}.verification-form h1{text-align:center;margin-bottom:1rem}.verification-form p{text-align:center;margin-bottom:2rem}.verification-form .form-group{margin-bottom:1rem}.verification-form .form-control,.verification-form .btn-primary{width:100%}\n"],encapsulation:2,changeDetection:0})}return i})();var Z=l(9344);const tt=(i,s)=>{const e=(0,t.uUt)(T),o=(0,t.uUt)(y.E5);return e.getbuildingID("base",i.paramMap.get("id")).pipe((0,O.a)(n=>{console.error(n);const r=s.url.split("/").slice(0,-1).join("/");return o.navigateByUrl(r),(0,D.c)(n)}))},Re=[{path:"",component:Vt,children:[{path:Z.k.modules.wealthManagement.physicalProperty.buildings.addBuilding,component:U},{path:"",component:K,resolve:{},children:[{path:":id",component:Nt,resolve:{building:tt},canDeactivate:[(i,s,e,o)=>{let n=o.root;for(;n.firstChild;)n=n.firstChild;return o.url.includes("buildings")?n.paramMap.get("id")?(console.log("found Error in drawer id"),!0):(console.log("found Error in drawer"),i.closeDrawer().then(()=>!0)):(console.log("found Error in drawer buildings"),!0)}]}]},{path:Z.k.modules.wealthManagement.physicalProperty.buildings.editBuilding,component:U,children:[{path:":id",component:U,resolve:{building:tt}}]}]}]}}]);