"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[28],{1028:(Te,_,a)=>{a.r(_),a.d(_,{default:()=>De});var e=a(6568),u=a(9240),m=a(3848),f=a(9512),y=a(6752),R=a(7804),C=a(2556),c=a(6524),d=a(324),D=a(8796),G=a(6364),k=a(8240),I=a(9020),w=a(6312),q=a(6820),b=a(8168),v=a(7236),T=a(3868),B=a(4944);const M=["matDrawer"];let U=(()=>{class n{constructor(t,i,s,o,l,h,g){this._activatedRoute=t,this._changeDetectorRef=i,this._document=s,this._router=o,this._bequestService=l,this._fuseMediaWatcherService=h,this._fuseNavigationService=g,this._unsubscribeAll=new q.E}ngOnInit(){this._bequestService.getBequests().pipe((0,b.a)(this._unsubscribeAll)).subscribe(t=>{this.data=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createBequest(t){console.log("bequest ||||||||||||||||||||||||||"),this._router.navigate(["./","create-bequest"],{relativeTo:this._activatedRoute})}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.GI1(u.gV),e.GI1(e.kD9),e.GI1(m.Ud),e.GI1(u.E5),e.GI1(v.a),e.GI1(T.E),e.GI1(B.q2))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-bequest-management"]],viewQuery:function(i,s){if(1&i&&e.CC$(M,7),2&i){let o;e.wto(o=e.Gqi())&&(s.matDrawer=o.first)}},standalone:!0,features:[e.UHJ],decls:1,vars:0,template:function(i,s){1&i&&e.wR5(0,"router-outlet")},dependencies:[m.MD,u.cP,k.kJ,C.oB,R.KE,c._A,D.WG,y.ue,I.G,d.If,f.oJ,G.KO,w.sb],encapsulation:2,changeDetection:0})}return n})();var $=a(6924),p=a(4332),V=a(7280),x=a(568),O=a(3024),E=a(6300),Y=a(8083),N=a(3148),S=a(84),j=a(4320),L=a(8616),J=a(1952),P=a(4864);function Q(n,r){if(1&n&&(e.SAx(0),e.I0R(1,"div",23)(2,"div",24),e.wR5(3,"div",25),e.I0R(4,"div",26),e.OEk(5),e.C$Y()(),e.I0R(6,"div",27),e.OEk(7),e.wVc(8,"number"),e.C$Y(),e.I0R(9,"div",28),e.OEk(10),e.C$Y()(),e.k70()),2&n){const t=r.$implicit,i=r.index,s=e.GaO();e.yG2(3),e.m4B("background-color",s.chartNewVsReturning.colors[i]),e.yG2(2),e.oRS(" ",s.data.newVsReturning.labels[i]," "),e.yG2(2),e.oRS(" ",e.g7$(8,5,s.data.newVsReturning.uniqueVisitors*t/100,"1.0-0")," "),e.yG2(3),e.oRS(" ",t,"% ")}}let z=(()=>{class n{constructor(t,i){this._bequestService=t,this._router=i,this.chartTaskDistribution={},this._unsubscribeAll=new q.E}ngOnInit(){this._bequestService.bequests$.pipe((0,b.a)(this._unsubscribeAll)).subscribe(t=>{this.data=t,this._prepareChartData()}),window.Apex={chart:{events:{mounted:(t,i)=>{this._fixSvgFill(t.el)},updated:(t,i)=>{this._fixSvgFill(t.el)}}}}}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(t,i){return i.id||t}_fixSvgFill(t){const i=this._router.url;Array.from(t.querySelectorAll("*[fill]")).filter(s=>-1!==s.getAttribute("fill").indexOf("url(")).forEach(s=>{const o=s.getAttribute("fill");s.setAttribute("fill",`url(${i}${o.slice(o.indexOf("#"))}`)})}_prepareChartData(){this.chartNewVsReturning={chart:{animations:{speed:400,animateGradually:{enabled:!1}},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"radialBar",sparkline:{enabled:!0}},colors:["#3182CE","#63B3ED"],labels:this.data.newVsReturning.labels,plotOptions:{radialBar:{dataLabels:{total:{show:!0,label:"TOTAL"}}}},series:this.data.newVsReturning.series,states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{enabled:!0,fillSeriesColor:!1,theme:"dark",custom:({seriesIndex:t,w:i})=>`<div class="flex items-center h-8 min-h-8 max-h-8 px-3">\n                                                    <div class="w-3 h-3 rounded-full" style="background-color: ${i.config.colors[t]};"></div>\n                                                    <div class="ml-2 text-md leading-none">${i.config.labels[t]}:</div>\n                                                    <div class="ml-2 text-md font-bold leading-none">${i.config.series[t]}%</div>\n                                                </div>`}},this.chartTaskDistribution={chart:{fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"polarArea",toolbar:{show:!1},zoom:{enabled:!1}},labels:this.data.taskDistribution.labels,legend:{position:"bottom"},plotOptions:{polarArea:{spokes:{connectorColors:"var(--fuse-border)"},rings:{strokeColor:"var(--fuse-border)"}}},series:this.data.taskDistribution.series,states:{hover:{filter:{type:"darken",value:.75}}},stroke:{width:2},theme:{monochrome:{enabled:!0,color:"#93C5FD",shadeIntensity:.75,shadeTo:"dark"}},tooltip:{followCursor:!0,theme:"dark"},yaxis:{labels:{style:{colors:"var(--fuse-text-secondary)"}}}}}static#e=this.\u0275fac=function(i){return new(i||n)(e.GI1(v.a),e.GI1(u.E5))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["BequestChart"]],standalone:!0,features:[e.UHJ],decls:36,vars:19,consts:[[1,"w-full","max-w-screen-xl","mx-auto","p-6"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","w-full","mt-8"],[1,"sm:col-span-2","md:col-span-1","lg:col-span-1","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden","p-6"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"ml-2"],["mat-button","",1,"h-6","min-h-6","px-2","rounded-full","bg-hover",3,"matMenuTriggerFor"],[1,"font-medium","text-sm","text-secondary"],["conversionMenu","matMenu"],["mat-menu-item",""],[1,"flex","flex-col","flex-auto","mt-6","h-44"],[1,"flex","flex-auto","items-center","justify-center","w-full","h-full",3,"chart","colors","labels","plotOptions","series","states","tooltip"],[1,"mt-8"],[1,"-my-3","divide-y"],[4,"ngFor","ngForOf"],[1,"sm:col-span-2","lg:col-span-2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","items-start","justify-between"],[1,"mt-3","sm:mt-0","sm:ml-2"],["value","this-week"],["taskDistributionWeekSelector","matButtonToggleGroup"],["value","last-week"],[1,"flex","flex-col","flex-auto","mt-6"],[1,"flex-auto","w-full","h-80",3,"chart","labels","legend","plotOptions","series","states","stroke","theme","tooltip","yaxis"],[1,"grid","grid-cols-3","py-3"],[1,"flex","items-center"],[1,"flex-0","w-2","h-2","rounded-full"],[1,"ml-3","truncate"],[1,"font-medium","text-right"],[1,"text-right","text-secondary"]],template:function(i,s){if(1&i&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.OEk(5," Percentage of will "),e.C$Y(),e.I0R(6,"div",5)(7,"button",6)(8,"span",7),e.OEk(9,"30 days"),e.C$Y()(),e.I0R(10,"mat-menu",null,8)(12,"button",9),e.OEk(13,"30 days"),e.C$Y(),e.I0R(14,"button",9),e.OEk(15,"3 months"),e.C$Y(),e.I0R(16,"button",9),e.OEk(17,"9 months"),e.C$Y()()()(),e.I0R(18,"div",10),e.wR5(19,"apx-chart",11),e.C$Y(),e.I0R(20,"div",12)(21,"div",13),e.yuY(22,Q,11,8,"ng-container",14),e.C$Y()()(),e.I0R(23,"div",15)(24,"div",16)(25,"div",4),e.OEk(26," Bequest Distribution "),e.C$Y(),e.I0R(27,"div",17)(28,"mat-button-toggle-group",18,19)(30,"mat-button-toggle",20),e.OEk(31,"Last Year"),e.C$Y(),e.I0R(32,"mat-button-toggle",18),e.OEk(33,"This Year"),e.C$Y()()()(),e.I0R(34,"div",21),e.wR5(35,"apx-chart",22),e.C$Y()()()()),2&i){const o=e.Gew(11),l=e.Gew(29);e.yG2(7),e.E7m("matMenuTriggerFor",o),e.yG2(12),e.E7m("chart",s.chartNewVsReturning.chart)("colors",s.chartNewVsReturning.colors)("labels",s.chartNewVsReturning.labels)("plotOptions",s.chartNewVsReturning.plotOptions)("series",s.chartNewVsReturning.series)("states",s.chartNewVsReturning.states)("tooltip",s.chartNewVsReturning.tooltip),e.yG2(3),e.E7m("ngForOf",s.data.newVsReturning.series),e.yG2(13),e.E7m("chart",s.chartTaskDistribution.chart)("labels",s.chartTaskDistribution.labels)("legend",s.chartTaskDistribution.legend)("plotOptions",s.chartTaskDistribution.plotOptions)("series",s.chartTaskDistribution.series[l.value])("states",s.chartTaskDistribution.states)("stroke",s.chartTaskDistribution.stroke)("theme",s.chartTaskDistribution.theme)("tooltip",s.chartTaskDistribution.tooltip)("yaxis",s.chartTaskDistribution.yaxis)}},dependencies:[k.kJ,C.oB,R.KE,c._A,c.aM,c.OQ,c.yG,D.WG,y.ue,y.gn,y.KU,I.G,I.q,d.If,f.oJ,f.Gw,G.KO,m.Iw,m.hl],encapsulation:2,changeDetection:0})}return n})();var K=a(1225),H=a(3328),W=a(6468);function X(n,r){1&n&&(e.I0R(0,"th",16),e.OEk(1,"Type"),e.C$Y())}const Z=(n,r,t)=>({"bg-blue-500":n,"bg-red-500":r,"bg-green-500":t});function ee(n,r){if(1&n&&(e.I0R(0,"td",17)(1,"span",18),e.wR5(2,"span",19),e.I0R(3,"span",20),e.OEk(4),e.C$Y()()()),2&n){const t=r.$implicit;e.yG2(2),e.E7m("ngClass",e.uAc(2,Z,1===t.id,2===t.id,3===t.id)),e.yG2(2),e.cNF(t.type)}}function te(n,r){1&n&&(e.I0R(0,"th",16),e.OEk(1,"Total Bequest"),e.C$Y())}function ne(n,r){if(1&n&&(e.I0R(0,"td",17)(1,"span",21),e.OEk(2),e.wVc(3,"currency"),e.C$Y()()),2&n){const t=r.$implicit;e.yG2(2),e.oRS(" ",e.g7$(3,1,t.total,"USD")," ")}}function se(n,r){1&n&&(e.I0R(0,"th",16),e.OEk(1," Expenses (USD) "),e.C$Y())}function ie(n,r){if(1&n&&(e.I0R(0,"td",17),e.OEk(1),e.wVc(2,"currency"),e.C$Y()),2&n){const t=r.$implicit;e.yG2(),e.oRS(" ",e.g7$(2,1,t.expensesAmount,"USD")," ")}}function oe(n,r){1&n&&(e.I0R(0,"th",16),e.OEk(1,"Expenses (%)"),e.C$Y())}function ae(n,r){if(1&n&&(e.I0R(0,"td",17),e.OEk(1),e.C$Y()),2&n){const t=r.$implicit;e.yG2(),e.oRS(" ",t.expensesPercentage,"% ")}}function re(n,r){1&n&&(e.I0R(0,"th",16),e.OEk(1," Remaining (USD) "),e.C$Y())}function le(n,r){if(1&n&&(e.I0R(0,"td",17),e.OEk(1),e.wVc(2,"currency"),e.C$Y()),2&n){const t=r.$implicit;e.yG2(),e.oRS(" ",e.g7$(2,1,t.remainingAmount,"USD")," ")}}function ue(n,r){1&n&&(e.I0R(0,"th",16),e.OEk(1,"Remaining (%)"),e.C$Y())}function ce(n,r){1&n&&(e.I0R(0,"span",25),e.wR5(1,"span",26),e.C$Y())}function de(n,r){1&n&&(e.I0R(0,"span",27),e.wR5(1,"span",28),e.C$Y())}function me(n,r){1&n&&(e.I0R(0,"span",29),e.wR5(1,"span",30),e.C$Y())}function fe(n,r){if(1&n&&(e.I0R(0,"td",17)(1,"span",18)(2,"span"),e.yuY(3,ce,2,0,"span",22)(4,de,2,0,"span",23)(5,me,2,0,"span",24),e.C$Y(),e.I0R(6,"span",20),e.OEk(7),e.C$Y()()()),2&n){const t=r.$implicit;e.yG2(3),e.E7m("ngIf",t.remainingPercentage<30),e.yG2(),e.E7m("ngIf",t.remainingPercentage>=30&&t.remainingPercentage<80),e.yG2(),e.E7m("ngIf",t.remainingPercentage>=80),e.yG2(2),e.oRS("",t.remainingPercentage,"%")}}function he(n,r){1&n&&e.wR5(0,"tr",31)}function pe(n,r){if(1&n){const t=e.KQA();e.I0R(0,"tr",32),e.qCj("click",function(){const o=e.usT(t).$implicit,l=e.GaO();return e.CGJ(l.clickedRows(o))}),e.C$Y()}}let ge=(()=>{class n{constructor(t,i,s,o,l){this._bequestService=t,this._activatedRoute=i,this._changeDetectorRef=s,this._router=o,this.register=l,this.chartTaskDistribution={},this._unsubscribeAll=new q.E,this.dataUser=[],this.countries=[]}ngOnInit(){this.register.GetCountries("base").subscribe(t=>{this.countries=t,console.log(this.countries),console.log("dddddddddddddddddddddddddddddddddddddddd")},t=>{console.error("Error fetching countries:",t)}),this._bequestService.getBequests().pipe((0,b.a)(this._unsubscribeAll)).subscribe(t=>{this.data=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}clickedRows(t){var i=this;return(0,K.c)(function*(){console.log("dddddddddddddddddddddddddddddddddddddddd",t.id);let s=yield fetch("http://alwasiah-001-site1.btempurl.com/api/user").then(o=>o.json());console.log(s),i.register.getRegions("base").subscribe(o=>{i.dataUser=o,console.log(i.dataUser)}),i.register.GetCountries("base").subscribe(o=>{i.countries=o,console.log(i.countries),console.log("dddddddddddddddddddddddddddddddddddddddd")},o=>{console.error("Error fetching countries:",o)}),i._router.navigate(["./",t.id],{relativeTo:i._activatedRoute}),i._changeDetectorRef.markForCheck()})()}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.GI1(v.a),e.GI1(u.gV),e.GI1(e.kD9),e.GI1(u.E5),e.GI1(W.G))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["bequest-table"]],standalone:!0,features:[e.UHJ],decls:27,vars:3,consts:[[1,"w-full","max-w-screen-xl","mx-auto","p-4","lg:p-6"],[1,"grid","grid-cols-1","gap-8","w-full"],[1,"col-span2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","type","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","expensesAmount"],["matColumnDef","expensesPercentage"],["matColumnDef","remainingAmount"],["matColumnDef","remainingPercentage"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:cursor-pointer","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"ml-3","leading-4"],[1,"font-medium","text-right"],["class","flex items-end w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"flex","items-end","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],["mat-header-row",""],["mat-row","",1,"hover:cursor-pointer",3,"click"]],template:function(i,s){1&i&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.OEk(4," Bequest Details "),e.C$Y(),e.I0R(5,"div",4)(6,"table",5),e.SAx(7,6),e.yuY(8,X,2,0,"th",7)(9,ee,5,6,"td",8),e.k70(),e.SAx(10,9),e.yuY(11,te,2,0,"th",7)(12,ne,4,4,"td",8),e.k70(),e.SAx(13,10),e.yuY(14,se,2,0,"th",7)(15,ie,3,4,"td",8),e.k70(),e.SAx(16,11),e.yuY(17,oe,2,0,"th",7)(18,ae,2,1,"td",8),e.k70(),e.SAx(19,12),e.yuY(20,re,2,0,"th",7)(21,le,3,4,"td",8),e.k70(),e.SAx(22,13),e.yuY(23,ue,2,0,"th",7)(24,fe,8,4,"td",8),e.k70(),e.yuY(25,he,1,0,"tr",14)(26,pe,1,0,"tr",15),e.C$Y()()()()()),2&i&&(e.yG2(6),e.E7m("dataSource",s.data.bequestDetails.rows),e.yG2(19),e.E7m("matHeaderRowDef",s.data.bequestDetails.columns),e.yG2(),e.E7m("matRowDefColumns",s.data.bequestDetails.columns))},dependencies:[k.kJ,C.oB,f.oJ,R.KE,c._A,H.w5,y.ue,I.G,m.u_,d.If,d.wL,d.ie,d.aG,d.Af,d.uc,d.gx,d.qC,d.cX,d.yC,d._I,m.QF,m.cf],encapsulation:2,changeDetection:0})}return n})();const be=["matDrawer"];function ve(n,r){1&n&&(e.SAx(0),e.I0R(1,"div",20),e.OEk(2," Bequest Management "),e.C$Y(),e.k70())}let A=(()=>{class n{constructor(t,i,s,o,l,h,g){this._activatedRoute=t,this._changeDetectorRef=i,this._document=s,this._router=o,this._bequestService=l,this._fuseMediaWatcherService=h,this._fuseNavigationService=g,this._unsubscribeAll=new q.E}ngOnInit(){this._bequestService.getBequests().pipe((0,b.a)(this._unsubscribeAll)).subscribe(t=>{this.data=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createBequest(t){console.log("bequest"),this._router.navigate(["./","create-bequest"],{relativeTo:this._activatedRoute})}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.GI1(u.gV),e.GI1(e.kD9),e.GI1(m.Ud),e.GI1(u.E5),e.GI1(v.a),e.GI1(T.E),e.GI1(B.q2))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-insurances"]],viewQuery:function(i,s){if(1&i&&e.CC$(be,7),2&i){let o;e.wto(o=e.Gqi())&&(s.matDrawer=o.first)}},standalone:!0,features:[e.UHJ],decls:34,vars:11,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-128","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8","sm:my-12"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],[4,"transloco"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"matMenuTriggerFor","color"],["moreMenu","matMenu"],["mat-menu-item",""],[3,"svgIcon"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"]],template:function(i,s){if(1&i&&(e.I0R(0,"div",0)(1,"mat-drawer-container",1),e.qCj("backdropClick",function(){return s.onBackdropClicked()}),e.I0R(2,"mat-drawer",2,3),e.wR5(4,"router-outlet"),e.C$Y(),e.I0R(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),e.yuY(12,ve,3,0,"ng-container",11),e.C$Y()(),e.I0R(13,"div",12)(14,"button",13),e.qCj("click",function(){return s.createBequest("bequest")}),e.wR5(15,"mat-icon",14),e.I0R(16,"span",15),e.OEk(17,"Add Bequest"),e.C$Y()(),e.I0R(18,"button",16),e.wR5(19,"mat-icon",14),e.I0R(20,"span",15),e.OEk(21,"Export"),e.C$Y()(),e.I0R(22,"mat-menu",null,17)(24,"button",18),e.wR5(25,"mat-icon",19),e.I0R(26,"span"),e.OEk(27,"as PDF"),e.C$Y()(),e.I0R(28,"button",18),e.wR5(29,"mat-icon",19),e.I0R(30,"span"),e.OEk(31,"as XLS"),e.C$Y()()()()()()(),e.wR5(32,"BequestChart")(33,"bequest-table"),e.C$Y()()()()),2&i){const o=e.Gew(23);e.yG2(2),e.E7m("mode",s.drawerMode)("opened",!1)("position","end")("disableClose",!0),e.yG2(12),e.E7m("color","primary"),e.yG2(),e.E7m("svgIcon","heroicons_outline:plus"),e.yG2(3),e.E7m("matMenuTriggerFor",o)("color","primary"),e.yG2(),e.E7m("svgIcon","heroicons_solid:arrow-up-tray"),e.yG2(6),e.E7m("svgIcon","heroicons_outline:document-text"),e.yG2(4),e.E7m("svgIcon","heroicons_outline:document-text")}},dependencies:[m.MD,u.cP,ge,z,k.kJ,k.IZ,C.oB,C.qL,R.KE,c._A,c.aM,c.OQ,c.yG,D.WG,y.ue,I.G,d.If,f.oJ,f.Gw,G.KO,w.sb,w.Iz,w.G4,w.q0],encapsulation:2,changeDetection:0})}return n})();var Ce=a(4248);const ye=["titleField"];function xe(n,r){if(1&n&&(e.SAx(0),e.OEk(1),e.wVc(2,"date"),e.k70()),2&n){const t=e.GaO();e.yG2(),e.cNF(e.g7$(2,1,null==t.bequest?null:t.bequest.dueDate,"longDate"))}}function Re(n,r){1&n&&(e.SAx(0),e.OEk(1,"Not set"),e.k70())}const F=()=>["../"],ke=(n,r,t)=>({"text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700":n,"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":r,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":t});let Ie=(()=>{class n{constructor(t,i,s,o,l,h,g,Ge,Ee,_e){this._activatedRoute=t,this._changeDetectorRef=i,this._formBuilder=s,this._fuseConfirmationService=o,this._renderer2=l,this._router=h,this._bequestManagementComponent=g,this._bequestService=Ge,this._overlay=Ee,this._viewContainerRef=_e,this._unsubscribeAll=new q.E}ngOnInit(){this._bequestManagementComponent.matDrawer.open(),console.log("sssdlkvsjdvlksdksjdov joi"),this.bequestForm=this._formBuilder.group({id:[""],name:[""],executor:[""],description:[""],dueDate:[null],Beneficiaries:[0]}),this._bequestService.bequests$.pipe((0,b.a)(this._unsubscribeAll)).subscribe(t=>{this.bequests=t,this._changeDetectorRef.markForCheck()}),this._bequestService.bequest$.pipe((0,b.a)(this._unsubscribeAll)).subscribe(t=>{this._bequestManagementComponent.matDrawer.open(),this.bequest=t,this.bequestForm.patchValue(t,{emitEvent:!1}),this._changeDetectorRef.markForCheck()}),this.bequestForm.valueChanges.pipe((0,j.y)(t=>{this.bequest=(0,N.c)(this.bequest,t)}),(0,L.o)(300),(0,b.a)(this._unsubscribeAll)).subscribe(t=>{this._bequestService.updateBequest(t.id,t).subscribe(),this._changeDetectorRef.markForCheck()}),this._router.events.pipe((0,b.a)(this._unsubscribeAll),(0,J.I)(t=>t instanceof u.MT)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDrawer(){return this._bequestManagementComponent.matDrawer.close()}addNewBequest(){}toggleCompleted(){const t=this.bequestForm.get("completed");t.setValue(!t.value)}isOverdue(){return S.CS.fromISO(this.bequest.dueDate).startOf("day")<S.CS.now().startOf("day")}deleteBequest(){this._fuseConfirmationService.open({title:"Delete bequest",message:"Are you sure you want to delete this bequest? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if("confirmed"===i){const s=this.bequest.id,o=this.bequests.findIndex(g=>g.id===s),h=1===this.bequests.length&&this.bequests[0].id===s?null:this.bequests[o+(o===this.bequests.length-1?-1:1)].id;this._bequestService.deleteBequest(s).subscribe(g=>{g&&this._router.navigate(h?["../",h]:["../"],{relativeTo:this._activatedRoute})}),this._changeDetectorRef.markForCheck()}})}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.GI1(u.gV),e.GI1(e.kD9),e.GI1(p.KE),e.GI1(P.q),e.GI1(e.q87),e.GI1(u.E5),e.GI1(A),e.GI1(v.a),e.GI1(Ce.mc),e.GI1(e.y8U))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["bequest-details"]],viewQuery:function(i,s){if(1&i&&e.CC$(ye,5),2&i){let o;e.wto(o=e.Gqi())&&(s._titleField=o.first)}},standalone:!0,features:[e.UHJ],decls:60,vars:31,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","gap-3","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],["mat-button","",1,"pr-4","pl-3.5"],[1,"flex","items-center","justify-center"],[1,"ml-2","font-semibold"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","",3,"routerLink"],[1,"mt-6","mb-8"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"formControlName","spellcheck"],["titleField",""],[1,"flex","flex-wrap","items-center","mt-8"],[1,"ml-6"],[1,"font-medium"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer",3,"ngClass","click"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[4,"ngIf"],[1,"fuse-mat-dense","invisible","absolute","inset-0","-mt-2.5","opacity-0","pointer-events-none",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["dueDatePicker",""],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",1,"",3,"color"],[1,"mt-8"],[1,"flex","justify-end","items-end","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",3,"color","click"],[1,"ml-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3","bg-gray-200",3,"routerLink"]],template:function(i,s){if(1&i){const o=e.KQA();e.I0R(0,"div",0)(1,"form",1)(2,"div",2)(3,"button",3)(4,"div",4)(5,"span",5),e.OEk(6,"Create Bequest"),e.C$Y()()(),e.I0R(7,"div",6)(8,"button",7),e.wR5(9,"mat-icon",8),e.C$Y(),e.I0R(10,"mat-menu",null,9)(12,"button",10),e.qCj("click",function(){return s.deleteBequest()}),e.wR5(13,"mat-icon",8),e.I0R(14,"span"),e.OEk(15,"Delete"),e.C$Y()()(),e.I0R(16,"a",11),e.wR5(17,"mat-icon",8),e.C$Y()()(),e.wR5(18,"mat-divider",12),e.I0R(19,"div")(20,"mat-form-field",13)(21,"mat-label"),e.OEk(22,"Name"),e.C$Y(),e.wR5(23,"textarea",14,15),e.C$Y()(),e.I0R(25,"div")(26,"mat-form-field",13)(27,"mat-label"),e.OEk(28,"Executor"),e.C$Y(),e.wR5(29,"textarea",14),e.C$Y()(),e.I0R(30,"div",16)(31,"div",17)(32,"div",18),e.OEk(33,"Due date"),e.C$Y(),e.I0R(34,"div",19),e.qCj("click",function(){e.usT(o);const h=e.Gew(42);return e.CGJ(h.open())}),e.wR5(35,"mat-icon",20),e.I0R(36,"span",21),e.yuY(37,xe,3,4,"ng-container",22)(38,Re,2,0,"ng-container",22),e.C$Y(),e.I0R(39,"mat-form-field",23),e.wR5(40,"input",24),e.I0R(41,"mat-datepicker",null,25)(43,"mat-datepicker-actions")(44,"button",26),e.qCj("click",function(){return s.bequestForm.get("dueDate").setValue(null)}),e.OEk(45," Clear "),e.C$Y(),e.I0R(46,"button",27),e.OEk(47," Select "),e.C$Y()()()()()()(),e.I0R(48,"div",28)(49,"mat-form-field",13)(50,"mat-label"),e.OEk(51,"Description"),e.C$Y(),e.wR5(52,"textarea",14),e.C$Y()(),e.I0R(53,"div",29)(54,"button",30),e.qCj("click",function(){return s.addNewBequest()}),e.I0R(55,"span",31),e.OEk(56,"Save"),e.C$Y()(),e.I0R(57,"button",32)(58,"span",31),e.OEk(59,"Cancel"),e.C$Y()()()()()}if(2&i){const o=e.Gew(11),l=e.Gew(42);e.yG2(),e.E7m("formGroup",s.bequestForm),e.yG2(7),e.E7m("matMenuTriggerFor",o),e.yG2(),e.E7m("svgIcon","heroicons_outline:ellipsis-vertical"),e.yG2(4),e.E7m("svgIcon","heroicons_outline:trash"),e.yG2(3),e.E7m("routerLink",e.q4q(25,F)),e.yG2(),e.E7m("svgIcon","heroicons_outline:x-mark"),e.yG2(3),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("formControlName","name")("spellcheck",!1),e.yG2(3),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("formControlName","executor")("spellcheck",!1),e.yG2(5),e.E7m("ngClass",e.uAc(26,ke,!(null!=s.bequest&&s.bequest.dueDate),(null==s.bequest?null:s.bequest.dueDate)&&!s.isOverdue(),(null==s.bequest?null:s.bequest.dueDate)&&s.isOverdue())),e.yG2(),e.E7m("svgIcon","heroicons_solid:calendar"),e.yG2(2),e.E7m("ngIf",null==s.bequest?null:s.bequest.dueDate),e.yG2(),e.E7m("ngIf",!(null!=s.bequest&&s.bequest.dueDate)),e.yG2(),e.E7m("subscriptSizing","dynamic"),e.yG2(),e.E7m("formControlName","dueDate")("matDatepicker",l),e.yG2(6),e.E7m("color","primary"),e.yG2(3),e.E7m("subscriptSizing","dynamic"),e.yG2(3),e.E7m("formControlName","description")("spellcheck",!1),e.yG2(2),e.E7m("color","primary"),e.yG2(3),e.E7m("routerLink",e.q4q(30,F))}},dependencies:[p.y,p.sz,p.ot,p.ue,p.u,p.sl,p.uW,p.Wo,f.oJ,f.Gw,f.cP,f.um,m.u_,C.oB,C.qL,c._A,c.aM,c.OQ,c.yG,u.ER,O.U,O.k,E.wb,E.Up,E.w5,Y.cN,Y.yi,$.Qn,$.aC,R.KE,V.Vn,m.QF,x.iU,x.SU,x.Ul,x._C,x.o9,x.Y3,m.y],encapsulation:2,changeDetection:0})}return n})();var we=a(7030),qe=a(6936);const De=[{path:"",component:U,resolve:{},children:[{path:"",component:A,resolve:{data:()=>(0,e.uUt)(v.a).getData()},children:[{path:":id",component:Ie,resolve:{create:()=>(0,e.uUt)(v.a).getData(),bequest:(n,r)=>{const t=(0,e.uUt)(v.a),i=(0,e.uUt)(u.E5);return t.getbequestById(n.paramMap.get("id")).pipe((0,we.a)(s=>{console.error(s);const o=r.url.split("/").slice(0,-1).join("/");return i.navigateByUrl(o),(0,qe.c)(s)}))}},canDeactivate:[(n,r,t,i)=>{let s=i.root;for(;s.firstChild;)s=s.firstChild;return!(i.url.includes("/bequest")&&!s.paramMap.get("id"))||(console.log("found Error in drawer "),n.closeDrawer().then(()=>!0))}]}]}]}]}}]);