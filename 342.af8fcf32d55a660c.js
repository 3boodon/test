"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[342],{9104:(Ht,M,c)=>{c.r(M),c.d(M,{default:()=>zt});var t=c(6568),y=c(9240),O=c(7030),F=c(6936),f=c(3848);let X=(()=>{class o{constructor(){}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["lands"]],standalone:!0,features:[t.UHJ],decls:1,vars:0,template:function(n,r){1&n&&t.wR5(0,"router-outlet")},dependencies:[f.MD,y.cP],encapsulation:2,changeDetection:0})}return o})();var A=c(8608),D=c(6820),I=c(4320),v=c(4832),w=c(6764),G=c(6272),$=c(1952),z=c(6488),Q=c(5528),K=c(4088);let E=(()=>{class o{constructor(e,n){this._httpClient=e,this._wealthApi=n,this._land=new A.g(null),this._lands=new A.g(null),this._unsubscribeAll=new D.E,this._landId=new A.g(null),this.baseUrl="your-api-url"}get land$(){return this._land.asObservable()}get lands$(){return this._lands.asObservable()}get landId$(){return this._landId.asObservable()}getLands(e="mock"){return this._wealthApi.getLands("base").pipe((0,I.y)(n=>{console.log(n),this._lands.next(n)}))}updateLand(e,n,r="mock"){return this.lands$.pipe((0,v.U)(1),(0,w.G)("mock"===r?i=>this._httpClient.patch("api/debt-management/land",{id:e,land:n}).pipe((0,G.k)(a=>{const m=i.findIndex(_=>_.id===e);return i[m]=a,this._lands.next(i),a}),(0,w.G)(a=>this.land$.pipe((0,v.U)(1),(0,$.I)(m=>m&&m.id===e),(0,I.y)(()=>(this._land.next(a),a))))):i=>this._wealthApi.patchland("base",{id:e,land:n}).pipe((0,G.k)(a=>{const m=i.findIndex(_=>_.id===e);return i[m]=a,this._lands.next(i),a}),(0,w.G)(a=>this.land$.pipe((0,v.U)(1),(0,$.I)(m=>m&&m.id===e),(0,I.y)(()=>(this._land.next(a),a)))))))}deleteLand(e){return this.lands$.pipe((0,v.U)(1),(0,w.G)(n=>this._httpClient.delete("api/debt-management/debt",{params:{id:e}}).pipe((0,G.k)(r=>{const i=n.findIndex(a=>a.id===e);return n.splice(i,1),this._lands.next(n),r}))))}createLand(e,n="mock"){const r=e;return this.lands$.pipe((0,v.U)(1),(0,w.G)("base"==n?i=>this._wealthApi.postland("base",r).pipe((0,G.k)(a=>(console.log("newland ",a),this._lands.next([a,...i]),a))):i=>this._httpClient.post("api/debt-management/debt",{landData:e}).pipe((0,G.k)(a=>(this._lands.next([a,...i]),a)))))}getLandById(e="mock",n){return this._wealthApi.getLandByID("base",n).pipe((0,v.U)(1),(0,G.k)(r=>(console.log(r),this._landId.next(r),r)),(0,w.G)(r=>r?(0,z.of)(r):(0,F.c)("Could not found land with id of "+n+"!")))}getCountries(e="mock"){return this._httpClient.get("mock"===e?"api/Country":"https://alwasiah-001-site1.btempurl.com/api/Country").pipe((0,I.y)(r=>{console.log("Countries:",r)}),(0,O.a)(r=>(console.error("Error fetching countries:",r),(0,F.c)("Failed to fetch countries"))))}getCities(e="mock"){return this._httpClient.get("mock"===e?"api/City":"https://alwasiah-001-site1.btempurl.com/api/City").pipe((0,I.y)(r=>{console.log("Cities:",r)}),(0,O.a)(r=>(console.error("Error fetching cities:",r),(0,F.c)("Failed to fetch cities"))))}getDistricts(e="mock"){return this._httpClient.get("mock"===e?"api/District":"https://alwasiah-001-site1.btempurl.com/api/District").pipe((0,I.y)(r=>{console.log("Districts:",r)}),(0,O.a)(r=>(console.error("Error fetching districts:",r),(0,F.c)("Failed to fetch districts"))))}static#t=this.\u0275fac=function(n){return new(n||o)(t.CoB(Q.KK),t.CoB(K.u))};static#e=this.\u0275prov=t.wxM({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var P=c(6924),l=c(4332),h=c(9512),U=c(7280),L=c(7804),d=c(568),Y=c(3024),u=c(6300),b=c(2556),g=c(8083),k=c(6524),H=c(3148),R=c(8168),W=c(8616),p=c(8240),Z=c(4864),q=c(6752),C=c(324),tt=c(9020),et=c(3328),S=c(6312);const nt=["matDrawer"];function ot(o,s){if(1&o&&(t.SAx(0),t.OEk(1),t.k70()),2&o){const e=t.GaO(2);t.yG2(),t.oRS(" ",e.landCount," ")}}const rt=(o,s,e,n,r,i,a,m,_,Qt,Kt,Pt)=>({"=0":o,"=1":s,"=2":e,"=3":n,"=4":r,"=5":i,"=6":a,"=7":m,"=8":_,"=9":Qt,"=10":Kt,other:Pt});function it(o,s){if(1&o&&(t.SAx(0),t.I0R(1,"div",14),t.OEk(2),t.C$Y(),t.I0R(3,"div",15),t.yuY(4,ot,2,1,"ng-container",16),t.OEk(5),t.wVc(6,"i18nPlural"),t.C$Y(),t.k70()),2&o){const e=s.$implicit,n=t.GaO();t.yG2(2),t.oRS(" ",e("Lands")," "),t.yG2(2),t.E7m("ngIf",n.landCount>0),t.yG2(),t.oRS(" ",t.g7$(6,3,n.landCount,t.gFU(6,rt,[e("NoLands"),e("Land"),e("lands"),e("lands"),e("lands"),e("lands"),e("lands"),e("lands"),e("lands"),e("lands"),e("lands"),e("Land")]))," ")}}function at(o,s){if(1&o){const e=t.KQA();t.SAx(0),t.I0R(1,"div",17)(2,"button",18),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.addland())}),t.wR5(3,"mat-icon",19),t.I0R(4,"span",20),t.OEk(5),t.C$Y()(),t.I0R(6,"button",21),t.wR5(7,"mat-icon",19),t.I0R(8,"span",20),t.OEk(9),t.C$Y()(),t.I0R(10,"mat-menu",null,22)(12,"button",23),t.wR5(13,"mat-icon",24),t.I0R(14,"span"),t.OEk(15),t.C$Y()(),t.I0R(16,"button",23),t.wR5(17,"mat-icon",24),t.I0R(18,"span"),t.OEk(19),t.C$Y()()()(),t.k70()}if(2&o){const e=s.$implicit,n=t.Gew(11);t.yG2(2),t.E7m("color","primary"),t.yG2(),t.E7m("svgIcon","heroicons_outline:plus"),t.yG2(2),t.cNF(e("AddLand")),t.yG2(),t.E7m("matMenuTriggerFor",n)("color","primary"),t.yG2(),t.E7m("svgIcon","heroicons_solid:arrow-up-tray"),t.yG2(2),t.cNF(e("Export")),t.yG2(4),t.E7m("svgIcon","heroicons_outline:document-text"),t.yG2(2),t.oRS("",e("as")," PDF"),t.yG2(2),t.E7m("svgIcon","heroicons_outline:document-text"),t.yG2(2),t.oRS("",e("as")," XLS")}}function st(o,s){if(1&o){const e=t.KQA();t.SAx(0),t.I0R(1,"div",25)(2,"mat-form-field",26),t.wR5(3,"mat-icon",27),t.I0R(4,"input",28,29),t.qCj("input",function(){t.usT(e);const r=t.Gew(5),i=t.GaO();return t.CGJ(i.filterLands(r.value))}),t.C$Y()()(),t.k70()}if(2&o){const e=s.$implicit;t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("svgIcon","heroicons_solid:magnifying-glass"),t.yG2(),t.E7m("autocomplete","off")("placeholder",e("Search"))}}function lt(o,s){if(1&o&&(t.I0R(0,"th",45),t.OEk(1),t.C$Y()),2&o){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",e("Location")," ")}}const ct=(o,s,e,n)=>({"bg-blue-500":o,"bg-red-500":s,"bg-green-500":e,"bg-yellow-500":n});function dt(o,s){if(1&o){const e=t.KQA();t.I0R(0,"td",46),t.qCj("click",function(){const i=t.usT(e).$implicit,a=t.GaO(2);return t.CGJ(a.clickedRows(i))}),t.I0R(1,"span",47),t.wR5(2,"span",48),t.I0R(3,"span",49),t.OEk(4),t.C$Y()()()}if(2&o){const e=s.$implicit;t.yG2(2),t.E7m("ngClass",t.WuN(2,ct,e.id<=4,e.id>=6&&e.id<=9,e.id<=10&&e.id>=5,e.id>=11)),t.yG2(2),t.cNF(e.location)}}function mt(o,s){if(1&o&&(t.I0R(0,"th",45),t.OEk(1),t.C$Y()),2&o){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",e("AreaInSquareMeters")," ")}}function ut(o,s){if(1&o){const e=t.KQA();t.I0R(0,"td",50),t.qCj("click",function(){const i=t.usT(e).$implicit,a=t.GaO(2);return t.CGJ(a.clickedRows(i))}),t.I0R(1,"span",51),t.OEk(2),t.C$Y()()}if(2&o){const e=s.$implicit;t.yG2(2),t.oRS(" ",e.areaInSquareMeters," ")}}function pt(o,s){if(1&o&&(t.I0R(0,"th",45),t.OEk(1),t.C$Y()),2&o){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",e("Surveyor")," ")}}function ht(o,s){if(1&o){const e=t.KQA();t.I0R(0,"td",50),t.qCj("click",function(){const i=t.usT(e).$implicit,a=t.GaO(2);return t.CGJ(a.clickedRows(i))}),t.I0R(1,"span",51),t.OEk(2),t.C$Y()()}if(2&o){const e=s.$implicit;t.yG2(2),t.oRS(" ",e.surveyor," ")}}function ft(o,s){if(1&o&&(t.I0R(0,"th",52),t.OEk(1),t.C$Y()),2&o){const e=t.GaO().$implicit;t.yG2(),t.cNF(e("Edit"))}}function gt(o,s){if(1&o){const e=t.KQA();t.I0R(0,"td",53),t.qCj("click",function(){const i=t.usT(e).$implicit,a=t.GaO(2);return t.CGJ(a.aditLand(i))}),t.I0R(1,"button",54),t.wR5(2,"mat-icon",55),t.C$Y()()}}function Ct(o,s){1&o&&t.wR5(0,"tr",56)}function _t(o,s){1&o&&t.wR5(0,"tr",57)}function yt(o,s){if(1&o&&(t.SAx(0),t.I0R(1,"div",30)(2,"div",31),t.OEk(3),t.C$Y(),t.I0R(4,"div",32)(5,"table",33),t.SAx(6,34),t.yuY(7,lt,2,1,"th",35)(8,dt,5,7,"td",36),t.k70(),t.SAx(9,37),t.yuY(10,mt,2,1,"th",35)(11,ut,3,1,"td",38),t.k70(),t.SAx(12,39),t.yuY(13,pt,2,1,"th",35)(14,ht,3,1,"td",38),t.k70(),t.SAx(15,40),t.yuY(16,ft,2,1,"th",41)(17,gt,3,0,"td",42),t.k70(),t.yuY(18,Ct,1,0,"tr",43)(19,_t,1,0,"tr",44),t.C$Y()()(),t.k70()),2&o){const e=s.$implicit,n=t.GaO();t.yG2(3),t.oRS(" ",e("Lands")," "),t.yG2(2),t.E7m("dataSource",n.data),t.yG2(13),t.E7m("matHeaderRowDef",n.displayedColumns),t.yG2(),t.E7m("matRowDefColumns",n.displayedColumns)}}let J=(()=>{class o{constructor(e,n,r,i){this._landsService=e,this._changeDetectorRef=n,this._router=r,this._activatedRoute=i,this.searchInputControl=new l.yM,this.displayedColumns=["location","areaInSquareMeters","surveyor","details"],this.landCount=0,this._unsubscribeAll=new D.E,this.landsData=[],this.landgCount=0}ngOnInit(){this._landsService.getLands("base").pipe((0,R.a)(this._unsubscribeAll)).subscribe(e=>{this.data=e,this.search=e,this.landCount=e.length,this._changeDetectorRef.markForCheck()})}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}clickedRows(e){this._router.navigate(["./",e.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}closeDrawer(){return null}addland(){this._router.navigate(["./","add-land"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}aditLand(e){this._router.navigate(["./","edit-land",e.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}filterLands(e){this.data=e?this.search.filter(n=>n.location.toLowerCase().includes(e.toLowerCase())):this.search}trackByFn(e,n){return n.id||e}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(E),t.GI1(t.kD9),t.GI1(y.E5),t.GI1(y.gV))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["lands-table"]],viewQuery:function(n,r){if(1&n&&t.CC$(nt,7),2&n){let i;t.wto(i=t.Gqi())&&(r.matDrawer=i.first)}},standalone:!0,features:[t.UHJ],decls:18,vars:4,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-128","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-8","sm:my-8"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex","flex-col","min-w-0","ml-4"],[4,"transloco"],[1,"w-full","max-w-screen-xl","mx-auto","p-4","lg:p-6"],[1,"grid","grid-cols-1","gap-8","w-full"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-6","sm:mt-0","sm:ml-2","space-x-3"],["mat-flat-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"matMenuTriggerFor","color"],["moreMenu","matMenu"],["mat-menu-item",""],[3,"svgIcon"],[1,"flex-auto","mb-8"],[1,"fuse-mat-rounded","fuse-mat-dense","w-full",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder","input"],["searchField",""],[1,"col-span2","flex","flex-col","flex-auto","px-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto","mat-mdc-my-table"],["mat-table","",1,"min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","location","sticky",""],["mat-header-cell","","class","bg-header-table",4,"matHeaderCellDef"],["mat-cell","","class","",3,"click",4,"matCellDef"],["matColumnDef","areaInSquareMeters"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","surveyor"],["matColumnDef","details"],["mat-header-cell","","class","bg-header-table border-none border-b-0",4,"matHeaderCellDef"],["mat-cell","","class","p-0",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","hover:cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"bg-header-table"],["mat-cell","",1,"",3,"click"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"ml-3","leading-4"],["mat-cell","",3,"click"],[1,"font-medium","text-right"],["mat-header-cell","",1,"bg-header-table","border-none","border-b-0"],["mat-cell","",1,"p-0",3,"click"],["mat-stroked-button","",1,"border-none","border-b-0","z-1"],["svgIcon","heroicons_mini:pencil-square",1,"border-none","border-b-0"],["mat-header-row",""],["mat-row","",1,"hover:cursor-pointer"]],template:function(n,r){1&n&&(t.I0R(0,"div",0)(1,"mat-drawer-container",1),t.qCj("backdropClick",function(){return r.onBackdropClicked()}),t.I0R(2,"mat-drawer",2,3),t.wR5(4,"router-outlet"),t.C$Y(),t.I0R(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),t.yuY(12,it,7,19,"ng-container",11),t.C$Y()(),t.yuY(13,at,20,11,"ng-container",11),t.C$Y(),t.yuY(14,st,6,4,"ng-container",11),t.C$Y()(),t.I0R(15,"div",12)(16,"div",13),t.yuY(17,yt,20,4,"ng-container",11),t.C$Y()()()()()()),2&n&&(t.yG2(2),t.E7m("mode",r.drawerMode)("opened",!1)("position","end")("disableClose",!0))},dependencies:[p.kJ,p.IZ,b.oB,b.qL,h.oJ,h.Gw,L.KE,k._A,k.aM,k.OQ,k.yG,et.w5,q.ue,tt.G,S.sb,S.Iz,S.G4,S.q0,f.u_,C.If,C.wL,C.ie,C.aG,C.Af,C.uc,C.gx,C.qC,C.cX,C.yC,C._I,f.QF,y.cP,l.sl,g.cN,g.yi,u.Up,u.is,f.od],encapsulation:2,changeDetection:0})}return o})();const bt=["titleField"];function vt(o,s){if(1&o&&(t.I0R(0,"div")(1,"div",29)(2,"div")(3,"mat-form-field",30)(4,"mat-label"),t.OEk(5),t.wVc(6,"transloco"),t.C$Y(),t.wR5(7,"input",31),t.C$Y()(),t.I0R(8,"div")(9,"mat-form-field",30)(10,"mat-label"),t.OEk(11),t.wVc(12,"transloco"),t.C$Y(),t.wR5(13,"input",31),t.C$Y()(),t.I0R(14,"div",32)(15,"mat-form-field",30)(16,"mat-label"),t.OEk(17),t.wVc(18,"transloco"),t.C$Y(),t.wR5(19,"input",33)(20,"mat-datepicker-toggle",34),t.I0R(21,"mat-datepicker",35,36)(23,"mat-datepicker-actions")(24,"button",37),t.OEk(25),t.wVc(26,"transloco"),t.C$Y(),t.I0R(27,"button",38),t.OEk(28),t.wVc(29,"transloco"),t.C$Y()()()()()()()),2&o){const e=t.Gew(22),n=t.GaO().$implicit;t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(6,13,"Seller")),t.yG2(2),t.E7m("formControl",n.get("seller")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(12,15,"Seller")),t.yG2(2),t.E7m("formControl",n.get("seller")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(2),t.cNF(t.kDX(18,17,"Ownership-Date")),t.yG2(2),t.E7m("matDatepicker",e)("formControl",n.get("ownershipDate")),t.yG2(),t.E7m("for",e),t.yG2(5),t.cNF(t.kDX(26,19,"Cancel")),t.yG2(3),t.cNF(t.kDX(29,21,"Apply"))}}function wt(o,s){if(1&o){const e=t.KQA();t.SAx(0),t.I0R(1,"div",23)(2,"mat-label",24),t.qCj("click",function(){const i=t.usT(e).index,a=t.GaO();return t.CGJ(a.toggleOwner(i))}),t.OEk(3),t.wVc(4,"transloco"),t.C$Y(),t.I0R(5,"div",25)(6,"button",26),t.qCj("click",function(){const i=t.usT(e).index,a=t.GaO();return t.CGJ(a.toggleOwner(i))}),t.wR5(7,"mat-icon",27),t.C$Y()(),t.wR5(8,"mat-divider"),t.yuY(9,vt,30,23,"div",28),t.C$Y(),t.k70()}if(2&o){const e=s.index,n=t.GaO();t.yG2(3),t.CAO(" ",t.kDX(4,4,"ViewOwnerData")," : ",e+1," "),t.yG2(4),t.E7m("svgIcon",n.showOwnersIndex===e?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.yG2(2),t.E7m("ngIf",n.showOwnersIndex===e)}}function kt(o,s){1&o&&(t.I0R(0,"mat-label"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&o&&(t.yG2(),t.cNF(t.kDX(2,1,"Description")))}function It(o,s){1&o&&(t.I0R(0,"mat-label"),t.OEk(1),t.wVc(2,"transloco"),t.C$Y()),2&o&&(t.yG2(),t.oRS(" ",t.kDX(2,1,"PathFile"),""))}function Gt(o,s){if(1&o&&(t.I0R(0,"div",29)(1,"div",29)(2,"div",32)(3,"mat-form-field",30),t.yuY(4,kt,3,3,"mat-label",28),t.wR5(5,"input",31),t.C$Y()(),t.I0R(6,"div",32)(7,"mat-form-field",30),t.yuY(8,It,3,3,"mat-label",28),t.wR5(9,"input",31),t.C$Y()()()()),2&o){const e=t.GaO(),n=e.first,r=e.$implicit;t.yG2(3),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("ngIf",n),t.yG2(),t.E7m("formControl",r.get("description")),t.yG2(2),t.E7m("subscriptSizing","dynamic"),t.yG2(),t.E7m("ngIf",n),t.yG2(),t.E7m("formControl",r.get("pathFile"))}}function Rt(o,s){if(1&o){const e=t.KQA();t.SAx(0),t.I0R(1,"div",23)(2,"mat-label",24),t.qCj("click",function(){const i=t.usT(e).index,a=t.GaO();return t.CGJ(a.toggleRestriction(i))}),t.OEk(3),t.wVc(4,"transloco"),t.C$Y(),t.I0R(5,"div",25)(6,"button",26),t.qCj("click",function(){const i=t.usT(e).index,a=t.GaO();return t.CGJ(a.toggleRestriction(i))}),t.wR5(7,"mat-icon",27),t.C$Y()(),t.wR5(8,"mat-divider"),t.yuY(9,Gt,10,6,"div",39),t.C$Y(),t.k70()}if(2&o){const e=s.index,n=t.GaO();t.yG2(3),t.CAO(" ",t.kDX(4,4,"ViewRestrictionData"),": ",e+1," "),t.yG2(4),t.E7m("svgIcon",n.showRestrictionIndex===e?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.yG2(2),t.E7m("ngIf",n.showRestrictionIndex===e)}}const xt=()=>["../"];let Ft=(()=>{class o{constructor(e,n,r,i,a,m,_){this._activatedRoute=e,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=i,this._router=a,this._landsTableComponent=m,this._landsService=_,this._unsubscribeAll=new D.E,this.hiddedButton=!0,this.hiddenOwner=!1,this.hiddenRestriction=!1,this.showOwnersIndex=-1,this.showRestrictionIndex=-1,this.editMode=!1}ngOnInit(){this._landsTableComponent.matDrawer.open(),this.createLandForm(),this.getDataLands()}createLandForm(){this.landForm=this._formBuilder.group({location:[""],areaInSquareMeters:[400],surveyor:[""],userId:[1080],assetId:[3],owners:this._formBuilder.array([this.createOwner()]),restrictions:this._formBuilder.array([this.createRestriction()])});const e=this.landForm.controls;Object.keys(e).forEach(n=>{e[n].disable()})}getDataLands(){this._landsService.landId$.pipe((0,R.a)(this._unsubscribeAll)).subscribe(e=>{this.landForm.patchValue(e,{emitEvent:!1}),this._changeDetectorRef.markForCheck(),this.toggleEditMode(!1),e.owners.length<=0&&(this.hiddenOwner=!0),e.restrictions.length<=0&&(this.hiddenRestriction=!0)})}updataLand(){this.landForm.valueChanges.pipe((0,I.y)(e=>{this.land=(0,H.c)(this.land,e)}),(0,W.o)(300),(0,R.a)(this._unsubscribeAll)).subscribe(e=>{this._changeDetectorRef.markForCheck()}),this._router.events.pipe((0,R.a)(this._unsubscribeAll),(0,$.I)(e=>e instanceof y.MT)).subscribe(()=>{this._titleField.nativeElement.focus()})}createOwner(){return this._formBuilder.group({landId:[0],ownershipDate:[new Date,{disabled:!0}],seller:[" "],buyer:[""],userId:[1080]})}createRestriction(){return this._formBuilder.group({description:[""],pathFile:[""],landId:[0]})}get ownerArray(){return this.landForm.get("owners")}get restrictionArray(){return this.landForm.get("restrictions")}addForm(e){"owner"==e?this.ownerArray.push(this.createOwner()):this.restrictionArray.push(this.createRestriction())}removeForm(e,n){"owner"==n?this.ownerArray.removeAt(e):this.restrictionArray.removeAt(e)}toggleEditMode(e=null){this.editMode=null===e?!this.editMode:e,this._changeDetectorRef.markForCheck()}onSubmit(){this.landForm.valid?this._landsService.createLand(this.landForm.value,"base").subscribe(n=>{console.log("Post successful:",n),this.closeDrawer(),this._router.navigate(["../"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()},n=>{console.error("Error:",n)}):console.error("Form is invalid")}deleteLand(){this._fuseConfirmationService.open({title:"Delete Land",message:"Are you sure you want to delete this Land? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(n=>{if("confirmed"===n){const r=this.land.id,i=this.lands.findIndex(_=>_.id===r),m=1===this.lands.length&&this.lands[0].id===r?null:this.lands[i+(i===this.lands.length-1?-1:1)].id;this._landsService.deleteLand(r).subscribe(_=>{_&&this._router.navigate(m?["../",m]:["../"],{relativeTo:this._activatedRoute})}),this._changeDetectorRef.markForCheck()}})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._changeDetectorRef.markForCheck(),this._landsService.getLands().subscribe(e=>{this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._landsTableComponent.matDrawer.openedChange.pipe((0,R.a)(this._unsubscribeAll),(0,$.I)(e=>e)).subscribe(()=>{})}closeDrawer(){return this._landsTableComponent.matDrawer.close()}toggleOwner(e){this.showOwnersIndex=this.showOwnersIndex===e?-1:e}toggleRestriction(e){this.showRestrictionIndex=this.showRestrictionIndex===e?-1:e}trackByFn(e,n){return n.id||e}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(y.gV),t.GI1(t.kD9),t.GI1(l.KE),t.GI1(Z.q),t.GI1(y.E5),t.GI1(J),t.GI1(E))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["details-lands"]],viewQuery:function(n,r){if(1&n&&t.CC$(bt,5),2&n){let i;t.wto(i=t.Gqi())&&(r._titleField=i.first)}},standalone:!0,features:[t.UHJ],decls:59,vars:32,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],[1,"flex","items-center"],["mat-icon-button","",1,"hover:text-blue-500","focus:outline-none",3,"matMenuTriggerFor"],[1,"text-gray-700"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"ml-2"],["mat-icon-button","",1,"hover:text-blue-500","focus:outline-none",3,"routerLink"],[1,"mt-6","mb-4"],[1,"card","px-4"],[1,"w-full","mt-4"],["matInput","","spellcheck","false",3,"formControlName"],[3,"hidden"],[1,"group","inline-flex","items-center","-ml-4","pb-2","px-4","rounded"],[1,"ml-2","font-medium","text-gray-950"],[1,"card","pb-4","px-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4"],["type","submit","mat-button","",1,"mt-6"],[1,"flex","items-center","justify-center"],[1,"font-semibold",3,"click"],[1,"mt-4"],[1,"text-xl","font-semibold","hover:cursor-pointer","hover:underline",3,"click"],[1,"inline","-m-2",2,"float","right"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[4,"ngIf"],[1,""],[1,"w-full","mt-2",3,"subscriptSizing"],["matInput","",3,"formControl"],[1,"mt-2"],["matInput","","placeholder","Choose a date",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["disabled","true"],["ownershipDate",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],["class","",4,"ngIf"]],template:function(n,r){if(1&n&&(t.SAx(0),t.I0R(1,"div",0)(2,"form",1)(3,"div",2)(4,"div",3)(5,"button",4)(6,"mat-icon",5),t.OEk(7,"more_vert"),t.C$Y()(),t.I0R(8,"mat-menu",null,6)(10,"button",7),t.qCj("click",function(){return r.deleteLand()}),t.I0R(11,"mat-icon",5),t.OEk(12,"delete"),t.C$Y(),t.I0R(13,"span",8),t.OEk(14),t.wVc(15,"transloco"),t.C$Y()()(),t.I0R(16,"a",9)(17,"mat-icon",5),t.OEk(18,"close"),t.C$Y()()()(),t.wR5(19,"mat-divider",10),t.I0R(20,"div",11)(21,"div")(22,"mat-form-field",12)(23,"mat-label"),t.OEk(24),t.wVc(25,"transloco"),t.C$Y(),t.wR5(26,"input",13),t.C$Y()(),t.I0R(27,"div")(28,"mat-form-field",12)(29,"mat-label"),t.OEk(30),t.wVc(31,"transloco"),t.C$Y(),t.wR5(32,"input",13),t.C$Y()(),t.I0R(33,"div")(34,"mat-form-field",12)(35,"mat-label"),t.OEk(36),t.C$Y(),t.wR5(37,"input",13),t.C$Y()()(),t.SAx(38),t.I0R(39,"div",14)(40,"div",15)(41,"span",16),t.OEk(42),t.wVc(43,"transloco"),t.C$Y()(),t.I0R(44,"div",17),t.yuY(45,wt,10,6,"ng-container",18),t.C$Y()(),t.k70(),t.SAx(46),t.I0R(47,"div",14)(48,"div",19)(49,"span",16),t.OEk(50),t.wVc(51,"transloco"),t.C$Y()(),t.I0R(52,"div",17),t.yuY(53,Rt,10,6,"ng-container",18),t.C$Y()(),t.k70(),t.I0R(54,"button",20)(55,"div",21)(56,"span",22),t.qCj("click",function(){return r.onSubmit()}),t.OEk(57),t.wVc(58,"transloco"),t.C$Y()()()()(),t.k70()),2&n){const i=t.Gew(9);t.yG2(2),t.E7m("formGroup",r.landForm),t.yG2(3),t.E7m("matMenuTriggerFor",i),t.yG2(9),t.cNF(t.kDX(15,19,"Delete")),t.yG2(2),t.E7m("routerLink",t.q4q(31,xt)),t.yG2(8),t.cNF(t.kDX(25,21,"Location")),t.yG2(2),t.E7m("formControlName","location"),t.yG2(4),t.cNF(t.kDX(31,23,"AreaInSquareMeters")),t.yG2(2),t.E7m("formControlName","areaInSquareMeters"),t.yG2(4),t.cNF("Surveyor"),t.yG2(),t.E7m("formControlName","surveyor"),t.yG2(2),t.E7m("hidden",r.hiddenOwner),t.yG2(3),t.oRS(" ",t.kDX(43,25,"Owner")," "),t.yG2(3),t.E7m("ngForOf",r.ownerArray.controls)("ngForTrackBy",r.trackByFn),t.yG2(2),t.E7m("hidden",r.hiddenRestriction),t.yG2(3),t.oRS(" ",t.kDX(51,27,"Restriction")," "),t.yG2(3),t.E7m("ngForOf",r.restrictionArray.controls)("ngForTrackBy",r.trackByFn),t.yG2(4),t.cNF(t.kDX(58,29,"Save"))}},dependencies:[l.y,l.sz,l.ot,l.ue,l.u,l.sl,l.ug,l.uW,l.Wo,h.oJ,h.Gw,h.cP,h.um,f.u_,b.oB,b.qL,k._A,k.aM,k.OQ,k.yG,y.ER,Y.U,Y.k,u.wb,u.Up,u.w5,u.Gm,g.cN,g.yi,P.aC,f.Iw,L.KE,U.Vn,d.iU,d.SU,d.Ul,d.yu,d._C,d.o9,d.Y3,p.kJ,p.M7],encapsulation:2,changeDetection:0})}return o})();var x=c(1928),N=c(6364),T=c(2523);function Et(o,s){if(1&o&&(t.I0R(0,"mat-option",10),t.OEk(1),t.C$Y()),2&o){const e=s.$implicit,n=t.GaO();t.E7m("value",e.name)("selected",n.landForm.controls.country.value===e.name),t.yG2(),t.oRS(" ",e.name," ")}}function Ot(o,s){if(1&o&&(t.I0R(0,"mat-option",10),t.OEk(1),t.C$Y()),2&o){const e=s.$implicit,n=t.GaO();t.E7m("value",e.code)("selected",n.landForm.controls.city),t.yG2(),t.oRS(" ",e.name_ar," ")}}function Dt(o,s){if(1&o&&(t.I0R(0,"mat-option",11),t.OEk(1),t.C$Y()),2&o){const e=s.$implicit;t.E7m("value",e.code),t.yG2(),t.oRS(" ",e.name_ar," ")}}let $t=(()=>{class o{constructor(e,n){this._formBuilder=e,this._landsService=n}ngOnInit(){this.landForm=this._formBuilder.group({country:[""],city:[""],district:[""]}),this.loadCountries(),this.loadCities(),this.loadDistricts()}loadCountries(){this._landsService.getCountries("base").subscribe(e=>{if(this.countries=e,console.log("countries from component",e),this._landsService&&this._landsService.controls.country){const r=this.countries.find(i=>17===i.id);r&&this._landsService.controls.country.setValue(r.name)}},e=>{console.error("Error loading countries:",e)})}loadCities(){this._landsService.getCities("base").subscribe(e=>{this.cities=e,console.log("from componet",e)},e=>{console.error("Error loading cities:",e)})}loadDistricts(){this._landsService.getDistricts("base").subscribe(e=>{this.districts=e},e=>{console.error("Error loading districts:",e)})}onCountryChange(){const e=this._landsService.controls.country.value;this.filteredCities=e?this.cities.filter(n=>n.countryID===e):this.cities}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(l.im),t.GI1(E))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["addition-step-one"]],inputs:{landForm:"landForm",countries:"countries",cities:"cities",districts:"districts"},standalone:!0,features:[t.UHJ],decls:65,vars:42,consts:[[1,"mb-8"],[1,"p-4","pb-2","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],[1,"grid","lg:grid-cols-3","md:grid-cols-2","grid-cols-1","gap-4"],[1,"w-full"],["matInput","","placeholder","",3,"formControl"],[1,"text-gray-400"],["placeholder","",3,"formControl"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-4"],[3,"value","selected"],[3,"value"]],template:function(n,r){1&n&&(t.I0R(0,"div",0)(1,"form",1),t.SAx(2),t.I0R(3,"div",2)(4,"div")(5,"mat-form-field",3)(6,"mat-label"),t.OEk(7),t.wVc(8,"transloco"),t.C$Y(),t.wR5(9,"input",4),t.C$Y()(),t.I0R(10,"div")(11,"mat-form-field",3)(12,"mat-label"),t.OEk(13),t.wVc(14,"transloco"),t.C$Y(),t.wR5(15,"input",4),t.C$Y()(),t.I0R(16,"div")(17,"mat-form-field",3)(18,"mat-label"),t.OEk(19),t.wVc(20,"transloco"),t.C$Y(),t.wR5(21,"input",4),t.C$Y()(),t.I0R(22,"div")(23,"mat-form-field",3)(24,"mat-label"),t.OEk(25),t.wVc(26,"transloco"),t.I0R(27,"span",5),t.OEk(28),t.wVc(29,"transloco"),t.C$Y()(),t.wR5(30,"input",4),t.C$Y()(),t.I0R(31,"div")(32,"mat-form-field",3)(33,"mat-label"),t.OEk(34),t.wVc(35,"transloco"),t.C$Y(),t.I0R(36,"mat-select",6),t.yuY(37,Et,2,3,"mat-option",7),t.C$Y()()(),t.I0R(38,"div")(39,"mat-form-field",3)(40,"mat-label"),t.OEk(41),t.wVc(42,"transloco"),t.C$Y(),t.I0R(43,"mat-select",6),t.yuY(44,Ot,2,3,"mat-option",7),t.C$Y()()(),t.I0R(45,"div")(46,"mat-form-field",3)(47,"mat-label"),t.OEk(48),t.wVc(49,"transloco"),t.C$Y(),t.I0R(50,"mat-select",6),t.yuY(51,Dt,2,2,"mat-option",8),t.C$Y()()(),t.I0R(52,"div")(53,"mat-form-field",3)(54,"mat-label"),t.OEk(55),t.wVc(56,"transloco"),t.C$Y(),t.wR5(57,"input",4),t.C$Y()(),t.I0R(58,"div")(59,"mat-form-field",3)(60,"mat-label"),t.OEk(61),t.wVc(62,"transloco"),t.C$Y(),t.wR5(63,"input",4),t.C$Y()()(),t.k70(),t.wR5(64,"div",9),t.C$Y()()),2&n&&(t.yG2(7),t.cNF(t.kDX(8,22,"Location")),t.yG2(2),t.E7m("formControl",r.landForm.controls.location),t.yG2(4),t.oRS(" ",t.kDX(14,24,"AreaInSquareMeters")," "),t.yG2(2),t.E7m("formControl",r.landForm.controls.areaInSquareMeters),t.yG2(4),t.cNF(t.kDX(20,26,"Address 1")),t.yG2(2),t.E7m("formControl",r.landForm.controls.address),t.yG2(4),t.oRS("",t.kDX(26,28,"Address 2")," "),t.yG2(3),t.cNF(t.kDX(29,30,"(Optional)")),t.yG2(2),t.E7m("formControl",r.landForm.controls.address),t.yG2(4),t.cNF(t.kDX(35,32,"Country")),t.yG2(2),t.E7m("formControl",r.landForm.controls.country),t.yG2(),t.E7m("ngForOf",r.countries),t.yG2(4),t.cNF(t.kDX(42,34,"City")),t.yG2(2),t.E7m("formControl",r.landForm.controls.city),t.yG2(),t.E7m("ngForOf",r.cities),t.yG2(4),t.cNF(t.kDX(49,36,"District")),t.yG2(2),t.E7m("formControl",r.landForm.controls.district),t.yG2(),t.E7m("ngForOf",r.districts),t.yG2(4),t.cNF(t.kDX(56,38,"Zip Code")),t.yG2(2),t.E7m("formControl",r.landForm.controls.zipCode),t.yG2(4),t.cNF(t.kDX(62,40,"Surveyor")),t.yG2(2),t.E7m("formControl",r.landForm.controls.Surveyor))},dependencies:[h.oJ,N.KO,l.sl,l.sz,l.ot,l.ue,l.u,l.ug,f.Iw,b.oB,l.y,l.SC,g.cN,g.yi,u.Up,u.w5,T.d5,T.kX,L.I5,d.iU,p.kJ,p.M7],encapsulation:2})}return o})();var B=c(4336);function Lt(o,s){if(1&o){const e=t.KQA();t.I0R(0,"button",18),t.qCj("click",function(){t.usT(e);const r=t.GaO().index,i=t.GaO();return t.CGJ(i.removeForm(r))}),t.wR5(1,"mat-icon",19),t.C$Y()}2&o&&(t.yG2(),t.E7m("svgIcon","heroicons_outline:trash"))}function Yt(o,s){if(1&o&&(t.I0R(0,"div"),t.SAx(1),t.I0R(2,"div",4)(3,"h1",5),t.OEk(4),t.wVc(5,"transloco"),t.C$Y()(),t.I0R(6,"div",6)(7,"div",7)(8,"mat-form-field",8)(9,"mat-label"),t.OEk(10),t.wVc(11,"transloco"),t.C$Y(),t.wR5(12,"input",9),t.C$Y()(),t.I0R(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t.OEk(16),t.wVc(17,"transloco"),t.C$Y(),t.wR5(18,"input",9),t.C$Y()(),t.I0R(19,"div",7)(20,"mat-form-field",8)(21,"mat-label"),t.OEk(22),t.wVc(23,"transloco"),t.C$Y(),t.wR5(24,"input",10)(25,"mat-datepicker-toggle",11),t.I0R(26,"mat-datepicker",12,13)(28,"mat-datepicker-actions")(29,"button",14),t.OEk(30),t.wVc(31,"transloco"),t.C$Y(),t.I0R(32,"button",15),t.OEk(33),t.wVc(34,"transloco"),t.C$Y()()()()()(),t.I0R(35,"div",16),t.yuY(36,Lt,2,1,"button",17),t.C$Y(),t.k70(),t.C$Y()),2&o){const e=s.$implicit,n=s.index,r=t.Gew(27),i=t.GaO();t.yG2(4),t.CAO("",t.kDX(5,13,"Owner"),": ",n+1,""),t.yG2(6),t.cNF(t.kDX(11,15,"Buyer")),t.yG2(2),t.E7m("formControl",e.get("buyer")),t.yG2(4),t.cNF(t.kDX(17,17,"Seller")),t.yG2(2),t.E7m("formControl",e.get("seller")),t.yG2(4),t.cNF(t.kDX(23,19,"OwnershipDate")),t.yG2(2),t.E7m("matDatepicker",r)("formControl",e.get("ownershipDate")),t.yG2(),t.E7m("for",r),t.yG2(5),t.cNF(t.kDX(31,21,"Cancel")),t.yG2(3),t.cNF(t.kDX(34,23,"Apply")),t.yG2(3),t.E7m("ngIf",i.ownersArray.length>1)}}let St=(()=>{class o{constructor(e){this._formBuilder=e,this.showNewForm=!1}ngOnInit(){}get ownersArray(){return this.landForm.get("owners").controls}addNewForm(){const e=this._formBuilder.group({landId:[3],ownershipDate:[null],buyer:[""],seller:[""],userId:[""]});this.landForm.get("owners").push(e),this.showNewForm=!0,console.log(this.ownersArray),console.log(this.landForm)}removeForm(e){const n=this.landForm.get("owners");n.length>1&&(n.removeAt(e),this.showNewForm=this.ownersArray.length>0)}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(l.im))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["add-owner"]],inputs:{landForm:"landForm"},standalone:!0,features:[t.UHJ],decls:5,vars:2,consts:[[1,"mb-8",3,"formGroup"],["formArrayName","owners",1,"p-4","pb-2","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],[4,"ngFor","ngForOf"],[1,"text-h2","px-4","border-2","border-slate-200","dark:border-slate-500","rounded-lg","mb-4",3,"click"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold"],[1,"grid","lg:grid-cols-3","md:grid-cols-2","grid-cols-1","gap-4"],[1,""],[1,"w-full"],["matInput","","placeholder","",3,"formControl"],["matInput","","placeholder","Choose a date",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["id","ownershipDate"],["ownershipDate",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],[1,"flex","justify-end"],["class","text-lg border-2 border-gray-200 dark:border-gray-500 rounded-lg",3,"click",4,"ngIf"],[1,"text-lg","border-2","border-gray-200","dark:border-gray-500","rounded-lg",3,"click"],[1,"text-red-400",3,"svgIcon"]],template:function(n,r){1&n&&(t.I0R(0,"div",0)(1,"form",1),t.yuY(2,Yt,37,25,"div",2),t.C$Y(),t.I0R(3,"button",3),t.qCj("click",function(){return r.addNewForm()}),t.OEk(4,"+"),t.C$Y()()),2&n&&(t.E7m("formGroup",r.landForm),t.yG2(2),t.E7m("ngForOf",r.ownersArray))},dependencies:[h.oJ,h.Gw,N.KO,l.sl,l.sz,l.ot,l.ue,l.u,l.ug,l.uW,l.uE,f.u_,f.Iw,b.oB,b.qL,l.y,l.SC,g.cN,g.yi,u.Up,u.w5,u.Gm,T.d5,d.iU,d.SU,d.Ul,d.yu,d._C,d.o9,d.Y3,p.kJ,p.M7],encapsulation:2})}return o})();var Tt=c(2704),At=c(3820);function Nt(o,s){if(1&o){const e=t.KQA();t.I0R(0,"button",14),t.qCj("click",function(){t.usT(e);const r=t.GaO().index,i=t.GaO();return t.CGJ(i.removeForm(r))}),t.wR5(1,"mat-icon",15),t.C$Y()}2&o&&(t.yG2(),t.E7m("svgIcon","heroicons_outline:trash"))}function Bt(o,s){if(1&o&&(t.I0R(0,"div",6)(1,"div",7)(2,"h1",8),t.OEk(3),t.wVc(4,"transloco"),t.C$Y()(),t.I0R(5,"div",9)(6,"div",6)(7,"mat-form-field",10)(8,"mat-label"),t.OEk(9),t.wVc(10,"transloco"),t.C$Y(),t.wR5(11,"input",11),t.C$Y()(),t.I0R(12,"div",6)(13,"mat-form-field",10)(14,"mat-label"),t.OEk(15),t.wVc(16,"transloco"),t.C$Y(),t.wR5(17,"input",11),t.C$Y()()(),t.I0R(18,"div",12),t.yuY(19,Nt,2,1,"button",13),t.C$Y()()),2&o){const e=s.$implicit,n=s.index,r=t.GaO();t.yG2(3),t.CAO("",t.kDX(4,7,"Restriction")," : ",n+1,""),t.yG2(6),t.cNF(t.kDX(10,9,"Description")),t.yG2(2),t.E7m("formControl",e.get("description")),t.yG2(4),t.oRS(" ",t.kDX(16,11,"pathFile"),""),t.yG2(2),t.E7m("formControl",e.get("pathFile")),t.yG2(2),t.E7m("ngIf",r.restrictionsArray.length>1)}}let Vt=(()=>{class o{constructor(e){this._formBuilder=e,this.showNewForm=!1}ngOnInit(){}get restrictionsArray(){return this.landForm.get("restrictions").controls}addNewForm(){const e=this._formBuilder.group({Description:[""],pathFile:[""]});this.landForm.get("restrictions").push(e),this.showNewForm=!0}removeForm(e){const n=this.landForm.get("restrictions");n.length>1&&(n.removeAt(e),this.showNewForm=n.length>0)}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(l.im))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["add-restriction"]],inputs:{landForm:"landForm"},standalone:!0,features:[t.UHJ],decls:8,vars:3,consts:[[1,"mb-8",3,"formGroup"],["formArrayName","restrictions",1,"pt-4","px-4","mb-4","border-2","border-gray-200","dark:border-gray-500","rounded-lg"],["class","",4,"ngFor","ngForOf"],[1,"text-h2","px-4","border-2","border-slate-200","dark:border-slate-500","rounded-lg","mb-4",3,"click"],[1,"mt-6","mb-4","border-gray-400"],[3,"insuranceWealthForm"],[1,""],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold"],[1,"grid","lg:grid-cols-2","md:grid-cols-2","grid-cols-1","gap-4"],[1,"w-full"],["matInput","","placeholder","",3,"formControl"],[1,"flex","justify-end"],["class","text-lg  border-2 border-gray-200 dark:border-gray-500 rounded-lg",3,"click",4,"ngIf"],[1,"text-lg","border-2","border-gray-200","dark:border-gray-500","rounded-lg",3,"click"],[1,"text-red-400",3,"svgIcon"]],template:function(n,r){1&n&&(t.I0R(0,"div",0)(1,"form",1),t.SAx(2),t.yuY(3,Bt,20,13,"div",2),t.k70(),t.C$Y(),t.I0R(4,"button",3),t.qCj("click",function(){return r.addNewForm()}),t.OEk(5,"+"),t.C$Y(),t.wR5(6,"mat-divider",4)(7,"insurance-wealth",5),t.C$Y()),2&n&&(t.E7m("formGroup",r.landForm),t.yG2(3),t.E7m("ngForOf",r.restrictionsArray),t.yG2(4),t.E7m("insuranceWealthForm",r.landForm))},dependencies:[h.oJ,N.KO,l.sl,l.sz,l.ot,l.ue,l.u,l.ug,l.uW,l.uE,f.u_,f.Iw,b.oB,b.qL,l.y,l.SC,g.cN,g.yi,u.Up,u.w5,T.d5,d.iU,p.kJ,p.M7,U.Vn,Y.U,Y.k,Tt.CU,L.Ko,At.O],styles:["input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.example-right-align[_ngcontent-%COMP%]{-moz-appearance:textfield}"]})}return o})();var Mt=c(4944);const Xt=["signUpNgForm"],Ut=["stepper"];function Jt(o,s){1&o&&(t.OEk(0),t.wVc(1,"transloco")),2&o&&t.oRS("",t.kDX(1,1,"Step-One")," ")}function jt(o,s){if(1&o){const e=t.KQA();t.SAx(0),t.I0R(1,"mat-stepper",4,5),t.qCj("completed",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.onSubmit())}),t.I0R(3,"mat-step"),t.yuY(4,Jt,2,3,"ng-template",6),t.wR5(5,"addition-step-one",7),t.I0R(6,"div",8)(7,"button",9),t.OEk(8),t.wVc(9,"transloco"),t.C$Y()()(),t.I0R(10,"mat-step",10),t.wVc(11,"transloco"),t.wR5(12,"add-owner",7),t.I0R(13,"div",11)(14,"button",12),t.OEk(15),t.wVc(16,"transloco"),t.C$Y(),t.I0R(17,"button",13),t.OEk(18),t.wVc(19,"transloco"),t.C$Y()()(),t.I0R(20,"mat-step",14),t.wVc(21,"transloco"),t.wR5(22,"add-restriction",7),t.I0R(23,"div",11)(24,"button",12),t.OEk(25),t.wVc(26,"transloco"),t.C$Y(),t.I0R(27,"button",15),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.onSubmit())}),t.OEk(28),t.wVc(29,"transloco"),t.C$Y()()()(),t.k70()}if(2&o){const e=t.GaO();t.yG2(),t.E7m("linear",e.isLinear),t.yG2(4),t.E7m("landForm",e.LandForm),t.yG2(3),t.cNF(t.kDX(9,12,"Next")),t.yG2(2),t._6D("label",t.kDX(11,14,"Owners")),t.yG2(2),t.E7m("landForm",e.LandForm),t.yG2(3),t.cNF(t.kDX(16,16,"Previous")),t.yG2(3),t.cNF(t.kDX(19,18,"Next")),t.yG2(2),t._6D("label",t.kDX(21,20,"Restriction")),t.E7m("stepControl",e.restrictionsArray[3]),t.yG2(2),t.E7m("landForm",e.LandForm),t.yG2(3),t.cNF(t.kDX(26,22,"Previous")),t.yG2(3),t.cNF(t.kDX(29,24,"Save"))}}let V=(()=>{class o{constructor(e,n,r,i,a){this._formBuilder=e,this._landService=n,this.snackBar=r,this._fuseNavigationService=i,this._changeDetectorRef=a,this.isLinear=!1,this.showAlert=!1,this.horizontalPosition="center",this.verticalPosition="top",this._unsubscribeAll=new D.E,this.editMode=!0}ngOnInit(){this.createLandForm(),this.getLandForm()}createLandForm(){this.LandForm=this._formBuilder.group({location:["test address"],areaInSquareMeters:[3],surveyor:["test"],assetId:[3],userId:[1080],owners:this._formBuilder.array([]),restrictions:this._formBuilder.array([]),insurances:this._formBuilder.array([])}),this.addOwner(),this.addRestriction(),this.addInsurance()}getLandForm(){this._landService.landId$.pipe((0,R.a)(this._unsubscribeAll)).subscribe(e=>{this.LandForm.get("restrictions").clear(),this.LandForm.get("owners").clear(),this.LandForm.get("insurances").clear(),this.LandForm.patchValue(e,{emitEvent:!1});const n=[];n.push(this._formBuilder.group({landId:[3],ownershipDate:[new Date],buyer:["test"],seller:["test"],userId:["test"]})),n.forEach(a=>{this.LandForm.get("owners").push(a)});const r=[];r.push(this._formBuilder.group({landId:[3],description:["test"],pathFile:[500]})),r.forEach(a=>{this.LandForm.get("restrictions").push(a)});const i=[];i.push(this._formBuilder.group({insureById:[1],itemId:[],assetCode:["building"],insuranceName:["test"],insuranceCompanyId:[0],policyNumber:["test"],name:["test"],file:[""],startDate:[new Date],expiredDate:[new Date],typeOfCoverage:["test"],limitationLiability:[""],deductibles:[""],insuredItemList:this._formBuilder.group({assetId:[3],userId:[1080]})})),i.forEach(a=>{this.LandForm.get("insurances").push(a)}),this._changeDetectorRef.markForCheck()})}toggleEditMode(e=null){this.editMode=null===e?!this.editMode:e,this._changeDetectorRef.markForCheck()}get ownersArray(){return this.LandForm.get("owners")}get restrictionsArray(){return this.LandForm.get("restrictions")}get insurancesArray(){return this.LandForm.get("insurances")}addOwner(){this.LandForm.get("owners").push(this._formBuilder.group({landId:[3],ownershipDate:[new Date],buyer:["test"],seller:["test"],userId:["test"]})),this._changeDetectorRef.markForCheck()}creareOwner(){return this._formBuilder.group({landId:[3],ownershipDate:[null],buyer:["test"],seller:["test"],userId:["test"]})}addRestriction(){this.LandForm.get("restrictions").push(this._formBuilder.group({landId:[3],description:["test"],pathFile:[500]})),this._changeDetectorRef.markForCheck()}openSnackBar(e,n){const r=new B.QT;r.panelClass=["custom-snack-bar"],r.verticalPosition="top",r.horizontalPosition="center",r.duration=3e3,this.snackBar.open(e,n,r).onAction().subscribe(()=>{const a=document.querySelector(".custom-snack-bar");a&&a.classList.add("custom-snack-bar-content")})}addInsurance(){this.LandForm.get("insurances").push(this._formBuilder.group({insureById:[0],itemId:[0],assetCode:[""],insuranceName:[""],insuranceCompanyId:[0],policyNumber:[""],name:[""],file:[""],startDate:[""],expiredDate:[""],typeOfCoverage:[""],limitationLiability:[""],deductibles:[""],insuredItemList:this._formBuilder.group({assetId:[3],userId:[1080]})}))}onSubmit(){this.LandForm.valid?this._landService.createLand(this.LandForm.value,"base").subscribe(e=>{const n=e;console.log("Success:",e),this.snackBar.open(n.message,"success",{duration:3e3}),this.LandForm.reset(),this.getLandForm(),this.createLandForm(),this.stepper.selectedIndex=0,this.showAlert=!0},e=>{console.error("Error:",e),console.log(this.LandForm),console.log(this.LandForm)}):(console.error("Form is invalid"),console.log(this.LandForm))}ngOnDestroy(){this._fuseNavigationService.getComponent("mainNavigation")}static#t=this.\u0275fac=function(n){return new(n||o)(t.GI1(l.im),t.GI1(E),t.GI1(B.yS),t.GI1(Mt.q2),t.GI1(t.kD9))};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["add-land"]],viewQuery:function(n,r){if(1&n&&(t.CC$(Xt,5),t.CC$(Ut,5)),2&n){let i;t.wto(i=t.Gqi())&&(r.signUpNgForm=i.first),t.wto(i=t.Gqi())&&(r.stepper=i.first)}},standalone:!0,features:[t.UHJ],decls:4,vars:1,consts:[[1,"bg-card","w-full"],[1,"flex","flex-auto","min-w-0","flex-col","max-w-screen-xl","mx-auto","h-full"],[3,"formGroup"],[4,"transloco"],["labelPosition","bottom",3,"linear","completed"],["stepper",""],["matStepLabel",""],[3,"landForm"],[1,"flex","justify-end"],["mat-button","","matStepperNext","",1,""],[3,"label"],[1,"flex","justify-between"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext",""],[3,"label","stepControl"],["mat-button","",3,"click"]],template:function(n,r){1&n&&(t.I0R(0,"div",0)(1,"div",1)(2,"form",2),t.yuY(3,jt,30,26,"ng-container",3),t.C$Y()()()),2&n&&(t.yG2(2),t.E7m("formGroup",r.LandForm))},dependencies:[l.y,l.sz,l.u,l.sl,l.uW,u.wb,g.cN,x.MJ,x.Un,x.E9,x.uI,x.yi,x.o1,h.oJ,h.Gw,$t,St,Vt,B.uE,p.kJ,p.IZ,p.M7],styles:[".custom-snack-bar{background-color:your-desired-background-color;color:red!important}.custom-snack-bar-content,.custom-snack-bar{color:red!important}.back{padding:5 rem!important;background-color:#0ff!important}.verification-form{max-width:500px;margin:0 auto;padding:2rem;border:1px solid #ccc;border-radius:4px;box-shadow:0 2px 4px #0000001a}.verification-form h1{text-align:center;margin-bottom:1rem}.verification-form p{text-align:center;margin-bottom:2rem}.verification-form .form-group{margin-bottom:1rem}.verification-form .form-control,.verification-form .btn-primary{width:100%}\n"],encapsulation:2,changeDetection:0})}return o})();const j=(o,s)=>{const e=(0,t.uUt)(E),n=(0,t.uUt)(y.E5);return e.getLandById("base",o.paramMap.get("id")).pipe((0,O.a)(r=>{console.error(r);const i=s.url.split("/").slice(0,-1).join("/");return n.navigateByUrl(i),(0,F.c)(r)}))},zt=[{path:"",component:X,children:[{path:"",component:X,children:[{path:"add-land",component:V},{path:"",component:J,resolve:{},children:[{path:":id",component:Ft,resolve:{land:j},canDeactivate:[(o,s,e,n)=>{let r=n.root;for(;r.firstChild;)r=r.firstChild;return!!r.paramMap.get("id")||(n.url.includes("lands")?(console.log("found Error in drawer"),o.closeDrawer().then(()=>!0)):(console.log("found Error in drawer"),!0))}]}]},{path:"edit-land",component:V,children:[{path:":id",component:V,resolve:{land:j}}]}]}]}]}}]);